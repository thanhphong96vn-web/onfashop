import{_ as e,a as s,c as t,r as a,e as i,m as o,h as l,o as r,i as n,j as d,w as h,k as m,t as u,n as _,F as p,p as c,q as g,s as f,v}from"./app-5a177a8d.js";const w={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},showPhoneField:!1,v$:s(),form:{email:"",phone:"",invalidPhone:!0,showInvalidPhone:!1},loading:!1}),components:{VueTelInput:t},validations:{form:{email:{requiredIf:a(function(){return"email"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with&&!this.showPhoneField}),email:i},phone:{requiredIf:a(function(){return"phone"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with&&this.showPhoneField})}}},computed:{...o("app",["availableCountries"]),...o("auth",["authSettings"]),emailErrors(){const e=[];return this.v$.form.email.$dirty?(!this.v$.form.email.requiredIf&&e.push(this.$i18n.t("this_field_is_required")),!this.v$.form.email.email&&e.push(this.$i18n.t("this_field_is_required_a_valid_email")),e):e}},methods:{phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async resetPassword(){if(!(await this.v$.$validate()))return;if(("phone"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with&&this.showPhoneField)&&this.form.invalidPhone)return void(this.form.showInvalidPhone=!0);this.form.phone=this.form.phone.replace(/\s/g,""),this.loading=!0;const e=await this.call_api("post","auth/password/create",this.form);e.data.success?(e.data.email?this.$router.push({name:"NewPassword",params:{email:this.form.email}}):this.$router.push({name:"NewPassword",params:{phone:this.form.phone}}),this.snack({message:e.data.message})):this.snack({message:e.data.message,color:"red"}),this.loading=!1}}},y={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},$={class:"px-lg-7"},b={class:"text-uppercase lh-1 mb-4"},x={class:"display-1 primary--text fw-900"},P={class:"d-block display-1 fw-900 grey--text text--darken-3"},k={key:0,class:"fs-16 fw-500 mb-6"},S={key:1,class:"fs-16 fw-500 mb-6"},F={key:2,class:"fs-16 fw-500 mb-6"},C={key:0,class:"mb-6"},I={class:"mb-1 fs-13 fw-500"},V={key:0,class:"text-end font-italic fs-12 opacity-70"},q={key:1,class:"mb-6"},D={class:"mb-1 fs-13 fw-500"},O={key:0,class:"v-text-field__details mt-2 pl-3"},j={class:"v-messages theme--light error--text",role:"alert"},L={class:"v-messages__wrapper"},N={class:"v-messages__message"},U={key:1,class:"v-text-field__details mt-2 pl-3"},z={class:"v-messages theme--light error--text",role:"alert"},E={class:"v-messages__wrapper"},T={class:"v-messages__message"},A={key:2,class:"text-end font-italic fs-12 opacity-70"};const B=e(w,[["render",function(e,s,t,a,i,o){const w=l("banner"),B=l("v-col"),G=l("v-text-field"),H=l("vue-tel-input"),J=l("v-btn"),K=l("v-form"),M=l("router-link"),Q=l("v-row"),R=l("v-container");return r(),n("div",null,[d(R,null,{default:h(()=>[d(Q,null,{default:h(()=>[d(B,{xl:"10",class:"mx-auto"},{default:h(()=>[m("div",y,[d(Q,{"no-gutters":"",align:"center"},{default:h(()=>[d(B,{cols:"12",lg:"6",order:"2","order-lg":"1",class:"lh-0"},{default:h(()=>[d(w,{loading:!1,banner:e.$store.getters["app/banners"].forgot_page,class:"mt-5 mt-lg-0"},null,8,["banner"])]),_:1}),d(B,{cols:"12",order:"1","order-lg":"2",lg:"6"},{default:h(()=>[m("div",$,[m("h1",b,[m("span",x,u(e.$t("forgot")),1),m("span",P,u(e.$t("password")),1),s[5]||(s[5]=m("span",{class:"fs-22 fw-900 display-3 primary--text"},"?",-1))]),"email"==e.authSettings.customer_login_with?(r(),n("div",k,u(e.$t("enter_your_email_address_to_recover_your_password")),1)):"phone"==e.authSettings.customer_login_with?(r(),n("div",S,u(e.$t("enter_your_phone_number_to_recover_your_password")),1)):(r(),n("div",F,u(e.$t("enter_your_email_address_or_phone_number_to_recover_your_password")),1)),d(K,{ref:"loginForm","lazy-validation":"",onSubmit:s[4]||(s[4]=_(e=>o.resetPassword(),["prevent"]))},{default:h(()=>["email"==e.authSettings.customer_login_with||!e.showPhoneField&&"email_phone"==e.authSettings.customer_login_with?(r(),n("div",C,[m("div",I,u(e.$t("email")),1),d(G,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":s[0]||(s[0]=s=>e.form.email=s),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(r(!0),n(p,null,c(e.v$.form.email.$errors,e=>(r(),n("p",{key:e.$uid,class:"text-red"},u(e.$message),1))),128)),"email_phone"==e.authSettings.customer_login_with?(r(),n("div",V,[m("span",{class:"text-primary c-pointer",onClick:s[1]||(s[1]=s=>e.showPhoneField=!e.showPhoneField)},u(e.$t("use_phone_instead")),1)])):g("",!0)])):g("",!0),"phone"==e.authSettings.customer_login_with||e.showPhoneField&&"email_phone"==e.authSettings.customer_login_with?(r(),n("div",q,[m("div",D,u(e.$t("phone_number")),1),d(H,f({modelValue:e.form.phone,"onUpdate:modelValue":s[2]||(s[2]=s=>e.form.phone=s)},e.mobileInputProps,{onlyCountries:e.availableCountries,onValidate:o.phoneValidate}),{default:h(()=>[...s[6]||(s[6]=[m("template",{slot:"arrow-icon"},[m("span",{class:"vti__dropdown-arrow"}," ▼")],-1)])]),_:1},16,["modelValue","onlyCountries","onValidate"]),e.v$.form.phone.$error?(r(),n("div",O,[m("div",j,[m("div",L,[m("div",N,u(e.$t("this_field_is_required")),1)])])])):g("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(r(),n("div",U,[m("div",z,[m("div",E,[m("div",T,u(e.$t("phone_number_must_be_valid")),1)])])])):g("",!0),"email_phone"==e.authSettings.customer_login_with?(r(),n("div",A,[m("span",{onClick:s[3]||(s[3]=s=>e.showPhoneField=!e.showPhoneField),class:"primary--text"},u(e.$t("use_phone_instead")),1)])):g("",!0)])):g("",!0),d(J,{"x-large":"",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",onClick:o.resetPassword,loading:e.loading,disabled:e.loading},{default:h(()=>[v(u(e.$t("send_password_reset_code")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1},512),m("div",null,[v(u(e.$t("back_to"))+" ",1),d(M,{to:{name:"Login"},class:"primary--text text-decoration-underline"},{default:h(()=>[v(u(e.$t("login")),1)]),_:1})])])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])}]]);export{B as default};
