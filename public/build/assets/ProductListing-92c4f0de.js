import{S as a}from"./ShowMore-04a09c0f.js";import{_ as e,Q as t,h as s,o as r,i as l,j as i,w as o,k as u,t as n,n as d,F as c,p as m,v as h,q as p,A as y,z as g}from"./app-0e743bd7.js";const f={class:"border-bottom pa-5 d-lg-none d-flex align-center"},b={class:"ms-4 fw-600 fs-14 lh-1"},P={class:"pa-5"},q={class:"mb-5"},v={class:"fw-700 fs-14 mb-4 border-bottom pb-3"},_={class:"list-unstyled ps-0"},w={class:"my-2"},$={key:0,class:"my-2"},x={key:0,class:"las la-angle-down fs-12 me-1"},k={class:"mb-4 pt-4 border-top"},C={class:"fw-700 fs-14 mb-3"},V={class:"d-flex align-center"},B={class:"col"},H={class:"col"},S={class:"col col-auto"},D={key:0,class:"mb-4 pt-4 border-top"},I={class:"fw-700 fs-14 mb-3"},U={key:0},O={class:"fw-700 fs-14 mb-3"},Z={key:0},A={class:"pt-5 ps-lg-7"},M={class:"d-flex align-center"},L={key:0,class:"fs-18"},j={key:1,class:"fs-18"},R={key:2,class:"fs-18"},T={class:"opacity-60 mb-0 fs-12"},F={class:"d-lg-none ms-auto ms-sm-0"},z={class:"fs-13 d-flex align-center opacity-80"},Q={class:"opacity-60 mx-1"},Y={class:"mb-7"},E={key:1,class:"pa-4 text-center fs-20"},G={key:0,class:"text-center"};const J=e({head:{title:"Product Listing Page"},data:()=>({metaTitle:"",metaDescription:"",loading:!0,filterDrawerOpen:!1,totalProducts:0,totalPages:1,isBrandRoute:!1,queryParam:{page:1,categorySlug:null,brandIds:[],attributeValues:[],keyword:null,sortBy:"popular",minPrice:null,maxPrice:null},attributes:[],allBrands:[],rootCategories:[],parentCategory:{},currentCategory:{},childCategories:[],products:[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],sortingDefault:{}}),components:{ShowMore:a},computed:{sortingOptions(){return[{name:this.$i18n.t("most_popular"),value:"popular"},{name:this.$i18n.t("latest_first"),value:"latest"},{name:this.$i18n.t("oldest_first"),value:"oldest"},{name:this.$i18n.t("higher_price_first"),value:"highest_price"},{name:this.$i18n.t("lower_price_first"),value:"lowest_price"}]}},watch:{metaTitle(a){this.updateHead(a,this.metaDescription)},metaDescription(a){this.updateHead(this.metaTitle,a)}},methods:{updateHead(a,e){t({title:a,meta:[{name:"description",content:e}]})},pageSwitch(a){this.$router.push({query:{...this.$route.query,page:this.queryParam.page}}).catch(()=>{}),this.getList({page:a})},sortUpdate(a){if(this.queryParam.sortBy=a,this.$router.push({query:{...this.$route.query,sortBy:this.queryParam.sortBy}}).catch(()=>{}),this.getList({sortBy:a}),"popular"!==this.queryParam.sortBy){let a=this.sortingOptions.find(a=>a.value===this.queryParam.sortBy);this.sortingDefault=a}},brandChange(a){if(this.queryParam.brandIds.indexOf(a)>-1){let e=this.queryParam.brandIds.indexOf(a);this.queryParam.brandIds.splice(e,1)}else this.queryParam.brandIds.push(a);this.$router.push({query:{...this.$route.query,brandIds:this.queryParam.brandIds}}).catch(()=>{}),this.getList({})},attributeValueChange(a){if(this.queryParam.attributeValues.indexOf(a)>-1){let e=this.queryParam.attributeValues.indexOf(a);this.queryParam.attributeValues.splice(e,1)}else this.queryParam.attributeValues.push(a);this.$router.push({query:{...this.$route.query,attributeValues:this.queryParam.attributeValues}}).catch(()=>{}),this.getList({})},filterByPriceRange(){let a={};a.minPrice=this.queryParam.minPrice,a.maxPrice=this.queryParam.maxPrice,this.$router.push({query:{...this.$route.query,...a}}).catch(()=>{}),this.getList({})},toggleFilterDrawer(a){this.filterDrawerOpen=a},async getList(a){this.loading=!0;let e={...this.queryParam,...a},t="product/search?";t+=`&page=${this.queryParam.page}`,t+=e.categorySlug?`&category_slug=${e.categorySlug}`:"",t+=e.brandIds?`&brand_ids=${e.brandIds}`:"",t+=e.attributeValues?`&attribute_values=${e.attributeValues}`:"",t+=e.keyword?`&keyword=${e.keyword}`:"",t+=e.sortBy?`&sort_by=${e.sortBy}`:"",t+=e.minPrice?`&min_price=${e.minPrice}`:"",t+=e.maxPrice?`&max_price=${e.maxPrice}`:"";const s=await this.call_api("get",t);s.data.success&&(this.loading=!1,this.metaTitle=s.data.metaTitle,this.products=s.data.products.data,this.attributes=s.data.attributes.data,this.allBrands=s.data.allBrands.data,this.rootCategories=s.data.rootCategories.data,this.parentCategory=s.data.parentCategory?s.data.parentCategory:{},this.currentCategory=s.data.currentCategory?s.data.currentCategory:{},this.childCategories=s.data.childCategories?s.data.childCategories.data:[],this.totalPages=s.data.totalPage,this.totalProducts=s.data.total,this.queryParam.page=s.data.currentPage)}},created(){this.isBrandRoute=!!this.$route.params.brandId||this.isBrandRoute,this.queryParam.categorySlug=this.$route.params.categorySlug||this.queryParam.categorySlug,this.queryParam.keyword=this.$route.params.keyword,this.queryParam.brandIds=this.$route.params.brandId||this.queryParam.brandIds,this.queryParam.page=this.$route.query.page||this.queryParam.page,this.queryParam.sortBy=this.$route.query.sortBy||this.queryParam.sortBy,this.queryParam.minPrice=this.$route.query.minPrice||this.queryParam.minPrice,this.queryParam.maxPrice=this.$route.query.maxPrice||this.queryParam.maxPrice,this.queryParam.attributeValues=this.$route.query.attributeValues||this.queryParam.attributeValues,this.sortingDefault={name:this.$i18n.t("most_popular"),value:"popular"},this.getList({page:this.queryParam.page,categorySlug:this.queryParam.categorySlug,brandIds:this.queryParam.brandIds,attributeValues:this.queryParam.attributeValues,keyword:this.queryParam.keyword,sortBy:this.queryParam.sortBy,minPrice:this.queryParam.minPrice,maxPrice:this.queryParam.maxPrice})}},[["render",function(a,e,t,J,K,N){const W=s("banner"),X=s("v-container"),aa=s("router-link"),ea=s("v-text-field"),ta=s("v-btn"),sa=s("v-checkbox"),ra=s("ShowMore"),la=s("v-col"),ia=s("v-select"),oa=s("v-row"),ua=s("product-box"),na=s("v-pagination");return r(),l("div",null,[i(X,{class:"pt-md-7 px-0 px-md-3 pb-0"},{default:o(()=>[i(W,{loading:!1,banner:a.$store.getters["app/banners"].listing_page},null,8,["banner"])]),_:1}),i(X,{class:"pt-0"},{default:o(()=>[i(oa,{"no-gutters":"",align:"start"},{default:o(()=>[i(la,{cols:"auto",class:"w-lg-270px sticky-top"},{default:o(()=>[u("div",{class:y(["border-end filter-drawer ",{"open c-scrollbar overflow-y-auto":a.filterDrawerOpen}])},[u("div",f,[e[7]||(e[7]=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[u("path",{id:"Path_2643","data-name":"Path 2643",d:"M20,5H18.829a3,3,0,0,0-5.659,0H4A1,1,0,0,0,4,7h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2ZM16,7a1,1,0,1,0-1-1A1,1,0,0,0,16,7ZM3,12a1,1,0,0,1,1-1H5.171a3,3,0,0,1,5.659,0H20a1,1,0,0,1,0,2H10.829a3,3,0,0,1-5.659,0H4A1,1,0,0,1,3,12Zm5,1a1,1,0,1,0-1-1A1,1,0,0,0,8,13ZM4,17a1,1,0,0,0,0,2h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2H18.829a3,3,0,0,0-5.659,0Zm13,1a1,1,0,1,1-1-1A1,1,0,0,1,17,18Z",transform:"translate(-3 -3)",fill:"#2a2e34","fill-rule":"evenodd"})],-1)),u("span",b,n(a.$t("filters")),1),u("button",{type:"button",onClick:e[0]||(e[0]=d(e=>N.toggleFilterDrawer(!a.filterDrawerOpen),["stop"])),class:"ms-4 fw-600 fs-20 lh-1 ms-auto"},[...e[6]||(e[6]=[u("i",{class:"la la-close fs-20"},null,-1)])])]),u("div",P,[u("div",q,[u("h4",v,n(a.$t("categories")),1),u("div",null,[u("ul",_,[a.is_empty_obj(a.currentCategory)?(r(!0),l(c,{key:0},m(a.rootCategories,(a,e)=>(r(),l("li",{key:e,class:"my-2"},[i(aa,{to:{name:"Category",params:{categorySlug:a.slug}},class:"text-reset fs-14"},{default:o(()=>[h(n(a.name),1)]),_:2},1032,["to"])]))),128)):(r(),l(c,{key:1},[u("li",w,[i(aa,{to:{name:"Shop"},class:"text-reset fs-14"},{default:o(()=>[e[8]||(e[8]=u("i",{class:"las la-angle-left fs-12 me-1"},null,-1)),u("span",null,n(a.$t("all_categories")),1)]),_:1})]),a.is_empty_obj(a.parentCategory)?p("",!0):(r(),l("li",$,[i(aa,{to:{name:"Category",params:{categorySlug:a.parentCategory.slug}},class:"text-reset fs-14"},{default:o(()=>[e[9]||(e[9]=u("i",{class:"las la-angle-left fs-12 me-1"},null,-1)),u("span",null,n(a.parentCategory.name),1)]),_:1},8,["to"])])),u("li",{class:y(["my-2",{"ms-5":0==a.childCategories.length}])},[i(aa,{to:{name:"Category",params:{categorySlug:a.currentCategory.slug}},class:"text-reset fs-14 fw-600"},{default:o(()=>[a.childCategories.length>0?(r(),l("i",x)):p("",!0),u("span",null,n(a.currentCategory.name),1)]),_:1},8,["to"])],2),(r(!0),l(c,null,m(a.childCategories,(a,e)=>(r(),l("li",{class:"my-2 ms-5",key:e},[i(aa,{to:{name:"Category",params:{categorySlug:a.slug}},class:"text-reset fs-14"},{default:o(()=>[u("span",null,n(a.name),1)]),_:2},1032,["to"])]))),128))],64))])])]),u("div",k,[u("h4",C,n(a.$t("price")),1),u("div",V,[u("div",B,[i(ea,{variant:"plain",type:"number",class:"form-control form-control-sm min-max-field",modelValue:a.queryParam.minPrice,"onUpdate:modelValue":e[1]||(e[1]=e=>a.queryParam.minPrice=e),placeholder:a.$t("min_price"),"hide-details":""},null,8,["modelValue","placeholder"])]),e[10]||(e[10]=u("span",{class:"mx-1 col col-auto opacity-60"},"to",-1)),u("div",H,[i(ea,{variant:"plain",type:"number",class:"form-control form-control-sm min-max-field",modelValue:a.queryParam.maxPrice,"onUpdate:modelValue":e[2]||(e[2]=e=>a.queryParam.maxPrice=e),placeholder:a.$t("max_price"),"hide-details":""},null,8,["modelValue","placeholder"])]),u("div",S,[i(ta,{size:"small",fab:"",type:"submit",color:"primary",class:"rounded ms-2",elevation:"0",onClick:N.filterByPriceRange},{default:o(()=>[h(n(a.$t("go")),1)]),_:1},8,["onClick"])])])]),a.isBrandRoute?p("",!0):(r(),l("div",D,[u("h4",I,n(a.$t("brands")),1),a.allBrands.length<5?(r(),l("div",U,[(r(!0),l(c,null,m(a.allBrands,(a,e)=>(r(),g(sa,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:e,label:a.name,"onUpdate:modelValue":e=>N.brandChange(a.id)},null,8,["label","onUpdate:modelValue"]))),128))])):(r(),g(ra,{key:1},{default:o(()=>[(r(!0),l(c,null,m(a.allBrands,(a,e)=>(r(),g(sa,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:e,label:a.name,"onUpdate:modelValue":e=>N.brandChange(a.id)},null,8,["label","onUpdate:modelValue"]))),128))]),_:1}))])),(r(!0),l(c,null,m(a.attributes,(a,e)=>(r(),l("div",{class:"mb-4 pt-4 border-top",key:e},[u("h4",O,n(a.name),1),a.values.data.length<5?(r(),l("div",Z,[(r(!0),l(c,null,m(a.values.data,(a,e)=>(r(),g(sa,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:e,label:a.name,"onUpdate:modelValue":e=>N.attributeValueChange(a.id)},null,8,["label","onUpdate:modelValue"]))),128))])):(r(),g(ra,{key:1},{default:o(()=>[(r(!0),l(c,null,m(a.values.data,(a,e)=>(r(),g(sa,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:e,label:a.name,"onUpdate:modelValue":e=>N.attributeValueChange(a.id)},null,8,["label","onUpdate:modelValue"]))),128))]),_:2},1024))]))),128))])],2)]),_:1}),i(la,null,{default:o(()=>[u("div",A,[i(oa,{align:"end",class:"mb-3"},{default:o(()=>[i(la,{cols:"12",sm:""},{default:o(()=>[u("div",M,[u("div",null,[a.queryParam.keyword?(r(),l("h1",L,n(a.$t("search_results_for"))+' "'+n(a.queryParam.keyword)+'"',1)):a.is_empty_obj(a.currentCategory)?(r(),l("h1",R,n(a.$t("all_products")),1)):(r(),l("h1",j,n(a.currentCategory.name),1)),u("p",T,n(a.$t("total")+" "+a.totalProducts+" "+a.$t("products_found")),1)]),u("div",F,[u("button",{class:"ms-4 pa-2 border-gray-300 rounded border d-flex justify-center align-center",onClick:e[3]||(e[3]=d(e=>N.toggleFilterDrawer(!a.filterDrawerOpen),["stop"])),type:"button"},[...e[11]||(e[11]=[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[u("path",{id:"Path_2643","data-name":"Path 2643",d:"M20,5H18.829a3,3,0,0,0-5.659,0H4A1,1,0,0,0,4,7h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2ZM16,7a1,1,0,1,0-1-1A1,1,0,0,0,16,7ZM3,12a1,1,0,0,1,1-1H5.171a3,3,0,0,1,5.659,0H20a1,1,0,0,1,0,2H10.829a3,3,0,0,1-5.659,0H4A1,1,0,0,1,3,12Zm5,1a1,1,0,1,0-1-1A1,1,0,0,0,8,13ZM4,17a1,1,0,0,0,0,2h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2H18.829a3,3,0,0,0-5.659,0Zm13,1a1,1,0,1,1-1-1A1,1,0,0,1,17,18Z",transform:"translate(-3 -3)",fill:"#2a2e34","fill-rule":"evenodd"})],-1)])])])])]),_:1}),i(la,{cols:"12",sm:"auto"},{default:o(()=>[i(ia,{modelValue:a.sortingDefault,"onUpdate:modelValue":[e[4]||(e[4]=e=>a.sortingDefault=e),N.sortUpdate],items:N.sortingOptions,"item-title":"name","item-value":"value","menu-props":{offsetY:!0},"append-inner-icon":"las la-angle-down fs-14",density:"compact",flat:"",solo:"",variant:"outlined","hide-details":""},{selection:o(({item:e})=>[u("span",z,[u("span",Q,n(a.$t("sort_by"))+":",1),u("span",null,n(e.title),1)])]),_:1},8,["modelValue","items","onUpdate:modelValue"])]),_:1})]),_:1}),u("div",Y,[a.products.length>0?(r(),g(oa,{key:0,class:"row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-xl-5 md-gutters-10"},{default:o(()=>[(r(!0),l(c,null,m(a.products,(e,t)=>(r(),g(la,{key:t},{default:o(()=>[i(ua,{"product-details":e,"is-loading":a.loading},null,8,["product-details","is-loading"])]),_:2},1024))),128))]),_:1})):(r(),l("div",E,n(a.$t("no_product_found")),1))]),a.totalPages>1?(r(),l("div",G,[i(na,{modelValue:a.queryParam.page,"onUpdate:modelValue":[e[5]||(e[5]=e=>a.queryParam.page=e),N.pageSwitch],class:"my-4",length:a.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0"},null,8,["modelValue","length","onUpdate:modelValue"])])):p("",!0)])]),_:1})]),_:1})]),_:1})])}],["__scopeId","data-v-c1ffa60a"]]);export{J as default};
