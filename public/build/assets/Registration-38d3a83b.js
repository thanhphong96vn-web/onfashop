import{_ as e,u as t,a,x as s,S as i,b as o,r,e as l,y as n,m as d,f as c,g as m,l as u,d as h,h as g,o as p,i as f,j as _,w,k as v,t as $,n as y,F as b,p as S,q as x,v as k}from"./app-0e743bd7.js";const{verifyRecaptcha:V}=t(),P={data:()=>({v$:a(),form:{name:"",phone:"",email:"",password:"",confirmPassword:""},passwordShow:!1,loading:!1}),components:{snackbar:s,SocialLogin:i},validations:{form:{name:{required:o},email:{requiredIf:r(function(){return"email"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with}),email:l},phone:{requiredIf:r(function(){return"phone"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with}),minLength:n(10),phoneFormat:e=>!e||/^\d{10}$/.test(e)},password:{required:o,minLength:n(6)},confirmPassword:{required:o,minLength:n(6)}}},computed:{...d("app",["generalSettings"]),...d("auth",["authSettings"]),...d("cart",["getTempUserId"])},methods:{...c("auth",["login"]),...m("cart",["removeTempUserId"]),...m("auth",["updateChatWindow","showLoginDialog"]),...c("app",["fetchProductQuerries","generalSettings"]),...c("wishlist",["fetchWislistProducts"]),...c("cart",["fetchCartProducts"]),async register(){var e,t;if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_customer_register){const e=await V("track_order");if(!e.success)return void this.snack({message:e.message,color:"red"})}this.v$.$touch();if(await this.v$.$validate()){this.form.phone=this.form.phone.replace(/\D/g,""),this.getTempUserId&&(this.form.temp_user_id=this.getTempUserId),this.loading=!0;try{const e=await this.call_api("post","auth/signup",this.form);e.data.success?(this.getTempUserId&&this.removeTempUserId(),"disabled"==this.authSettings.customer_otp_with?(this.login(e.data),this.showLoginDialog(!1),this.updateChatWindow(!1),this.fetchWislistProducts(),this.fetchProductQuerries(),this.fetchCartProducts(),this.$router.push(this.$route.query.redirect||{name:"DashBoard"})):("email"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with&&"email"==this.authSettings.customer_otp_with?this.$router.push({name:"VerifyAccount",params:{email:this.form.email}}):this.$router.push({name:"VerifyAccount",params:{phone:this.form.phone}}),this.snack({message:e.data.message}))):this.snack({message:e.data.message,color:"red"})}catch(a){console.error("Registration error:",a),this.snack({message:(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||a.message||"Có lỗi xảy ra khi đăng ký. Vui lòng thử lại.",color:"red"})}finally{this.loading=!1}}},async registrationReferralCode(e){await this.call_api("post","affiliate/registration-refferal-code",{referralCode:e})}},async mounted(){const e=new URLSearchParams(window.location.search).get("referral_code");if(null!=e&&this.registrationReferralCode(e),this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_customer_register)try{await u(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(t){console.error(t)}},beforeUnmount(){h()}},C={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},U={class:"px-lg-7"},q={class:"text-uppercase lh-1 mb-5"},I={class:"opacity-50 fs-22 fw-400"},L={class:"d-block display-1 fs-34 fw-900"},T={class:"mb-4"},R={class:"mb-1 fs-13 fw-500"},D={key:0,class:"mb-4"},A={class:"mb-1 fs-13 fw-500"},W={key:1,class:"mb-4"},j={class:"fs-13 fw-500"},F={class:"mb-4"},z={class:"mb-1 fs-13 fw-500"},Q={class:"mb-4"},B={class:"mb-1 fs-13 fw-500"},H={class:"mb-4"},N={key:0},E={class:"d-flex align-center mb-3"},G={class:"me-2 fs-13 fw-500 opacity-60 w-210px"};const J=e(P,[["render",function(e,t,a,s,i,o){const r=g("banner"),l=g("v-col"),n=g("v-text-field"),d=g("router-link"),c=g("v-btn"),m=g("v-form"),u=g("v-divider"),h=g("SocialLogin"),V=g("v-row"),P=g("v-container");return p(),f("div",null,[_(P,null,{default:w(()=>[_(V,null,{default:w(()=>[_(l,{xl:"10",class:"mx-auto"},{default:w(()=>[v("div",C,[_(V,{"no-gutters":"",align:"start"},{default:w(()=>[_(l,{cols:"12",lg:"6",order:"2","order-lg":"1",class:"lh-0"},{default:w(()=>[_(r,{loading:!1,banner:e.$store.getters["app/banners"].registration_page,class:"mt-5 mt-lg-0"},null,8,["banner"])]),_:1}),_(l,{cols:"12",order:"1","order-lg":"2",lg:"6"},{default:w(()=>[v("div",U,[v("h1",q,[v("span",I,$(e.$t("welcome_to")),1),v("span",L,$(e.$store.getters["app/appName"]),1)]),_(m,{ref:"loginForm","lazy-validation":"",onSubmit:t[6]||(t[6]=y(e=>o.register(),["prevent"]))},{default:w(()=>[v("div",T,[v("div",R,$(e.$t("full_name")),1),_(n,{variant:"plain",class:"text-field",placeholder:e.$t("full_name"),type:"text",modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(p(!0),f(b,null,S(e.v$.form.name.$errors,e=>(p(),f("p",{key:e.$uid,class:"text-red"},$(e.$message),1))),128))]),"phone"==e.authSettings.customer_login_with||"email_phone"==e.authSettings.customer_login_with?(p(),f("div",D,[v("div",A,$(e.$t("phone_number")),1),_(n,{variant:"plain",class:"text-field",placeholder:e.$t("phone_number"),type:"tel",modelValue:e.form.phone,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.phone=t),onInput:t[2]||(t[2]=t=>e.form.phone=e.form.phone.replace(/\D/g,"")),"hide-details":"auto",required:"",outlined:"",maxlength:"10"},null,8,["placeholder","modelValue"]),(p(!0),f(b,null,S(e.v$.form.phone.$errors,e=>(p(),f("p",{key:e.$uid,class:"text-red"},$(e.$message),1))),128))])):x("",!0),"email"==e.authSettings.customer_login_with||"email_phone"==e.authSettings.customer_login_with?(p(),f("div",W,[v("div",j,$(e.$t("email_address")),1),_(n,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.email=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(p(!0),f(b,null,S(e.v$.form.email.$errors,e=>(p(),f("p",{key:e.$uid,class:"text-red"},$(e.$message),1))),128))])):x("",!0),v("div",F,[v("div",z,$(e.$t("password")),1),_(n,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.password=t),type:"password",class:"text-field input-group--focused","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(p(!0),f(b,null,S(e.v$.form.password.$errors,e=>(p(),f("p",{key:e.$uid,class:"text-red"},$(e.$message),1))),128))]),v("div",Q,[v("div",B,$(e.$t("confirm_password")),1),_(n,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form.confirmPassword=t),type:"password",class:"text-field input-group--focused","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(p(!0),f(b,null,S(e.v$.form.confirmPassword.$errors,e=>(p(),f("p",{key:e.$uid,class:"text-red"},$(e.$message),1))),128))]),v("div",H,[k($(e.$t("by_signing_up_you_agree_to_our"))+" ",1),_(d,{to:{name:"CustomPage",params:{pageSlug:"terms-and-conditions"}},class:"primary--text text-decoration-underline"},{default:w(()=>[k($(e.$t("terms_and_conditions")),1)]),_:1})]),_(c,{style:{color:"#fff !important"},size:"x-large",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",onClick:o.register,loading:e.loading,disabled:e.loading},{default:w(()=>[k($(e.$t("create_account")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1},512),1==e.generalSettings.social_login.facebook||1==e.generalSettings.social_login.twitter||1==e.generalSettings.social_login.google?(p(),f("div",N,[v("div",E,[v("span",G,$(e.$t("or"))+", "+$(e.$t("join_with")),1),_(u)]),_(h,{class:"mb-5"})])):x("",!0),v("div",null,[k($(e.$t("already_have_an_account"))+", ",1),_(d,{to:{name:"Login"},class:"primary--texttext-decoration-underline"},{default:w(()=>[k($(e.$t("login")),1)]),_:1})])])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])}]]);export{J as default};
