import{_ as M,M as U,C as F,z as q,A as B,m as w,f as E,g as A,h as _,o as a,B as C,w as n,j as d,k as t,t as i,i as r,F as f,p as y,v as g,q as p,D as V}from"./app-97cff8f8.js";const D={name:"Cart",mixins:[U],components:{CartItems:F,CouponForm:q,MinOrderProgress:B},computed:{...w("app",["generalSettings"]),...w("cart",["getCartCount","getCartPrice","getCartProducts","getCartShops","getShopMinOrder","getShopCartPrice","getShopProductsById","getTotalCouponDiscount","getSelectedCartIds"]),...w("auth",["isAuthenticated"]),isMultiVendor(){return this.is_addon_activated("multi_vendor")},hasCartItems(){return this.isMultiVendor?this.getCartShops.length>0:this.getCartProducts.length>0},allSelected(){if(this.isMultiVendor)return this.getCartShops.length>0&&this.getCartShops.every(e=>e.selected);{const e=this.getCartProducts.filter(h=>h.selected&&!h.outOfStock),l=this.getCartProducts.filter(h=>!h.outOfStock);return l.length>0&&e.length===l.length}},getSelectedCount(){return this.isMultiVendor?this.getCartShops.reduce((e,l)=>l.selected?e+this.getShopProductsById(l.id).filter(h=>h.selected).length:e,0):this.getCartProducts.filter(e=>e.selected).length}},methods:{...E("cart",["fetchCartProducts","updateQuantity","toggleCartItem","toggleCartShop","removeFromCart"]),...A("auth",["showLoginDialog"]),toggleAllItems(e){this.isMultiVendor?this.getCartShops.forEach(l=>{this.toggleCartShop({shop_id:l.id,status:e})}):this.getCartProducts.forEach(l=>{l.outOfStock||this.toggleCartItem({cart_id:l.cart_id,status:e})})},removeSelected(){const e=this.getSelectedCartIds;if(e.length===0){this.snack({message:this.$t("please_select_items_to_delete"),color:"red"});return}e.forEach(l=>{this.removeFromCart(l)}),this.snack({message:this.$t("selected_items_removed")})},saveToWishlist(){this.snack({message:this.$t("feature_coming_soon")||"Tính năng đang phát triển"})},goToCheckout(){if(this.getCartPrice<=0){this.snack({message:this.$t("please_select_a_cart_product"),color:"red"});return}this.isAuthenticated||!this.generalSettings.guest_checkout_activation?this.$router.push({name:"Checkout"}):this.$router.push({name:"GuestCheckout"})}},created(){this.fetchCartProducts()}},j={class:"fs-24 fw-700 mb-4"},Q={key:0,class:"bg-white border rounded mb-4"},G={class:"d-flex align-center pa-3 border-bottom bg-grey-lighten-4"},H={class:"flex-grow-1 minw-0 me-3 fw-600"},L={class:"text-end me-6 fw-600",style:{"min-width":"120px"}},N={class:"d-flex align-center justify-center me-6 fw-600",style:{"min-width":"120px"}},W={class:"text-end me-6 fw-600",style:{"min-width":"120px"}},R={class:"fw-600",style:{"min-width":"60px"}},X={class:"d-flex align-center pa-3 bg-grey-lighten-5"},J=["src","alt"],K={class:"fw-600"},Y={key:0,class:"px-3 py-2"},Z={class:"flex-shrink-0 ms-3 me-3"},I=["src","alt"],ee={class:"flex-grow-1 minw-0 me-3"},te={class:"fw-500 mb-1"},se={key:0,class:"fs-12 opacity-70 mb-2"},oe={class:"opacity-70"},ie={class:"fw-500"},le={class:"text-end me-6",style:{"min-width":"120px"}},ae={key:0,class:"d-block fs-12 opacity-50 mb-1"},de={class:"fw-600 text-primary"},ne={class:"d-flex align-center justify-center me-6",style:{"min-width":"120px"}},re={class:"mx-3 fw-600"},ce={class:"text-end me-6",style:{"min-width":"120px"}},ue={class:"fw-700 text-primary fs-16"},pe={class:"px-3 py-2 border-top bg-grey-lighten-5"},me={class:"flex-shrink-0 ms-3 me-3"},_e=["src","alt"],he={class:"flex-grow-1 minw-0 me-3"},ge={class:"fw-500 mb-1"},fe={key:0,class:"fs-12 opacity-70 mb-2"},ve={class:"opacity-70"},ye={class:"fw-500"},Ce={class:"text-end me-6",style:{"min-width":"120px"}},ke={key:0,class:"d-block fs-12 opacity-50 mb-1"},be={class:"fw-600 text-primary"},we={class:"d-flex align-center justify-center me-6",style:{"min-width":"120px"}},Se={class:"mx-3 fw-600"},$e={class:"text-end me-6",style:{"min-width":"120px"}},xe={class:"fw-700 text-primary fs-16"},Ve={class:"px-3 py-3 border-top bg-grey-lighten-5"},Pe={key:1,class:"text-center py-12"},Oe=["src"],Te={class:"fs-20 fw-500 mb-4"},ze={key:2,class:"cart-footer-fixed bg-white border-top pa-4"},Me={class:"d-flex align-center flex-wrap gap-2"},Ue={class:"fw-600"},Fe={class:"text-end"},qe={class:"mb-2"},Be={class:"opacity-70 me-2"},Ee={class:"fs-24 fw-700 text-primary mb-2"},Ae={key:0,class:"fs-14 text-success mb-3"};function De(e,l,h,je,Qe,c){const v=_("v-checkbox"),k=_("v-chip"),P=_("min-order-progress"),u=_("v-btn"),S=_("coupon-form"),b=_("v-col"),$=_("v-row"),O=_("v-container");return a(),C(O,{class:"py-6"},{default:n(()=>[d($,null,{default:n(()=>[d(b,{cols:"12"},{default:n(()=>[t("h1",j,i(e.$t("cart")||"Giỏ Hàng"),1),c.hasCartItems?(a(),r("div",Q,[t("div",G,[d(v,{"model-value":c.allSelected,"onUpdate:modelValue":c.toggleAllItems,"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},null,8,["model-value","onUpdate:modelValue"]),l[3]||(l[3]=t("div",{class:"flex-shrink-0 ms-3 me-3",style:{width:"80px"}},null,-1)),t("div",H,i(e.$t("product")||"Sản Phẩm"),1),t("div",L,i(e.$t("unit_price")||"Đơn Giá"),1),t("div",N,i(e.$t("quantity")||"Số Lượng"),1),t("div",W,i(e.$t("amount")||"Số Tiền"),1),t("div",R,i(e.$t("actions")||"Thao Tác"),1)]),c.isMultiVendor?(a(!0),r(f,{key:0},y(e.getCartShops,(s,T)=>(a(),r("div",{key:s.id,class:"border-bottom"},[t("div",X,[d(v,{"model-value":s.selected,"onUpdate:modelValue":o=>e.toggleCartShop({shop_id:s.id,status:o}),"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},null,8,["model-value","onUpdate:modelValue"]),t("img",{src:s.logo,alt:s.name,class:"size-32px ms-3 me-2 rounded"},null,8,J),t("span",K,i(s.name),1),s.couponCode?(a(),C(k,{key:0,color:"red",size:"x-small",class:"ms-2 white-text"},{default:n(()=>[...l[4]||(l[4]=[g(" VOUCHER ",-1)])]),_:1})):p("",!0)]),e.getShopMinOrder(s.id)>0?(a(),r("div",Y,[d(P,{"shop-id":s.id,"cart-price":e.getShopCartPrice(s.id),"min-order":e.getShopMinOrder(s.id)},null,8,["shop-id","cart-price","min-order"])])):p("",!0),(a(!0),r(f,null,y(e.getShopProductsById(s.id),(o,x)=>(a(),r("div",{key:o.cart_id,class:V(["d-flex align-center pa-3 border-top",{"opacity-50":o.outOfStock}])},[d(v,{"model-value":o.selected,disabled:o.outOfStock,"onUpdate:modelValue":m=>e.toggleCartItem({cart_id:o.cart_id,status:m}),"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},null,8,["model-value","disabled","onUpdate:modelValue"]),t("div",Z,[t("img",{src:o.thumbnail,alt:o.name,class:"img-fluid size-80px rounded",onError:l[0]||(l[0]=m=>e.imageFallback(m))},null,40,I)]),t("div",ee,[t("div",te,i(o.name),1),o.combinations.length>0?(a(),r("div",se,[(a(!0),r(f,null,y(o.combinations,(m,z)=>(a(),r("span",{key:z,class:"me-2"},[t("span",oe,i(m.attribute)+":",1),t("span",ie,i(m.value),1)]))),128))])):p("",!0),o.outOfStock?(a(),C(k,{key:1,color:"red",size:"x-small",class:"white-text"},{default:n(()=>[g(i(e.$t("out_of_stock")),1)]),_:1})):p("",!0)]),t("div",le,[o.regular_price>o.dicounted_price?(a(),r("del",ae,i(e.format_price(o.regular_price)),1)):p("",!0),t("div",de,i(e.format_price(o.dicounted_price)),1)]),t("div",ne,[d(u,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:o.qty<=1||o.outOfStock,onClick:m=>e.updateQuantity({type:"minus",cart_id:o.cart_id})},{default:n(()=>[...l[5]||(l[5]=[t("i",{class:"las la-minus"},null,-1)])]),_:2},1032,["disabled","onClick"]),t("span",re,i(o.qty),1),d(u,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:o.outOfStock,onClick:m=>e.updateQuantity({type:"plus",cart_id:o.cart_id})},{default:n(()=>[...l[6]||(l[6]=[t("i",{class:"las la-plus"},null,-1)])]),_:2},1032,["disabled","onClick"])]),t("div",ce,[t("div",ue,i(e.format_price(o.dicounted_price*o.qty)),1)]),t("div",null,[d(u,{icon:"",variant:"text",size:"small",onClick:m=>e.removeFromCart(o.cart_id)},{default:n(()=>[...l[7]||(l[7]=[t("i",{class:"las la-trash fs-18 opacity-70"},null,-1)])]),_:2},1032,["onClick"])])],2))),128)),t("div",pe,[d(S,{"shop-id":s.id},null,8,["shop-id"])])]))),128)):(a(),r(f,{key:1},[(a(!0),r(f,null,y(e.getCartProducts,(s,T)=>(a(),r("div",{key:s.cart_id,class:V(["d-flex align-center pa-3 border-top",{"opacity-50":s.outOfStock}])},[d(v,{"model-value":s.selected,disabled:s.outOfStock,"onUpdate:modelValue":o=>e.toggleCartItem({cart_id:s.cart_id,status:o}),"hide-details":"",class:"mt-0",color:"primary"},null,8,["model-value","disabled","onUpdate:modelValue"]),t("div",me,[t("img",{src:s.thumbnail,alt:s.name,class:"img-fluid size-80px rounded",onError:l[1]||(l[1]=o=>e.imageFallback(o))},null,40,_e)]),t("div",he,[t("div",ge,i(s.name),1),s.combinations.length>0?(a(),r("div",fe,[(a(!0),r(f,null,y(s.combinations,(o,x)=>(a(),r("span",{key:x,class:"me-2"},[t("span",ve,i(o.attribute)+":",1),t("span",ye,i(o.value),1)]))),128))])):p("",!0),s.outOfStock?(a(),C(k,{key:1,color:"red",size:"x-small",class:"white-text"},{default:n(()=>[g(i(e.$t("out_of_stock")),1)]),_:1})):p("",!0)]),t("div",Ce,[s.regular_price>s.dicounted_price?(a(),r("del",ke,i(e.format_price(s.regular_price)),1)):p("",!0),t("div",be,i(e.format_price(s.dicounted_price)),1)]),t("div",we,[d(u,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:s.qty<=1||s.outOfStock,onClick:o=>e.updateQuantity({type:"minus",cart_id:s.cart_id})},{default:n(()=>[...l[8]||(l[8]=[t("i",{class:"las la-minus"},null,-1)])]),_:2},1032,["disabled","onClick"]),t("span",Se,i(s.qty),1),d(u,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:s.outOfStock,onClick:o=>e.updateQuantity({type:"plus",cart_id:s.cart_id})},{default:n(()=>[...l[9]||(l[9]=[t("i",{class:"las la-plus"},null,-1)])]),_:2},1032,["disabled","onClick"])]),t("div",$e,[t("div",xe,i(e.format_price(s.dicounted_price*s.qty)),1)]),t("div",null,[d(u,{icon:"",variant:"text",size:"small",onClick:o=>e.removeFromCart(s.cart_id)},{default:n(()=>[...l[10]||(l[10]=[t("i",{class:"las la-trash fs-18 opacity-70"},null,-1)])]),_:2},1032,["onClick"])])],2))),128)),t("div",Ve,[d(S)])],64))])):(a(),r("div",Pe,[t("img",{class:"img-fluid mb-4",src:e.static_asset("/assets/img/no-cart-item.jpg"),alt:"Empty cart"},null,8,Oe),t("div",Te,i(e.$t("your_shopping_bag_is_empty_start_shopping")),1),d(u,{color:"primary",large:"",onClick:l[2]||(l[2]=s=>e.$router.push({name:"Home"}))},{default:n(()=>[g(i(e.$t("continue_shopping")||"Tiếp Tục Mua Sắm"),1)]),_:1})])),c.hasCartItems?(a(),r("div",ze,[d($,null,{default:n(()=>[d(b,{cols:"12",md:"8"},{default:n(()=>[t("div",Me,[d(v,{"model-value":c.allSelected,"onUpdate:modelValue":c.toggleAllItems,"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},{label:n(()=>[t("span",Ue,i(e.$t("select_all")||"Chọn Tất Cả")+" ("+i(e.getCartCount)+") ",1)]),_:1},8,["model-value","onUpdate:modelValue"]),d(u,{variant:"text",size:"small",onClick:c.removeSelected},{default:n(()=>[g(i(e.$t("delete")||"Xóa"),1)]),_:1},8,["onClick"]),d(u,{variant:"text",size:"small",onClick:c.saveToWishlist},{default:n(()=>[g(i(e.$t("save_to_wishlist")||"Lưu vào mục Đã thích"),1)]),_:1},8,["onClick"])])]),_:1}),d(b,{cols:"12",md:"4"},{default:n(()=>[t("div",Fe,[t("div",qe,[t("span",Be,i(e.$t("total")||"Tổng cộng")+" ("+i(c.getSelectedCount)+" "+i(e.$t("product")||"sản phẩm")+"): ",1)]),t("div",Ee,i(e.format_price(e.getCartPrice-e.getTotalCouponDiscount)),1),e.getTotalCouponDiscount>0?(a(),r("div",Ae,i(e.$t("saved")||"Tiết kiệm")+" "+i(e.format_price(e.getTotalCouponDiscount)),1)):p("",!0),d(u,{color:"primary",size:"large",block:"",elevation:"0",onClick:c.goToCheckout,disabled:e.getCartPrice<=0},{default:n(()=>[g(i(e.$t("buy_now")||"Mua Hàng"),1)]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1})])):p("",!0)]),_:1})]),_:1})]),_:1})}const He=M(D,[["render",De],["__scopeId","data-v-ee7e9e41"]]);export{He as default};
