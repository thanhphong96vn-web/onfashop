import{_ as T,u as D,a as F,x as A,S as N,b as v,r as V,e as B,y as w,m as $,f,g as C,l as W,d as j,h as d,o as i,i as n,j as o,w as m,k as r,t as a,n as z,F as h,p,q as y,v as g}from"./app-41f27463.js";const{verifyRecaptcha:M}=D(),Q={data:()=>({v$:F(),form:{name:"",phone:"",email:"",password:"",confirmPassword:""},passwordShow:!1,loading:!1}),components:{snackbar:A,SocialLogin:N},validations:{form:{name:{required:v},email:{requiredIf:V(function(){return this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"}),email:B},phone:{requiredIf:V(function(){return this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"}),minLength:w(10),phoneFormat:e=>e?/^\d{10}$/.test(e):!0},password:{required:v,minLength:w(6)},confirmPassword:{required:v,minLength:w(6)}}},computed:{...$("app",["generalSettings"]),...$("auth",["authSettings"]),...$("cart",["getTempUserId"])},methods:{...f("auth",["login"]),...C("cart",["removeTempUserId"]),...C("auth",["updateChatWindow","showLoginDialog"]),...f("app",["fetchProductQuerries","generalSettings"]),...f("wishlist",["fetchWislistProducts"]),...f("cart",["fetchCartProducts"]),async register(){var s,u;if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_customer_register){const l=await M("track_order");if(!l.success){this.snack({message:l.message,color:"red"});return}}if(this.v$.$touch(),!!await this.v$.$validate()){this.form.phone=this.form.phone.replace(/\D/g,""),this.getTempUserId&&(this.form.temp_user_id=this.getTempUserId),this.loading=!0;try{const l=await this.call_api("post","auth/signup",this.form);l.data.success?(this.getTempUserId&&this.removeTempUserId(),this.authSettings.customer_otp_with=="disabled"?(this.login(l.data),this.showLoginDialog(!1),this.updateChatWindow(!1),this.fetchWislistProducts(),this.fetchProductQuerries(),this.fetchCartProducts(),this.$router.push(this.$route.query.redirect||{name:"DashBoard"})):(this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="email"?this.$router.push({name:"VerifyAccount",params:{email:this.form.email}}):this.$router.push({name:"VerifyAccount",params:{phone:this.form.phone}}),this.snack({message:l.data.message}))):this.snack({message:l.data.message,color:"red"})}catch(l){console.error("Registration error:",l),this.snack({message:((u=(s=l.response)==null?void 0:s.data)==null?void 0:u.message)||l.message||"Có lỗi xảy ra khi đăng ký. Vui lòng thử lại.",color:"red"})}finally{this.loading=!1}}},async registrationReferralCode(e){await this.call_api("post","affiliate/registration-refferal-code",{referralCode:e})}},async mounted(){const s=new URLSearchParams(window.location.search).get("referral_code");if(s!=null&&this.registrationReferralCode(s),this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_customer_register)try{await W(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(u){console.error(u)}},beforeUnmount(){j()}},E={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},G={class:"px-lg-7"},H={class:"text-uppercase lh-1 mb-5"},J={class:"opacity-50 fs-22 fw-400"},K={class:"d-block display-1 fs-34 fw-900"},O={class:"mb-4"},X={class:"mb-1 fs-13 fw-500"},Y={key:0,class:"mb-4"},Z={class:"mb-1 fs-13 fw-500"},x={key:1,class:"mb-4"},ee={class:"fs-13 fw-500"},te={class:"mb-4"},se={class:"mb-1 fs-13 fw-500"},ae={class:"mb-4"},oe={class:"mb-1 fs-13 fw-500"},re={class:"mb-4"},ie={key:0},ne={class:"d-flex align-center mb-3"},le={class:"me-2 fs-13 fw-500 opacity-60 w-110px"};function de(e,s,u,l,me,b){const P=d("banner"),_=d("v-col"),c=d("v-text-field"),S=d("router-link"),U=d("v-btn"),L=d("v-form"),q=d("v-divider"),I=d("SocialLogin"),k=d("v-row"),R=d("v-container");return i(),n("div",null,[o(R,null,{default:m(()=>[o(k,null,{default:m(()=>[o(_,{xl:"10",class:"mx-auto"},{default:m(()=>[r("div",E,[o(k,{"no-gutters":"",align:"start"},{default:m(()=>[o(_,{cols:"12",lg:"6",order:"2","order-lg":"1",class:"lh-0"},{default:m(()=>[o(P,{loading:!1,banner:e.$store.getters["app/banners"].registration_page,class:"mt-5 mt-lg-0"},null,8,["banner"])]),_:1}),o(_,{cols:"12",order:"1","order-lg":"2",lg:"6"},{default:m(()=>[r("div",G,[r("h1",H,[r("span",J,a(e.$t("welcome_to")),1),r("span",K,a(e.$store.getters["app/appName"]),1)]),o(L,{ref:"loginForm","lazy-validation":"",onSubmit:s[6]||(s[6]=z(t=>b.register(),["prevent"]))},{default:m(()=>[r("div",O,[r("div",X,a(e.$t("full_name")),1),o(c,{variant:"plain",class:"text-field",placeholder:e.$t("full_name"),type:"text",modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.name=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(i(!0),n(h,null,p(e.v$.form.name.$errors,t=>(i(),n("p",{key:t.$uid,class:"text-red"},a(t.$message),1))),128))]),e.authSettings.customer_login_with=="phone"||e.authSettings.customer_login_with=="email_phone"?(i(),n("div",Y,[r("div",Z,a(e.$t("phone_number")),1),o(c,{variant:"plain",class:"text-field",placeholder:e.$t("phone_number"),type:"tel",modelValue:e.form.phone,"onUpdate:modelValue":s[1]||(s[1]=t=>e.form.phone=t),onInput:s[2]||(s[2]=t=>e.form.phone=e.form.phone.replace(/\D/g,"")),"hide-details":"auto",required:"",outlined:"",maxlength:"10"},null,8,["placeholder","modelValue"]),(i(!0),n(h,null,p(e.v$.form.phone.$errors,t=>(i(),n("p",{key:t.$uid,class:"text-red"},a(t.$message),1))),128))])):y("",!0),e.authSettings.customer_login_with=="email"||e.authSettings.customer_login_with=="email_phone"?(i(),n("div",x,[r("div",ee,a(e.$t("email_address")),1),o(c,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":s[3]||(s[3]=t=>e.form.email=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(i(!0),n(h,null,p(e.v$.form.email.$errors,t=>(i(),n("p",{key:t.$uid,class:"text-red"},a(t.$message),1))),128))])):y("",!0),r("div",te,[r("div",se,a(e.$t("password")),1),o(c,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.password,"onUpdate:modelValue":s[4]||(s[4]=t=>e.form.password=t),type:"password",class:"text-field input-group--focused","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(i(!0),n(h,null,p(e.v$.form.password.$errors,t=>(i(),n("p",{key:t.$uid,class:"text-red"},a(t.$message),1))),128))]),r("div",ae,[r("div",oe,a(e.$t("confirm_password")),1),o(c,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.confirmPassword,"onUpdate:modelValue":s[5]||(s[5]=t=>e.form.confirmPassword=t),type:"password",class:"text-field input-group--focused","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(i(!0),n(h,null,p(e.v$.form.confirmPassword.$errors,t=>(i(),n("p",{key:t.$uid,class:"text-red"},a(t.$message),1))),128))]),r("div",re,[g(a(e.$t("by_signing_up_you_agree_to_our"))+" ",1),o(S,{to:{name:"CustomPage",params:{pageSlug:"terms-and-conditions"}},class:"primary--text text-decoration-underline"},{default:m(()=>[g(a(e.$t("terms_and_conditions")),1)]),_:1})]),o(U,{style:{color:"#fff !important"},size:"x-large",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",onClick:b.register,loading:e.loading,disabled:e.loading},{default:m(()=>[g(a(e.$t("create_account")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1},512),e.generalSettings.social_login.facebook==1||e.generalSettings.social_login.twitter==1||e.generalSettings.social_login.google==1?(i(),n("div",ie,[r("div",ne,[r("span",le,a(e.$t("or"))+", "+a(e.$t("join_with")),1),o(q)]),o(I,{class:"mb-5"})])):y("",!0),r("div",null,[g(a(e.$t("already_have_an_account"))+", ",1),o(S,{to:{name:"Login"},class:"primary--texttext-decoration-underline"},{default:m(()=>[g(a(e.$t("login")),1)]),_:1})])])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])}const ce=T(Q,[["render",de]]);export{ce as default};
