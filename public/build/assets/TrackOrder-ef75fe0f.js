import{_ as k,u as C,a as b,b as S,m as c,l as $,d as w,h as o,o as n,i as m,j as t,w as a,k as u,t as s,n as V,q as h,v as R,z as q}from"./app-65cf1f07.js";import{S as O}from"./Summary-23174ae7.js";import"./Payment-f6c05c80.js";const{verifyRecaptcha:B}=C(),N={head:{title:"Order Tracking Page"},data:()=>({loading:!1,error:"",v$:b(),form:{orderCode:""},order:{},recaptchaReady:!1}),components:{Summary:O},validations:{form:{orderCode:{required:S}}},computed:{...c("app",["generalSettings","appUrl","paymentMethods","offlinePaymentMethods"]),...c("auth",["isAuthenticated"]),orderCodeErrors(){const e=[];return this.v$.form.orderCode.$dirty&&!this.v$.form.orderCode.required&&e.push(this.$i18n.t("this_field_is_required")),e}},async mounted(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_track_order)try{await $(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(e){console.error(e)}},beforeUnmount(){w()},methods:{async trackOrder(){if(this.error=null,this.form.orderCode.trim().length<=0){this.error="Value is required";return}this.loading=!0;try{if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_track_order){const r=await B("track_order");if(!r.success){this.error=r.message;return}}const e=await this.call_api("get",`user/order/${this.form.orderCode}`);console.log("Order response:",e),e.data.success?this.order=e.data.data:(this.error=e.data.message,this.order={})}catch(e){console.error(e),this.error="Something went wrong!"}this.loading=!1}}},T={class:"pb-6"},A={class:"mb-7 mt-4"},E={class:"mb-1 fs-13 fw-500"},M={key:0,class:"text-red"};function P(e,r,U,j,z,d){const p=o("v-text-field"),_=o("v-btn"),f=o("v-form"),i=o("v-col"),g=o("Summary"),v=o("v-row"),y=o("v-container");return n(),m("div",T,[t(y,null,{default:a(()=>[t(v,null,{default:a(()=>[t(i,{cols:"12",lg:"6",class:"mx-auto"},{default:a(()=>[u("h1",A,s(e.$t("track_your_order")),1),t(f,{"lazy-validation":"",onSubmit:r[1]||(r[1]=V(l=>d.trackOrder(),["prevent"]))},{default:a(()=>[u("div",E,s(e.$t("order_code")),1),t(p,{placeholder:e.$t("order_code"),type:"text",class:"mb-3 text-field",modelValue:e.form.orderCode,"onUpdate:modelValue":r[0]||(r[0]=l=>e.form.orderCode=l),"error-messages":d.orderCodeErrors,"hide-details":"auto",required:"",variant:"plain"},null,8,["placeholder","modelValue","error-messages"]),e.error?(n(),m("p",M,s(e.error),1)):h("",!0),t(_,{class:"px-16 mb-4",elevation:"0",color:"primary",onClick:d.trackOrder,loading:e.loading,disabled:e.loading},{default:a(()=>[R(s(e.$t("track")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1}),e.is_empty_obj(e.order)?h("",!0):(n(),q(i,{key:0,cols:"12",xl:"8",lg:"10",class:"mx-auto"},{default:a(()=>[t(g,{"order-details":e.order},null,8,["order-details"])]),_:1}))]),_:1})]),_:1})])}const H=k(N,[["render",P]]);export{H as default};
