import{a as e,b as t,a2 as a,m as i,f as s,_ as l,h as o,o as d,z as n,w as r,k as u,j as c,t as m,i as h,p as f,F as p,v as g,n as w}from"./app-0e743bd7.js";const q={props:{from:{type:String,default:"/user/wallet"},show:{type:Boolean,required:!0,default:!1}},data:()=>({v$:e(),loading:!1,requestedAmount:0}),validations:{requestedAmount:{required:t,minValue:a(1)}},computed:{...i("affiliate",["getAffiliateBalance"]),isVisible:{get:function(){return this.show},set:function(e){}}},methods:{...s("affiliate",["fetchWithdrawRequest"]),closeDialog(){this.isVisible=!1,this.receipt=null,this.$emit("close")},async withdrawalRequest(){if(!(await this.v$.$validate()))return;if(this.getAffiliateBalance<this.requestedAmount)return void this.snack({message:this.$i18n.t("you can't request for withdraw more than your affiliate balance"),color:"red"});this.loading=!1;const e={amount:this.requestedAmount},t=await this.call_api("post","user/affiliate/withdraw-request",e);t.data.success?(this.fetchWithdrawRequest(),this.requestedAmount=0,this.snack({message:this.$i18n.t(t.data.message),color:"green"}),this.loading=!1,this.closeDialog()):this.snack({message:t.data.message,color:"red"})}}},v={class:"white pa-5 rounded"},$={class:"opacity-80 mb-3 fs-18 mt-3"},b={class:"text-right mt-4"};const k=l(q,[["render",function(e,t,a,i,s,l){const q=o("v-text-field"),k=o("v-btn"),y=o("v-form"),V=o("v-dialog");return d(),n(V,{modelValue:l.isVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>l.isVisible=e),"max-width":"700px","onClick:outside":l.closeDialog},{default:r(()=>[u("div",v,[c(y,{"lazy-validation":"",onSubmit:t[1]||(t[1]=w(()=>{},["prevent"]))},{default:r(()=>[u("h3",$,m(e.$t("affiliate_withdraw_request")),1),c(q,{variant:"plain",class:"text-field",placeholder:e.$t("withdrawal_amount"),type:"Number",modelValue:e.requestedAmount,"onUpdate:modelValue":t[0]||(t[0]=t=>e.requestedAmount=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(d(!0),h(p,null,f(e.v$.requestedAmount.$errors,e=>(d(),h("p",{key:e.$uid,class:"text-red"},m(e.$message),1))),128)),u("div",b,[c(k,{text:"",onClick:l.closeDialog,elevation:"0",class:"mr-4"},{default:r(()=>[g(m(e.$t("cancel")),1)]),_:1},8,["onClick"]),c(k,{elevation:"0",type:"submit",color:"primary",onClick:l.withdrawalRequest,loading:e.loading,disabled:e.loading},{default:r(()=>[g(m(e.$t("confirm")),1)]),_:1},8,["onClick","loading","disabled"])])]),_:1})])]),_:1},8,["modelValue","onClick:outside"])}]]);export{k as W};
