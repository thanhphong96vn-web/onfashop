import{_ as e,u as a,a as s,c as t,b as l,e as o,m as i,l as r,f as d,g as n,d as m,h as u,o as c,z as p,w as f,j as h,k as v,t as g,n as _,i as $,p as w,F as y,q as b,s as x,v as V}from"./app-5a177a8d.js";const{verifyRecaptcha:k}=a(),q={data:()=>({v$:s(),loading:!1,mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},form:{name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",description:"",invalidPhone:!0,showInvalidPhone:!1}}),components:{VueTelInput:t},validations:{form:{name:{required:l},email:{required:l,email:o},phone:{required:l},address:{required:l},description:{required:l}}},computed:{...i("auth",["isAuthenticated"]),...i("app",["generalSettings","availableCountries"])},async mounted(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_affiliate_register)try{await r(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(e){console.error(e)}},methods:{...d("auth",["login"]),...n("cart",["removeTempUserId"]),...n("auth",["updateChatWindow","showLoginDialog"]),phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async submitRequest(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_affiliate_register){const e=await k("affiliate-registration");if(!e.success)return void this.snack({message:e.message,color:"red"})}if(!(await this.v$.$validate()))return;if(this.form.invalidPhone)return void(this.form.showInvalidPhone=!0);this.form.phone=this.form.phone.replace(/\s/g,""),this.loading=!0;const e=await this.call_api("post","user/affiliate/store",this.form);400==e.data.status&&this.snack({message:e.data.message,color:"yellow"}),e.data.success?(this.snack({color:"green",message:e.data.message}),this.$router.push({name:"AffiliateRegConfirmation"})):this.snack({message:e.data.message,color:"red"}),this.loading=!1},resetForm(){this.form.name="",this.form.phone="",this.form.email="",this.form.invalidPhone=!0,this.form.showInvalidPhone=!1,this.form.address="",this.form.description=""}},beforeUnmount(){m()}},P={class:"text-h3 fw-700 mb-8"},C={class:"text-h6 fw-600 opacity-80"},I={class:"mb-4"},U={class:"mb-1 fs-13 fw-500"},S={class:"mb-4"},R={class:"fs-13 fw-500"},A={key:0},D={class:"mb-4"},F={class:"mb-1 fs-13 fw-500"},O={class:"mb-4"},T={class:"mb-1 fs-13 fw-500"},j={class:"mb-4"},z={class:"mb-1 fs-13 fw-500"},L={key:0,class:"v-text-field__details mt-2 pl-3"},H={class:"v-messages theme--light error--text",role:"alert"},W={class:"v-messages__wrapper text-red"},B={class:"v-messages__message"},E={key:1,class:"v-text-field__details mt-2 pl-3"},G={class:"v-messages theme--light error--text",role:"alert"},J={class:"v-messages__wrapper text-red"},K={class:"v-messages__message"},M={class:"mb-4"},N={class:"mb-1 fs-13 fw-500"},Q={class:"mb-4"},X={class:"mb-1 fs-13 fw-500"};const Y=e(q,[["render",function(e,a,s,t,l,o){const i=u("v-card-title"),r=u("v-text-field"),d=u("vue-tel-input"),n=u("v-card-text"),m=u("v-card"),k=u("v-btn"),q=u("v-form"),Y=u("v-col"),Z=u("v-row"),ee=u("v-container");return c(),p(ee,{class:"py-6"},{default:f(()=>[h(Z,null,{default:f(()=>[h(Y,{cols:"12",lg:"10",md:"12",sm:"12",class:"mx-auto"},{default:f(()=>[v("h1",P,g(e.$t("affiliate_informations")),1),h(q,{"lazy-validation":"",onSubmit:a[7]||(a[7]=_(e=>o.submitRequest(),["prevent"]))},{default:f(()=>[h(m,{class:"border",elevation:"0"},{default:f(()=>[h(i,null,{default:f(()=>[v("span",C,g(e.$t("verification_info")),1)]),_:1}),h(n,null,{default:f(()=>[v("div",I,[v("div",U,g(e.$t("your_name")),1),h(r,{variant:"plain",class:"text-field",placeholder:e.$t("full_name"),type:"text",modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.name=a),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(c(!0),$(y,null,w(e.v$.form.name.$errors,e=>(c(),$("p",{key:e.$uid,class:"text-red"},g(e.$message),1))),128))]),v("div",S,[v("div",R,g(e.$t("your_email")),1),h(r,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.email=a),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(c(!0),$(y,null,w(e.v$.form.email.$errors,e=>(c(),$("p",{key:e.$uid,class:"text-red"},g(e.$message),1))),128))]),e.isAuthenticated?b("",!0):(c(),$("div",A,[v("div",D,[v("div",F,g(e.$t("password")),1),h(r,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.password=a),type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(c(!0),$(y,null,w(e.v$.form.password.$errors,e=>(c(),$("p",{key:e.$uid,class:"text-red"},g(e.$message),1))),128))]),v("div",O,[v("div",T,g(e.$t("confirm_password")),1),h(r,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.confirmPassword=a),type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(c(!0),$(y,null,w(e.v$.form.confirmPassword.$errors,e=>(c(),$("p",{key:e.$uid,class:"text-red"},g(e.$message),1))),128))])])),v("div",j,[v("div",z,g(e.$t("phone_number")),1),h(d,x({modelValue:e.form.phone,"onUpdate:modelValue":a[4]||(a[4]=a=>e.form.phone=a)},e.mobileInputProps,{onlyCountries:e.availableCountries,onValidate:o.phoneValidate}),{default:f(()=>[...a[8]||(a[8]=[v("template",{slot:"arrow-icon"},[v("span",{class:"vti__dropdown-arrow"}," ▼")],-1)])]),_:1},16,["modelValue","onlyCountries","onValidate"]),e.v$.form.phone.$error?(c(),$("div",L,[v("div",H,[v("div",W,[v("div",B,g(e.$t("this_field_is_required")),1)])])])):b("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(c(),$("div",E,[v("div",G,[v("div",J,[v("div",K,g(e.$t("phone_number_must_be_valid")),1)])])])):b("",!0)]),v("div",M,[v("div",N,g(e.$t("full_address")),1),h(r,{variant:"plain",class:"text-field",placeholder:e.$t("full_address"),type:"text",modelValue:e.form.address,"onUpdate:modelValue":a[5]||(a[5]=a=>e.form.address=a),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(c(!0),$(y,null,w(e.v$.form.address.$errors,e=>(c(),$("p",{key:e.$uid,class:"text-red"},g(e.$message),1))),128))]),v("div",Q,[v("div",X,g(e.$t("how_will_you_affiliate?")),1),h(r,{variant:"plain",class:"text-field",placeholder:e.$t("description"),type:"text",modelValue:e.form.description,"onUpdate:modelValue":a[6]||(a[6]=a=>e.form.description=a),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(c(!0),$(y,null,w(e.v$.form.description.$errors,e=>(c(),$("p",{key:e.$uid,class:"text-red"},g(e.$message),1))),128))])]),_:1})]),_:1}),h(k,{"x-large":"",class:"px-12 mb-4 w-100 mt-5",elevation:"0",type:"submit",color:"primary",onClick:o.submitRequest,loading:e.loading,disabled:e.loading},{default:f(()=>[V(g(e.$t("save")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}]]);export{Y as default};
