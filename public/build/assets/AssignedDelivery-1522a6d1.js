import{_ as e,h as t,o as a,i as s,k as i,t as l,j as n,w as r,v as o}from"./app-5a177a8d.js";const d={class:"ps-lg-7 pt-4"},c={class:"fs-21 fw-700 opacity-80 mb-5"},u={class:"d-block fw-600"},g=["onClick"],p=["onClick"],m={class:"w-100 text-center mb-4"},v={class:"text-start"};const h=e({data:()=>({cancelOrderID:null,dialog:!1,currentPage:1,lastPage:1,assignedDeliveries:[]}),computed:{headers(){return[{title:this.$i18n.t("code"),align:"start",sortable:!1,value:"code"},{title:this.$i18n.t("amount"),sortable:!1,align:"start",value:"grand_total"},{title:this.$i18n.t("delivery_status"),sortable:!1,align:"start",value:"delivery_status"},{title:this.$i18n.t("payment_status"),sortable:!1,align:"start",value:"payment_status"},{title:this.$i18n.t("pickup"),sortable:!1,align:"center",value:"pickup"},{title:this.$i18n.t("options"),sortable:!1,align:"center",value:"options"}]}},methods:{async getAssignedDeliveries(e){this.loading=!0;const t=await this.call_api("get",`delivery-boy/assigned-deliveries?page=${e}`);200==t.status?(this.assignedDeliveries=t.data.data.data,this.lastPage=t.data.data.last_page,this.currentPage=t.data.data.current_page):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.loading=!1},openOrderDetails(e){this.$router.push({name:"DeliveryboyOrderDetails",params:{code:e.code}})},async updateOrderStatus(e){const t=await this.call_api("post","delivery-boy/update-delivery-status",{status:"picked_up",order_id:e});this.snack({message:t.data.message,color:"green"}),this.getAssignedDeliveries()},async caneclRequest(){this.dialog=!1;const e=await this.call_api("post","delivery-boy/cancel-request",{order_id:this.cancelOrderID});this.snack({message:e.data.message,color:"green"}),this.getAssignedDeliveries()}},created(){let e=this.$route.query.page||this.currentPage;this.getAssignedDeliveries(e)}},[["render",function(e,h,_,b,y,f){const k=t("v-btn"),D=t("v-switch"),x=t("v-card-title"),$=t("v-card-text"),w=t("v-card-actions"),C=t("v-card"),O=t("v-dialog"),P=t("v-data-table"),V=t("v-pagination");return a(),s("div",d,[i("h1",c,l(e.$t("assigned_delivery")),1),i("div",null,[n(P,{"loading-text":e.$t("loading_please_wait"),headers:f.headers,items:e.assignedDeliveries,class:"border px-4 pt-3","hide-default-footer":"","item-class":"c-pointer"},{"item.code":r(({item:e})=>[n(k,{onClick:t=>f.openOrderDetails(e.combined_order),small:"",variant:"flat",class:"px-2 text-primary"},{default:r(()=>[o(l(e.combined_order.code),1)]),_:2},1032,["onClick"])]),"item.grand_total":r(({item:t})=>[i("span",u,l(e.format_price(t.grand_total)),1)]),"item.pickup":r(({item:e})=>[n(D,{color:"success",value:"success","hide-details":"",onClick:t=>f.updateOrderStatus(e.id)},null,8,["onClick"])]),"item.options":r(({item:t})=>[i("a",{onClick:a=>(e.dialog=!0,e.cancelOrderID=t.id),class:"btn btn-soft-danger btn-icon btn-circle btn-sm mr-2"},[...h[3]||(h[3]=[i("i",{class:"las la-times text-danger"},null,-1)])],8,g),i("a",{onClick:e=>f.openOrderDetails(t.combined_order),class:"px-2 btn btn-soft-info btn-icon btn-circle btn-sm hov-svg-white"},[...h[4]||(h[4]=[i("i",{class:"las la-bars"},null,-1)])],8,p),n(O,{modelValue:e.dialog,"onUpdate:modelValue":h[1]||(h[1]=t=>e.dialog=t),width:"auto"},{default:r(()=>[n(C,null,{default:r(()=>[n(x),n($,null,{default:r(()=>[i("p",null,l(e.$t("are_you_sure_you_want_to_cancel_this_order")),1)]),_:1}),n(w,null,{default:r(()=>[i("div",m,[n(k,{class:"mx-1",color:"primary",variant:"text",onClick:f.caneclRequest},{default:r(()=>[o(l(e.$t("yes")),1)]),_:1},8,["onClick"]),n(k,{variant:"text",onClick:h[0]||(h[0]=t=>e.dialog=!1),class:"danger"},{default:r(()=>[o(l(e.$t("no")),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:2},1032,["loading-text","headers","items"])]),i("div",v,[n(V,{modelValue:e.currentPage,"onUpdate:modelValue":[h[2]||(h[2]=t=>e.currentPage=t),f.getAssignedDeliveries],length:e.lastPage,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0",class:"my-4"},null,8,["modelValue","onUpdate:modelValue","length"])])])}]]);export{h as default};
