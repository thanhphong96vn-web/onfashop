import{_ as I,u as R,a as U,c as S,b as f,e as A,m as _,l as F,f as D,g,d as B,h as n,o as l,z as N,w as d,j as r,k as a,t as o,n as T,i,p as u,F as p,q as v,s as L,v as O}from"./app-f730b58b.js";const{verifyRecaptcha:z}=R(),M={data:()=>({v$:U(),loading:!1,mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},form:{name:"",email:"",password:"",confirmPassword:"",phone:"",address:"",description:"",invalidPhone:!0,showInvalidPhone:!1}}),components:{VueTelInput:S},validations:{form:{name:{required:f},email:{required:f,email:A},phone:{required:f},address:{required:f},description:{required:f}}},computed:{..._("auth",["isAuthenticated"]),..._("app",["generalSettings","availableCountries"])},async mounted(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_affiliate_register)try{await F(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(e){console.error(e)}},methods:{...D("auth",["login"]),...g("cart",["removeTempUserId"]),...g("auth",["updateChatWindow","showLoginDialog"]),phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async submitRequest(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_affiliate_register){const c=await z("affiliate-registration");if(!c.success){this.snack({message:c.message,color:"red"});return}}if(!await this.v$.$validate())return;if(this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.form.phone=this.form.phone.replace(/\s/g,""),this.loading=!0;const t=await this.call_api("post","user/affiliate/store",this.form);t.data.status==400&&this.snack({message:t.data.message,color:"yellow"}),t.data.success?(this.snack({color:"green",message:t.data.message}),this.$router.push({name:"AffiliateRegConfirmation"})):this.snack({message:t.data.message,color:"red"}),this.loading=!1},resetForm(){this.form.name="",this.form.phone="",this.form.email="",this.form.invalidPhone=!0,this.form.showInvalidPhone=!1,this.form.address="",this.form.description=""}},beforeUnmount(){B()}},j={class:"text-h3 fw-700 mb-8"},E={class:"text-h6 fw-600 opacity-80"},G={class:"mb-4"},H={class:"mb-1 fs-13 fw-500"},W={class:"mb-4"},J={class:"fs-13 fw-500"},K={key:0},Q={class:"mb-4"},X={class:"mb-1 fs-13 fw-500"},Y={class:"mb-4"},Z={class:"mb-1 fs-13 fw-500"},x={class:"mb-4"},ee={class:"mb-1 fs-13 fw-500"},se={key:0,class:"v-text-field__details mt-2 pl-3"},te={class:"v-messages theme--light error--text",role:"alert"},ae={class:"v-messages__wrapper text-red"},oe={class:"v-messages__message"},le={key:1,class:"v-text-field__details mt-2 pl-3"},ie={class:"v-messages theme--light error--text",role:"alert"},re={class:"v-messages__wrapper text-red"},ne={class:"v-messages__message"},de={class:"mb-4"},me={class:"mb-1 fs-13 fw-500"},ue={class:"mb-4"},pe={class:"mb-1 fs-13 fw-500"};function fe(e,t,c,ce,he,h){const w=n("v-card-title"),m=n("v-text-field"),$=n("vue-tel-input"),y=n("v-card-text"),b=n("v-card"),V=n("v-btn"),k=n("v-form"),C=n("v-col"),P=n("v-row"),q=n("v-container");return l(),N(q,{class:"py-6"},{default:d(()=>[r(P,null,{default:d(()=>[r(C,{cols:"12",lg:"10",md:"12",sm:"12",class:"mx-auto"},{default:d(()=>[a("h1",j,o(e.$t("affiliate_informations")),1),r(k,{"lazy-validation":"",onSubmit:t[7]||(t[7]=T(s=>h.submitRequest(),["prevent"]))},{default:d(()=>[r(b,{class:"border",elevation:"0"},{default:d(()=>[r(w,null,{default:d(()=>[a("span",E,o(e.$t("verification_info")),1)]),_:1}),r(y,null,{default:d(()=>[a("div",G,[a("div",H,o(e.$t("your_name")),1),r(m,{variant:"plain",class:"text-field",placeholder:e.$t("full_name"),type:"text",modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.name=s),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(l(!0),i(p,null,u(e.v$.form.name.$errors,s=>(l(),i("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",W,[a("div",J,o(e.$t("your_email")),1),r(m,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.email=s),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(l(!0),i(p,null,u(e.v$.form.email.$errors,s=>(l(),i("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),e.isAuthenticated?v("",!0):(l(),i("div",K,[a("div",Q,[a("div",X,o(e.$t("password")),1),r(m,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.password,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.password=s),type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(l(!0),i(p,null,u(e.v$.form.password.$errors,s=>(l(),i("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",Y,[a("div",Z,o(e.$t("confirm_password")),1),r(m,{variant:"plain",placeholder:"* * * * * * * *",modelValue:e.form.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.confirmPassword=s),type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(l(!0),i(p,null,u(e.v$.form.confirmPassword.$errors,s=>(l(),i("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])])),a("div",x,[a("div",ee,o(e.$t("phone_number")),1),r($,L({modelValue:e.form.phone,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.phone=s)},e.mobileInputProps,{onlyCountries:e.availableCountries,onValidate:h.phoneValidate}),{default:d(()=>[...t[8]||(t[8]=[a("template",{slot:"arrow-icon"},[a("span",{class:"vti__dropdown-arrow"}," ▼")],-1)])]),_:1},16,["modelValue","onlyCountries","onValidate"]),e.v$.form.phone.$error?(l(),i("div",se,[a("div",te,[a("div",ae,[a("div",oe,o(e.$t("this_field_is_required")),1)])])])):v("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(l(),i("div",le,[a("div",ie,[a("div",re,[a("div",ne,o(e.$t("phone_number_must_be_valid")),1)])])])):v("",!0)]),a("div",de,[a("div",me,o(e.$t("full_address")),1),r(m,{variant:"plain",class:"text-field",placeholder:e.$t("full_address"),type:"text",modelValue:e.form.address,"onUpdate:modelValue":t[5]||(t[5]=s=>e.form.address=s),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(l(!0),i(p,null,u(e.v$.form.address.$errors,s=>(l(),i("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ue,[a("div",pe,o(e.$t("how_will_you_affiliate?")),1),r(m,{variant:"plain",class:"text-field",placeholder:e.$t("description"),type:"text",modelValue:e.form.description,"onUpdate:modelValue":t[6]||(t[6]=s=>e.form.description=s),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(l(!0),i(p,null,u(e.v$.form.description.$errors,s=>(l(),i("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),_:1})]),_:1}),r(V,{"x-large":"",class:"px-12 mb-4 w-100 mt-5",elevation:"0",type:"submit",color:"primary",onClick:h.submitRequest,loading:e.loading,disabled:e.loading},{default:d(()=>[O(o(e.$t("save")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}const _e=I(M,[["render",fe]]);export{_e as default};
