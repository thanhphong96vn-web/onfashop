import{_ as P,a as C,c as I,r as c,e as q,b as h,y as W,m as v,h as n,o as i,i as r,j as l,w as d,k as o,t as a,n as S,F as _,p as f,q as m,s as F,v as L}from"./app-65cf1f07.js";const N={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},v$:C(),form:{email:"",code:"",password:"",confirmPassword:"",invalidPhone:!0,showInvalidPhone:!1},resetWith:"email",loading:!1}),components:{VueTelInput:I},validations:{form:{email:{requiredIf:c(function(){return this.resetWith=="email"}),email:q},phone:{requiredIf:c(function(){return this.resetWith=="phone"})},code:{required:h},password:{required:h,minLength:W(6)},confirmPassword:{required:h}}},computed:{...v("app",["availableCountries"]),...v("auth",["authSettings"])},methods:{phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async resetPassword(){if(!await this.v$.$validate())return;if(this.resetWith=="phone"&&this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.form.code=this.form.code.replace(/\s/g,""),this.loading=!0;const t=await this.call_api("post","auth/password/reset",this.form);t.data.success?(this.$router.push({name:"Login"}),this.snack({message:t.data.message})):this.snack({message:t.data.message,color:"red"}),this.loading=!1}},created(){this.$route.params.email&&(this.form.email=this.$route.params.email),this.$route.params.phone?(this.form.phone=this.$route.params.phone,this.resetWith="phone"):(this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="phone")&&(this.resetWith="phone")}},U={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},D={key:0,class:"text-info mb-3"},B={key:1,class:"text-info mb-3"},O={class:"text-uppercase lh-1 mb-4 d-flex"},T={class:"display-1 text-primary fw-900"},j={class:"d-block display-1 fw-900 grey--text text--darken-3 ml-2"},z={key:2,class:"fs-16 fw-500 mb-6"},E={key:3,class:"fs-16 fw-500 mb-6"},G={key:0,class:"mb-4"},M={class:"mb-1 fs-13 fw-500"},A={key:1,class:"mb-4"},H={class:"mb-1 fs-13 fw-500"},J={key:0,class:"v-text-field__details mt-2 pl-3"},K={class:"v-messages theme--light error--text",role:"alert"},Q={class:"v-messages__wrapper"},R={class:"v-messages__message"},X={key:1,class:"v-text-field__details mt-2 pl-3"},Y={class:"v-messages theme--light error--text",role:"alert"},Z={class:"v-messages__wrapper"},x={class:"v-messages__message"},ee={class:"mb-4"},se={class:"mb-1 fs-13 fw-500"},oe={class:"mb-4"},te={class:"mb-1 fs-13 fw-500"},ae={class:"mb-4"},ie={class:"mb-1 fs-13 fw-500"};function re(e,t,le,ne,de,u){const p=n("v-text-field"),w=n("vue-tel-input"),g=n("v-otp-input"),$=n("v-btn"),b=n("v-form"),y=n("v-col"),V=n("v-row"),k=n("v-container");return i(),r("div",null,[l(k,null,{default:d(()=>[l(V,null,{default:d(()=>[l(y,{cols:"12",lg:"6",md:"8",sm:"10",class:"mx-auto"},{default:d(()=>[o("div",U,[e.resetWith=="email"?(i(),r("div",D,a(e.$t("a_verification_code_has_been_sent_to_your_email")),1)):(i(),r("div",B,a(e.$t("a_verification_code_has_been_sent_to_your_phone_number")),1)),o("h1",O,[o("span",T,a(e.$t("reset")),1),o("span",j,a(e.$t("password")),1)]),e.resetWith=="email"?(i(),r("div",z,a(e.$t("enter_your_email_address_code__new_password")),1)):(i(),r("div",E,a(e.$t("enter_your_phone_number_code__new_password")),1)),l(b,{ref:"loginForm","lazy-validation":"",onSubmit:t[5]||(t[5]=S(s=>u.resetPassword(),["prevent"]))},{default:d(()=>[e.resetWith=="email"?(i(),r("div",G,[o("div",M,a(e.$t("email")),1),l(p,{variant:"plain",class:"text-field",modelValue:e.form.email,"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.email=s),placeholder:e.$t("email_address"),type:"email","hide-details":"auto",required:"",outlined:""},null,8,["modelValue","placeholder"]),(i(!0),r(_,null,f(e.v$.form.email.$errors,s=>(i(),r("p",{key:s.$uid,class:"text-red"},a(s.$message),1))),128))])):m("",!0),e.resetWith=="phone"?(i(),r("div",A,[o("div",H,a(e.$t("phone_number")),1),l(w,F({modelValue:e.form.phone,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.phone=s)},e.mobileInputProps,{"only-countries":e.availableCountries,onValidate:u.phoneValidate}),{"arrow-icon":d(()=>[...t[6]||(t[6]=[o("span",{class:"vti__dropdown-arrow"}," ▼",-1)])]),_:1},16,["modelValue","only-countries","onValidate"]),e.v$.form.phone.$error?(i(),r("div",J,[o("div",K,[o("div",Q,[o("div",R,a(e.$t("this_field_is_required")),1)])])])):m("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(i(),r("div",X,[o("div",Y,[o("div",Z,[o("div",x,a(e.$t("phone_number_must_be_valid")),1)])])])):m("",!0)])):m("",!0),o("div",ee,[o("div",se,a(e.$t("code")),1),l(g,{modelValue:e.form.code,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.code=s),length:"6",type:"number","hide-details":"auto",disabled:e.loading,required:""},null,8,["modelValue","disabled"])]),o("div",oe,[o("div",te,a(e.$t("password")),1),l(p,{variant:"plain",modelValue:e.form.password,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.password=s),placeholder:"* * * * * * * *",type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"])]),(i(!0),r(_,null,f(e.v$.form.password.$errors,s=>(i(),r("p",{key:s.$uid,class:"text-red"},a(s.$message),1))),128)),o("div",ae,[o("div",ie,a(e.$t("confirm_password")),1),l(p,{variant:"plain",modelValue:e.form.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.confirmPassword=s),placeholder:"* * * * * * * *",type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(i(!0),r(_,null,f(e.v$.form.confirmPassword.$errors,s=>(i(),r("p",{key:s.$uid,class:"text-red"},a(s.$message),1))),128))]),l($,{"x-large":"",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",loading:e.loading,disabled:e.loading,onClick:u.resetPassword},{default:d(()=>[L(a(e.$t("reset_password")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},512)])]),_:1})]),_:1})]),_:1})])}const ue=P(N,[["render",re]]);export{ue as default};
