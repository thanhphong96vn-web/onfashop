import{_ as k,a as S,c as C,r as f,e as F,m as c,h as d,o as i,i as a,j as n,w as r,k as t,t as o,n as V,F as I,p as q,q as h,s as N,v as _}from"./app-97cff8f8.js";const D={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},showPhoneField:!1,v$:S(),form:{email:"",phone:"",invalidPhone:!0,showInvalidPhone:!1},loading:!1}),components:{VueTelInput:C},validations:{form:{email:{requiredIf:f(function(){return this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"&&!this.showPhoneField}),email:F},phone:{requiredIf:f(function(){return this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.showPhoneField})}}},computed:{...c("app",["availableCountries"]),...c("auth",["authSettings"]),emailErrors(){const e=[];return this.v$.form.email.$dirty&&(!this.v$.form.email.requiredIf&&e.push(this.$i18n.t("this_field_is_required")),!this.v$.form.email.email&&e.push(this.$i18n.t("this_field_is_required_a_valid_email"))),e}},methods:{phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async resetPassword(){if(!await this.v$.$validate())return;if((this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.showPhoneField)&&this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.form.phone=this.form.phone.replace(/\s/g,""),this.loading=!0;const s=await this.call_api("post","auth/password/create",this.form);s.data.success?(s.data.email?this.$router.push({name:"NewPassword",params:{email:this.form.email}}):this.$router.push({name:"NewPassword",params:{phone:this.form.phone}}),this.snack({message:s.data.message})):this.snack({message:s.data.message,color:"red"}),this.loading=!1}}},B={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},L={class:"px-lg-7"},O={class:"text-uppercase lh-1 mb-4"},E={class:"display-1 primary--text fw-900"},T={class:"d-block display-1 fw-900 grey--text text--darken-3"},U={key:0,class:"fs-16 fw-500 mb-6"},j={key:1,class:"fs-16 fw-500 mb-6"},z={key:2,class:"fs-16 fw-500 mb-6"},G={key:0,class:"mb-6"},M={class:"mb-1 fs-13 fw-500"},A={key:0,class:"text-end font-italic fs-12 opacity-70"},H={key:1,class:"mb-6"},J={class:"mb-1 fs-13 fw-500"},K={key:0,class:"v-text-field__details mt-2 pl-3"},Q={class:"v-messages theme--light error--text",role:"alert"},R={class:"v-messages__wrapper"},W={class:"v-messages__message"},X={key:1,class:"v-text-field__details mt-2 pl-3"},Y={class:"v-messages theme--light error--text",role:"alert"},Z={class:"v-messages__wrapper"},x={class:"v-messages__message"},ee={key:2,class:"text-end font-italic fs-12 opacity-70"};function se(e,s,te,oe,ie,m){const v=d("banner"),u=d("v-col"),g=d("v-text-field"),w=d("vue-tel-input"),y=d("v-btn"),$=d("v-form"),b=d("router-link"),p=d("v-row"),P=d("v-container");return i(),a("div",null,[n(P,null,{default:r(()=>[n(p,null,{default:r(()=>[n(u,{xl:"10",class:"mx-auto"},{default:r(()=>[t("div",B,[n(p,{"no-gutters":"",align:"center"},{default:r(()=>[n(u,{cols:"12",lg:"6",order:"2","order-lg":"1",class:"lh-0"},{default:r(()=>[n(v,{loading:!1,banner:e.$store.getters["app/banners"].forgot_page,class:"mt-5 mt-lg-0"},null,8,["banner"])]),_:1}),n(u,{cols:"12",order:"1","order-lg":"2",lg:"6"},{default:r(()=>[t("div",L,[t("h1",O,[t("span",E,o(e.$t("forgot")),1),t("span",T,o(e.$t("password")),1),s[5]||(s[5]=t("span",{class:"fs-22 fw-900 display-3 primary--text"},"?",-1))]),e.authSettings.customer_login_with=="email"?(i(),a("div",U,o(e.$t("enter_your_email_address_to_recover_your_password")),1)):e.authSettings.customer_login_with=="phone"?(i(),a("div",j,o(e.$t("enter_your_phone_number_to_recover_your_password")),1)):(i(),a("div",z,o(e.$t("enter_your_email_address_or_phone_number_to_recover_your_password")),1)),n($,{ref:"loginForm","lazy-validation":"",onSubmit:s[4]||(s[4]=V(l=>m.resetPassword(),["prevent"]))},{default:r(()=>[e.authSettings.customer_login_with=="email"||!e.showPhoneField&&e.authSettings.customer_login_with=="email_phone"?(i(),a("div",G,[t("div",M,o(e.$t("email")),1),n(g,{variant:"plain",class:"text-field",placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.email=l),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(i(!0),a(I,null,q(e.v$.form.email.$errors,l=>(i(),a("p",{key:l.$uid,class:"text-red"},o(l.$message),1))),128)),e.authSettings.customer_login_with=="email_phone"?(i(),a("div",A,[t("span",{class:"text-primary c-pointer",onClick:s[1]||(s[1]=l=>e.showPhoneField=!e.showPhoneField)},o(e.$t("use_phone_instead")),1)])):h("",!0)])):h("",!0),e.authSettings.customer_login_with=="phone"||e.showPhoneField&&e.authSettings.customer_login_with=="email_phone"?(i(),a("div",H,[t("div",J,o(e.$t("phone_number")),1),n(w,N({modelValue:e.form.phone,"onUpdate:modelValue":s[2]||(s[2]=l=>e.form.phone=l)},e.mobileInputProps,{onlyCountries:e.availableCountries,onValidate:m.phoneValidate}),{default:r(()=>[...s[6]||(s[6]=[t("template",{slot:"arrow-icon"},[t("span",{class:"vti__dropdown-arrow"}," ▼")],-1)])]),_:1},16,["modelValue","onlyCountries","onValidate"]),e.v$.form.phone.$error?(i(),a("div",K,[t("div",Q,[t("div",R,[t("div",W,o(e.$t("this_field_is_required")),1)])])])):h("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(i(),a("div",X,[t("div",Y,[t("div",Z,[t("div",x,o(e.$t("phone_number_must_be_valid")),1)])])])):h("",!0),e.authSettings.customer_login_with=="email_phone"?(i(),a("div",ee,[t("span",{onClick:s[3]||(s[3]=l=>e.showPhoneField=!e.showPhoneField),class:"primary--text"},o(e.$t("use_phone_instead")),1)])):h("",!0)])):h("",!0),n(y,{"x-large":"",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",onClick:m.resetPassword,loading:e.loading,disabled:e.loading},{default:r(()=>[_(o(e.$t("send_password_reset_code")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1},512),t("div",null,[_(o(e.$t("back_to"))+" ",1),n(b,{to:{name:"Login"},class:"primary--text text-decoration-underline"},{default:r(()=>[_(o(e.$t("login")),1)]),_:1})])])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})])}const ne=k(D,[["render",se]]);export{ne as default};
