import{S as a}from"./ShopBox-00e5a243.js";import{_ as e,h as t,o as s,i as l,j as r,w as d,k as o,t as i,F as n,p as h,z as c,q as u}from"./app-0e743bd7.js";const g={class:"fs-21"},p={key:0,class:"text-center"};const y=e({head:{title:"All Shops"},data:()=>({loading:!0,totalPages:1,allCategories:[],allBrands:[],allShops:[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],queryParam:{page:1,categoryId:null,brandId:null},selectedCategoryId:"",selectedBrandId:""}),components:{ShopBox:a},computed:{},methods:{async getBrands(){const a=await this.call_api("get","all-brands");a.data.success&&(this.allBrands=a.data.data,this.selectedBrandId=this.allBrands.some(a=>a.id==this.$route.query.brandId)?this.allBrands.find(a=>a.id==this.$route.query.brandId).id:null,this.selectedBrandId=this.$i18n.t("select"))},async getCategories(){const a=await this.call_api("get","categories/first-level");a.data.success&&(this.allCategories=a.data.data,this.selectedCategoryId=this.allCategories.some(a=>a.id==this.$route.query.categoryId)?this.allCategories.find(a=>a.id==this.$route.query.categoryId).id:null,this.selectedCategoryId=this.$i18n.t("select"))},categoryChange(a){this.queryParam.categoryId=a,this.queryParam.page=1,this.$router.push({query:{...this.$route.query,categoryId:this.queryParam.categoryId,page:this.queryParam.page}}).catch(()=>{}),this.getShops({categoryId:a})},brandChange(a){this.queryParam.brandId=a,this.$router.push({query:{...this.$route.query,brandId:this.queryParam.brandId,page:this.queryParam.page}}).catch(()=>{}),this.getShops({brandId:a})},pageSwitch(a){this.$router.push({query:{...this.$route.query,page:this.queryParam.page}}).catch(()=>{}),this.getShops({page:a})},async getShops(a){this.loading=!0;let e={...this.queryParam,...a},t="all-shops?";t+=`&page=${this.queryParam.page}`,t+=e.categoryId?`&category_id=${e.categoryId}`:"",t+=e.brandId?`&brand_id=${e.brandId}`:"";const s=await this.call_api("get",t);s.data.success&&(this.allShops=s.data.data,this.totalPages=s.data.meta.last_page,this.queryParam.page=s.data.meta.current_page,this.loading=!1)}},created(){this.selectedCategoryId=this.$i18n.t("select"),this.selectedBrandId=this.$i18n.t("select"),this.getCategories(),this.getBrands(),this.queryParam.page=this.$route.query.page||this.queryParam.page,this.queryParam.brandId=this.$route.query.brandId||this.queryParam.brandId,this.queryParam.categoryId=this.$route.query.categoryId||this.queryParam.categoryId,this.getShops({page:this.queryParam.page,brandId:this.queryParam.brandId,categoryId:this.queryParam.categoryId})}},[["render",function(a,e,y,m,b,I){const q=t("banner"),_=t("v-col"),$=t("v-autocomplete"),P=t("v-row"),f=t("shop-box"),v=t("v-pagination"),C=t("v-container");return s(),l("div",null,[r(q,{loading:!1,banner:a.$store.getters["app/banners"].all_shops_page,class:"mb-5"},null,8,["banner"]),r(C,{class:"py-6"},{default:d(()=>[r(P,{align:"center",class:"mb-3"},{default:d(()=>[r(_,{cols:"12",sm:""},{default:d(()=>[o("h1",g,i(a.$t("all_shops")),1)]),_:1}),r(_,{cols:"6",sm:"auto"},{default:d(()=>[r($,{modelValue:a.selectedCategoryId,"onUpdate:modelValue":[e[0]||(e[0]=e=>a.selectedCategoryId=e),I.categoryChange],items:a.allCategories,"item-title":"name","item-value":"id","menu-props":{offsetY:!0},"clear-icon":"las la-times fs-14","append-inner-icon":"las la-angle-down fs-14",placeholder:a.$t("sort_by_category"),label:a.$t("sort_by_category"),hint:a.$t("sort_by_category"),"no-data-text":a.$t("no_data_available"),density:"compact",flat:"",solo:"",variant:"outlined","hide-details":"",clearable:""},null,8,["modelValue","items","placeholder","label","hint","no-data-text","onUpdate:modelValue"])]),_:1}),r(_,{cols:"6",sm:"auto"},{default:d(()=>[r($,{modelValue:a.selectedBrandId,"onUpdate:modelValue":[e[1]||(e[1]=e=>a.selectedBrandId=e),I.brandChange],items:a.allBrands,"item-title":"name","item-value":"id","menu-props":{offsetY:!0},"clear-icon":"las la-times fs-14","append-inner-icon":"las la-angle-down fs-14",placeholder:a.$t("sort_by_brand"),label:a.$t("sort_by_brand"),hint:a.$t("sort_by_brand"),"no-data-text":a.$t("no_data_available"),density:"compact",flat:"",solo:"",variant:"outlined","hide-details":"",clearable:""},null,8,["modelValue","items","placeholder","label","hint","no-data-text","onUpdate:modelValue"])]),_:1})]),_:1}),r(P,{class:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},{default:d(()=>[(s(!0),l(n,null,h(a.allShops,(e,t)=>(s(),c(_,{key:t},{default:d(()=>[r(f,{"shop-details":e,"is-loading":a.loading},null,8,["shop-details","is-loading"])]),_:2},1024))),128))]),_:1}),a.totalPages>1?(s(),l("div",p,[r(v,{modelValue:a.queryParam.page,"onUpdate:modelValue":[e[2]||(e[2]=e=>a.queryParam.page=e),I.pageSwitch],class:"my-4",length:a.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0"},null,8,["modelValue","length","onUpdate:modelValue"])])):u("",!0)]),_:1})])}]]);export{y as default};
