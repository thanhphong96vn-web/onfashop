import{_ as e,h as t,o as a,z as l,w as i,k as s,j as o,t as n,m as r,f as d,v as u,a as c,b as f,i as m,p as h,F as g,n as p,a2 as y}from"./app-5a177a8d.js";import{W as v}from"./WithdrawDialog-14d1f9a6.js";const _={class:"mt-4"},b={class:"fs-21 fw-700 opacity-80 mb-5"},w={class:"text-start"};const $=e({data:()=>({loading:!0,currentPage:1,totalPages:1,earningtHistory:[]}),computed:{headers(){return[{title:this.$i18n.t("amount"),align:"start",sortable:!1,value:"amount"},{title:this.$i18n.t("order_id"),sortable:!1,align:"start",value:"order_id"},{title:this.$i18n.t("referrel_type"),sortable:!1,align:"start",value:"referrel_type"},{title:this.$i18n.t("product"),sortable:!1,align:"start",value:"product"},{title:this.$i18n.t("date"),sortable:!1,align:"start",value:"date"}]}},methods:{async getEarningHistory(e){this.loading=!0;const t=await this.call_api("get",`user/affiliate/earning-history?page=${e}`);200==t.status?(this.earningtHistory=t.data.data,this.totalPages=t.data.meta.last_page,this.currentPage=t.data.meta.current_page):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.loading=!1}},created(){let e=this.$route.query.page||this.currentPage;this.getEarningHistory(e)}},[["render",function(e,r,d,u,c,f){const m=t("v-data-table"),h=t("v-pagination"),g=t("v-card-text"),p=t("v-card"),y=t("v-col");return a(),l(y,null,{default:i(()=>[s("div",_,[o(p,{class:"mx-auto"},{default:i(()=>[o(g,null,{default:i(()=>[s("h1",b,n(e.$t("affiliate_earning_history")),1),o(m,{headers:f.headers,items:e.earningtHistory,class:"border px-4 pt-3","hide-default-footer":"","item-class":"c-pointer"},null,8,["headers","items"]),s("div",w,[o(h,{modelValue:e.currentPage,"onUpdate:modelValue":[r[0]||(r[0]=t=>e.currentPage=t),f.getEarningHistory],length:e.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0",class:"my-4"},null,8,["modelValue","onUpdate:modelValue","length"])])]),_:1})]),_:1})])]),_:1})}]]),x={data:()=>({loading:!0,currentPage:1,totalPages:1,paymentHistory:[]}),computed:{...r("affiliate",["getAffiliateBalance"]),headers(){return[{title:this.$i18n.t("date"),align:"start",sortable:!1,value:"date"},{title:this.$i18n.t("amount"),align:"start",sortable:!1,value:"amount"},{title:this.$i18n.t("payment_method"),sortable:!1,align:"end",value:"payment_method"}]}},methods:{...d("affiliate",["fetchAffiliateBalance"]),async getPaymentHistory(e){this.loading=!0;const t=await this.call_api("get",`user/affiliate/payment-history?page=${e}`);200==t.status?(this.paymentHistory=t.data.data,this.totalPages=t.data.meta.last_page,this.currentPage=t.data.meta.current_page):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.loading=!1}},created(){let e=this.$route.query.page||this.currentPage;this.getPaymentHistory(e),this.fetchAffiliateBalance()}},C={class:"mt-4"},k={class:"fs-21 fw-700 opacity-80 mb-5"},V={class:"d-block fw-600"},P={class:"d-block fw-600"},q={class:"d-block fw-600"},D={class:"text-start"};const A=e(x,[["render",function(e,r,d,u,c,f){const m=t("v-data-table"),h=t("v-pagination"),g=t("v-card-text"),p=t("v-card"),y=t("v-col");return a(),l(y,null,{default:i(()=>[s("div",C,[o(p,{class:"mx-auto"},{default:i(()=>[o(g,null,{default:i(()=>[s("h1",k,n(e.$t("affiliate_payment_history")),1),o(m,{headers:f.headers,items:e.paymentHistory,class:"border px-4 pt-3","hide-default-footer":"","item-class":"c-pointer"},{"item.date":i(({item:e})=>[s("span",V,n(e.date),1)]),"item.amount":i(({item:e})=>[s("span",P,n(e.amount),1)]),"item.payment_method":i(({item:e})=>[s("span",q,n(e.payment_method),1)]),_:2},1032,["headers","items"]),s("div",D,[o(h,{modelValue:e.currentPage,"onUpdate:modelValue":[r[0]||(r[0]=t=>e.currentPage=t),f.getPaymentHistory],length:e.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0",class:"my-4"},null,8,["modelValue","onUpdate:modelValue","length"])])]),_:1})]),_:1})])]),_:1})}]]),W={data:()=>({loading:!0}),computed:{...r("affiliate",["getWithdrawRequest","getWithdrawRequestCurrentPage","getWithdrawRequestLastPage"]),headers(){return[{title:this.$i18n.t("date"),align:"start",sortable:!1,value:"date"},{title:this.$i18n.t("amount"),align:"start",sortable:!1,value:"amount"},{title:this.$i18n.t("status"),sortable:!1,align:"end",value:"status"}]}},methods:{...d("affiliate",["fetchWithdrawRequest"])},created(){let e=this.$route.query.page||this.currentPage;this.fetchWithdrawRequest(e)}},S={class:"mt-4"},R={class:"fs-21 fw-700 opacity-80 mb-5"},H={class:"d-block fw-600"},B={class:"d-block fw-600"},U={class:"text-start"};const T=e(W,[["render",function(e,r,d,c,f,m){const h=t("v-btn"),g=t("v-data-table"),p=t("v-pagination"),y=t("v-card-text"),v=t("v-card"),_=t("v-col");return a(),l(_,null,{default:i(()=>[s("div",S,[o(v,{class:"mx-auto"},{default:i(()=>[o(y,null,{default:i(()=>[s("h1",R,n(e.$t("affiliate_withdraw_request_history")),1),o(g,{headers:m.headers,items:e.getWithdrawRequest,class:"border px-4 pt-3","hide-default-footer":"","item-class":"c-pointer"},{"item.date":i(({item:e})=>[s("span",H,n(e.date),1)]),"item.amount":i(({item:e})=>[s("span",B,n(e.amount),1)]),"item.status":i(({item:t})=>[1==t.status?(a(),l(h,{key:0,"x-small":"",color:"success"},{default:i(()=>[u(n(e.$t("accepted")),1)]),_:1})):2==t.status?(a(),l(h,{key:1,"x-small":"",color:"error"},{default:i(()=>[u(n(e.$t("rejected")),1)]),_:1})):(a(),l(h,{key:2,"x-small":"",color:"info"},{default:i(()=>[u(n(e.$t("pending")),1)]),_:1}))]),_:2},1032,["headers","items"]),s("div",U,[o(p,{modelValue:e.getWithdrawRequestCurrentPage,"onUpdate:modelValue":[r[0]||(r[0]=t=>e.getWithdrawRequestCurrentPage=t),this.fetchWithdrawRequest],length:e.getWithdrawRequestLastPage,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0",class:"my-4"},null,8,["modelValue","onUpdate:modelValue","length"])])]),_:1})]),_:1})])]),_:1})}]]),E={props:{show:{type:Boolean,required:!0,default:!1}},data:()=>({v$:c(),loading:!1,form:{paypalEmail:"",bankInformations:""}}),validations:{form:{paypalEmail:{required:f},bankInformations:{required:f}}},computed:{isVisible:{get:function(){return this.show},set:function(e){}}},methods:{closeDialog(){this.isVisible=!1,this.$emit("close")},async storePaymentSettings(){if(!(await this.v$.$validate()))return;this.loading=!1;const e=await this.call_api("post","user/affiliate/payment-settings",this.form);this.snack({message:this.$i18n.t(e.data.message),color:"green"}),this.$refs.paymentForm.reset(),this.loading=!1,this.closeDialog()}}},I={class:"white pa-5 rounded"},j={class:"opacity-80 mb-3 fs-18 mt-3"},F={class:"text-right mt-4"};const z=e(E,[["render",function(e,r,d,c,f,y){const v=t("v-text-field"),_=t("v-btn"),b=t("v-form"),w=t("v-dialog");return a(),l(w,{modelValue:y.isVisible,"onUpdate:modelValue":r[3]||(r[3]=e=>y.isVisible=e),"max-width":"700px","onClick:outside":y.closeDialog},{default:i(()=>[s("div",I,[o(b,{ref:"paymentForm","lazy-validation":"",onSubmit:r[2]||(r[2]=p(e=>y.storePaymentSettings(),["prevent"])),autocomplete:"chrome-off"},{default:i(()=>[s("h3",j,n(e.$t("payment_settings")),1),o(v,{variant:"plain",class:"text-field",placeholder:e.$t("paypal_email"),type:"email",modelValue:e.form.paypalEmail,"onUpdate:modelValue":r[0]||(r[0]=t=>e.form.paypalEmail=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(a(!0),m(g,null,h(e.v$.form.paypalEmail.$errors,e=>(a(),m("p",{key:e.$uid,class:"text-red"},n(e.$message),1))),128)),o(v,{variant:"plain",class:"mt-4 text-field",placeholder:e.$t("bank_informations"),type:"text",modelValue:e.form.bankInformations,"onUpdate:modelValue":r[1]||(r[1]=t=>e.form.bankInformations=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(a(!0),m(g,null,h(e.v$.form.bankInformations.$errors,e=>(a(),m("p",{key:e.$uid,class:"text-red"},n(e.$message),1))),128)),s("div",F,[o(_,{elevation:"0",class:"mr-4",text:"",onClick:y.closeDialog},{default:i(()=>[u(n(e.$t("cancel")),1)]),_:1},8,["onClick"]),o(_,{elevation:"0",type:"submit",color:"primary",onClick:y.storePaymentSettings,loading:e.loading,disabled:e.loading},{default:i(()=>[u(n(e.$t("update")),1)]),_:1},8,["onClick","loading","disabled"])])]),_:1},512)])]),_:1},8,["modelValue","onClick:outside"])}]]),L={props:{from:{type:String,default:"/user/wallet"},show:{type:Boolean,required:!0,default:!1}},data:()=>({v$:c(),loading:!1,requestedAmount:0}),validations:{requestedAmount:{required:f,minValue:y(1)}},computed:{...r("affiliate",["getAffiliateBalance"]),isVisible:{get:function(){return this.show},set:function(e){}}},methods:{...d("affiliate",["fetchWithdrawRequest","fetchAffiliateBalance"]),closeDialog(){this.isVisible=!1,this.receipt=null,this.$emit("close")},async withdrawalRequest(){this.isVisible=!1;let e=Math.round(parseFloat(this.getAffiliateBalance.replace(/[$,]/g,"")));if(!(await this.v$.$validate()))return;if(e<this.requestedAmount)return void this.snack({message:this.$i18n.t("you can't request for convert more than your affiliate balance"),color:"red"});this.loading=!1;const t={amount:this.requestedAmount},a=await this.call_api("post","user/affiliate/convert-request",t);a.data.success?(this.fetchAffiliateBalance(),this.requestedAmount=0,this.snack({message:this.$i18n.t(a.data.message),color:"green"}),this.loading=!1,this.closeDialog(),this.isVisible=!1):this.snack({message:a.data.message,color:"red"})}}},M={class:"white pa-5 rounded"},N={class:"opacity-80 mb-3 fs-18 mt-3"},G={class:"text-right mt-4"};const J={data:()=>({withdrawDialogShow:!1,WalletConvertDialogShow:!1,ConfigPayoutDialogShow:!1,loading:!0,currentPage:1,totalPages:1,products:[],referrelCode:""}),components:{WithdrawDialog:v,ConfigPayoutDialog:z,AffiliateEarningHistory:$,AffiliatePaymentHistory:A,AffiliatePaymentWithdraw:T,WalletConvertDialog:e(L,[["render",function(e,r,d,c,f,y){const v=t("v-text-field"),_=t("v-btn"),b=t("v-form"),w=t("v-dialog");return a(),l(w,{modelValue:y.isVisible,"onUpdate:modelValue":r[2]||(r[2]=e=>y.isVisible=e),"max-width":"700px","onClick:outside":y.closeDialog},{default:i(()=>[s("div",M,[o(b,{"lazy-validation":"",onSubmit:r[1]||(r[1]=p(()=>{},["prevent"]))},{default:i(()=>[s("h3",N,n(e.$t("affiliate_balance_convert_to_wallet")),1),o(v,{variant:"plain",class:"text-field",placeholder:e.$t("converted_amount"),type:"Number",modelValue:e.requestedAmount,"onUpdate:modelValue":r[0]||(r[0]=t=>e.requestedAmount=t),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),(a(!0),m(g,null,h(e.v$.requestedAmount.$errors,e=>(a(),m("p",{key:e.$uid,class:"text-red"},n(e.$message),1))),128)),s("div",G,[o(_,{text:"",onClick:y.closeDialog,elevation:"0",class:"mr-4"},{default:i(()=>[u(n(e.$t("cancel")),1)]),_:1},8,["onClick"]),o(_,{elevation:"0",type:"submit",color:"primary",onClick:y.withdrawalRequest,loading:e.loading,disabled:e.loading},{default:i(()=>[u(n(e.$t("confirm")),1)]),_:1},8,["onClick","loading","disabled"])])]),_:1})])]),_:1},8,["modelValue","onClick:outside"])}]])},computed:{...r("affiliate",["getAffiliateBalance","getReferralCode","getTotalClick","getTotalItem","getTotalDelevered","getTotalCancel"])},methods:{...d("affiliate",["fetchAffiliateBalance","fetchAffiliateReferralCode","fetchAffiliateStats"]),copyText(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},withdrawDialogClosed(){this.withdrawDialogShow=!1},WalletConvertDialogClosed(){this.WalletConvertDialogShow=!1},ConfigPayoutDialogClosed(){this.ConfigPayoutDialogShow=!1}},created(){this.fetchAffiliateBalance(),this.fetchAffiliateReferralCode(),this.fetchAffiliateStats()}},K={class:"ps-lg-7 pt-4"},O={class:"fs-21 fw-700 opacity-80 mb-5"},Q={class:"fs-14 mb-3 fw-700 text-primary"},X={class:"fw-500 text-h4"},Y={class:"fs-14 mb-3 w-100"},Z={class:"fs-14 mb-3 w-100"},ee={class:"fs-14 mb-3 w-100"},te={class:"fs-21 fw-700 opacity-80 mb-5"},ae={class:"fs-14 mb-3 w-100"},le={class:"fs-14 mb-3 w-100"},ie={class:"fs-14 mb-3 w-100"},se={class:"fs-14 mb-3 w-100"};const oe=e(J,[["render",function(e,l,r,d,c,f){const h=t("v-sheet"),g=t("v-col"),y=t("config-payout-dialog"),v=t("v-btn"),_=t("withdraw-dialog"),b=t("wallet-convert-dialog"),w=t("v-row"),$=t("v-text-field"),x=t("v-card-text"),C=t("v-card");return a(),m("div",null,[s("div",K,[s("h1",O,n(e.$t("affiliate")),1),o(w,null,{default:i(()=>[o(g,{cols:"12",sm:"3"},{default:i(()=>[o(h,{color:"grey-darken-3",rounded:"rounded",elevation:"0",height:"130",class:"d-flex justify-center align-center white--text flex-column"},{default:i(()=>[s("div",Q,n(e.$t("affiliate_balance")),1),s("div",X,n(e.getAffiliateBalance),1)]),_:1})]),_:1}),o(g,{cols:"12",sm:"3"},{default:i(()=>[o(y,{show:e.ConfigPayoutDialogShow,onClose:f.ConfigPayoutDialogClosed},null,8,["show","onClose"]),o(v,{class:"border border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":"",onClick:l[0]||(l[0]=p(t=>e.ConfigPayoutDialogShow=!0,["stop"]))},{default:i(()=>[s("span",null,[s("div",Y,n(e.$t("configure_payout")),1),l[5]||(l[5]=s("i",{class:"las la-cog la-3x opacity-70"},null,-1))])]),_:1})]),_:1}),o(g,{cols:"12",sm:"3"},{default:i(()=>[o(_,{show:e.withdrawDialogShow,onClose:f.withdrawDialogClosed},null,8,["show","onClose"]),o(v,{class:"border-dashed bg-grey-lighten-4 border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":"",onClick:l[1]||(l[1]=p(t=>e.withdrawDialogShow=!0,["stop"]))},{default:i(()=>[s("span",null,[s("div",Z,n(e.$t("affiliate_withdraw_request")),1),l[6]||(l[6]=s("i",{class:"las la-plus la-3x opacity-70"},null,-1))])]),_:1})]),_:1}),o(g,{cols:"12",sm:"3"},{default:i(()=>[o(b,{show:e.WalletConvertDialogShow,onClose:f.WalletConvertDialogClosed},null,8,["show","onClose"]),o(v,{class:"border-dashed bg-grey-darken-1 border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":"",onClick:l[2]||(l[2]=p(t=>e.WalletConvertDialogShow=!0,["stop"]))},{default:i(()=>[s("span",null,[s("div",ee,n(e.$t("convert_to_wallet")),1),l[7]||(l[7]=s("i",{class:"las la-plus la-3x opacity-70"},null,-1))])]),_:1})]),_:1})]),_:1}),o(w,null,{default:i(()=>[o(g,{cols:"12",sm:"12"},{default:i(()=>[o(C,{class:"mx-auto","prepend-icon":"mdi-home"},{default:i(()=>[o(x,null,{default:i(()=>[o($,{readonly:"",modelValue:e.getReferralCode,"onUpdate:modelValue":l[3]||(l[3]=t=>e.getReferralCode=t),ref:"textToCopy",id:"referralLink"},null,8,["modelValue"]),o(v,{onClick:l[4]||(l[4]=t=>f.copyText(e.getReferralCode))},{default:i(()=>[...l[8]||(l[8]=[u("copy",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(w,null,{default:i(()=>[o(g,{cols:"12",sm:"12"},{default:i(()=>[o(C,{class:"mx-auto"},{default:i(()=>[o(x,null,{default:i(()=>[s("h1",te,n(e.$t("affiliate_status")),1),o(w,null,{default:i(()=>[o(g,{cols:"12",sm:"3"},{default:i(()=>[o(v,{class:"border border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":""},{default:i(()=>[s("span",null,[s("h1",null,n(e.getTotalClick),1),s("div",ae,n(e.$t("no_of_click")),1)])]),_:1})]),_:1}),o(g,{cols:"12",sm:"3"},{default:i(()=>[o(v,{class:"border border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":""},{default:i(()=>[s("span",null,[s("h1",null,n(e.getTotalItem),1),s("div",le,n(e.$t("no_of_item")),1)])]),_:1})]),_:1}),o(g,{cols:"12",sm:"3"},{default:i(()=>[o(v,{class:"border border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":""},{default:i(()=>[s("span",null,[s("h1",null,n(e.getTotalDelevered),1),s("div",ie,n(e.$t("no_of_delivered")),1)])]),_:1})]),_:1}),o(g,{cols:"12",sm:"3"},{default:i(()=>[o(v,{class:"border border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":""},{default:i(()=>[s("span",null,[s("h1",null,n(e.getTotalCancel),1),s("div",se,n(e.$t("no_of_cancel")),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])}]]);export{oe as default};
