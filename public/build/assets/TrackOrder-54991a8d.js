import{_ as e,u as r,a,b as t,m as o,l as s,d,h as i,o as l,i as n,j as c,w as m,k as h,t as u,n as g,q as p,v as f,z as _}from"./app-5a177a8d.js";import{S as y}from"./Summary-abcf2591.js";import"./Payment-daccfa42.js";const{verifyRecaptcha:v}=r(),k={head:{title:"Order Tracking Page"},data:()=>({loading:!1,error:"",v$:a(),form:{orderCode:""},order:{},recaptchaReady:!1}),components:{Summary:y},validations:{form:{orderCode:{required:t}}},computed:{...o("app",["generalSettings","appUrl","paymentMethods","offlinePaymentMethods"]),...o("auth",["isAuthenticated"]),orderCodeErrors(){const e=[];return this.v$.form.orderCode.$dirty?(!this.v$.form.orderCode.required&&e.push(this.$i18n.t("this_field_is_required")),e):e}},async mounted(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_track_order)try{await s(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(e){console.error(e)}},beforeUnmount(){d()},methods:{async trackOrder(){if(this.error=null,this.form.orderCode.trim().length<=0)this.error="Value is required";else{this.loading=!0;try{if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_track_order){const e=await v("track_order");if(!e.success)return void(this.error=e.message)}const e=await this.call_api("get",`user/order/${this.form.orderCode}`);console.log("Order response:",e),e.data.success?this.order=e.data.data:(this.error=e.data.message,this.order={})}catch(e){console.error(e),this.error="Something went wrong!"}this.loading=!1}}}},C={class:"pb-6"},b={class:"mb-7 mt-4"},S={class:"mb-1 fs-13 fw-500"},$={key:0,class:"text-red"};const x=e(k,[["render",function(e,r,a,t,o,s){const d=i("v-text-field"),y=i("v-btn"),v=i("v-form"),k=i("v-col"),x=i("Summary"),w=i("v-row"),q=i("v-container");return l(),n("div",C,[c(q,null,{default:m(()=>[c(w,null,{default:m(()=>[c(k,{cols:"12",lg:"6",class:"mx-auto"},{default:m(()=>[h("h1",b,u(e.$t("track_your_order")),1),c(v,{"lazy-validation":"",onSubmit:r[1]||(r[1]=g(e=>s.trackOrder(),["prevent"]))},{default:m(()=>[h("div",S,u(e.$t("order_code")),1),c(d,{placeholder:e.$t("order_code"),type:"text",class:"mb-3 text-field",modelValue:e.form.orderCode,"onUpdate:modelValue":r[0]||(r[0]=r=>e.form.orderCode=r),"error-messages":s.orderCodeErrors,"hide-details":"auto",required:"",variant:"plain"},null,8,["placeholder","modelValue","error-messages"]),e.error?(l(),n("p",$,u(e.error),1)):p("",!0),c(y,{class:"px-16 mb-4",elevation:"0",color:"primary",onClick:s.trackOrder,loading:e.loading,disabled:e.loading},{default:m(()=>[f(u(e.$t("track")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1}),e.is_empty_obj(e.order)?p("",!0):(l(),_(k,{key:0,cols:"12",xl:"8",lg:"10",class:"mx-auto"},{default:m(()=>[c(x,{"order-details":e.order},null,8,["order-details"])]),_:1}))]),_:1})]),_:1})])}]]);export{x as default};
