import{f as t,_ as e,h as a,o as s,i as l,F as i,p as r,z as o,w as c,k as n,v as d,t as u,q as m,A as p,j as g,M as h,m as f,g as _}from"./app-5a177a8d.js";import{C as y}from"./CouponForm-e90adf55.js";const v={props:{cartItems:{type:Array,required:!0,default:[]}},methods:{...t("cart",["updateQuantity","toggleCartItem","removeFromCart"])}},k={class:"w-100"},C={class:"position-relative"},b={class:"flex-shrink-0 lh-0"},x=["src","alt"],w={class:"flex-grow-1 minw-0 ms-3"},S={class:"text-truncate fs-12 opacity-80 mb-2"},T={class:"mx-3 fs-12"},O={class:"flex-shrink-0 w-80px text-end"},P={key:0,class:"opacity-50"},V={class:"text-primary"},I={class:"ms-4"},z=["onClick"],q={key:0,class:"ms-5"},U={class:"opacity-70"},F={class:"fw-500"};const M={class:""},$={key:0,class:"fs-12 green-text"},E={key:1,class:"fs-12"},j={class:"fw-600"};const Q={name:"Cart",mixins:[h],components:{CartItems:e(v,[["render",function(t,e,h,f,_,y){const v=a("v-chip"),M=a("v-checkbox"),$=a("v-btn"),E=a("v-list-item");return s(),l("div",null,[(s(!0),l(i,null,r(h.cartItems,(a,h)=>(s(),o(E,{key:a.cart_id,class:p(["px-0 py-3",[{"text-reset":a.outOfStock},{"border-top":0!=h}]])},{default:c(()=>[n("div",k,[n("div",C,[a.outOfStock?(s(),o(v,{key:0,class:"absolute-top-left white-text z-1",color:"red","x-small":"",label:""},{default:c(()=>[d(u(t.$t("out_of_stock")),1)]),_:1})):m("",!0),n("div",{class:p(["d-flex align-center",{"opacity-50":a.outOfStock}])},[g(M,{"true-icon":"las la-check","hide-details":"",class:"mt-0 pt-0","model-value":a.selected,disabled:a.outOfStock,"onUpdate:modelValue":e=>t.toggleCartItem({cart_id:a.cart_id,status:e})},null,8,["model-value","disabled","onUpdate:modelValue"]),n("div",b,[n("img",{src:a.thumbnail,alt:a.name,class:"img-fluid size-70px",onError:e[0]||(e[0]=e=>t.imageFallback(e))},null,40,x)]),n("div",w,[n("div",S,u(a.name),1),n("div",{class:p(["d-flex align-center",{"pointer-disbled":a.outOfStock}])},[g($,{color:"primary",size:"x-small",class:"rounded cart-btn-minus text-white",elevation:"0",fab:"",onClick:e=>t.updateQuantity({type:"minus",cart_id:a.cart_id})},{default:c(()=>[...e[1]||(e[1]=[n("i",{class:"las la-minus"},null,-1)])]),_:2},1032,["onClick"]),n("span",T,u(t.$t("qty"))+" : "+u(a.qty),1),g($,{color:"primary",size:"x-small",class:"rounded cart-btn-plus",elevation:"0",fab:"","x-small":"",onClick:e=>t.updateQuantity({type:"plus",cart_id:a.cart_id})},{default:c(()=>[...e[2]||(e[2]=[n("i",{class:"las la-plus"},null,-1)])]),_:2},1032,["onClick"])],2)]),n("div",O,[a.regular_price>a.dicounted_price?(s(),l("del",P,u(t.format_price(a.regular_price*a.qty)),1)):m("",!0),n("div",V,u(t.format_price(a.dicounted_price*a.qty)),1)]),n("div",I,[n("button",{class:"",onClick:e=>t.removeFromCart(a.cart_id)},[...e[3]||(e[3]=[n("i",{class:"las la-trash fs-20 opacity-50"},null,-1)])],8,z)])],2)]),a.combinations.length>0?(s(),l("div",q,[(s(!0),l(i,null,r(a.combinations,(t,a)=>(s(),l("span",{key:a,class:"px-4 py-1 fs-12"},[n("span",U,u(t.attribute),1),e[4]||(e[4]=d(" : ",-1)),n("span",F,u(t.value),1)]))),128))])):m("",!0)])]),_:2},1032,["class"]))),128))])}]]),CouponForm:y,MinOrderProgress:e({props:{shopId:{type:Number,required:!0,default:null},minOrder:{type:Number,required:!0,default:0},cartPrice:{type:Number,required:!0,default:0}},data:()=>({progressPercent:0}),watch:{cartPrice:{immediate:!0,handler(t,e){this.progressPercent=t>=this.minOrder?100:100*t/this.minOrder}}}},[["render",function(t,e,i,r,o,c){const m=a("v-progress-linear");return s(),l("div",M,[g(m,{class:"mb-1",modelValue:t.progressPercent,"onUpdate:modelValue":e[0]||(e[0]=e=>t.progressPercent=e),color:"primary","background-color":"blue-grey lighten-3",height:"8",rounded:"",query:""},null,8,["modelValue"]),100==t.progressPercent?(s(),l("div",$,u(t.$t("congratulations_you_reached_the_minimum_order_amount")),1)):(s(),l("div",E,[d(u(t.$t("you_need_to_reach"))+" ",1),n("span",j,u(t.format_price(i.minOrder)),1),d(" "+u(t.$t("to_place_order_from_this_shop")),1)]))])}]])},computed:{...f("app",["generalSettings"]),...f("cart",["getCartCount","getCartPrice","getCartProducts","getCartShops","getShopMinOrder","getShopCartPrice","getShopProductsById","getTotalCouponDiscount","getSelectedCartIds"]),...f("auth",["isAuthenticated"]),isMultiVendor(){return this.is_addon_activated("multi_vendor")},hasCartItems(){return this.isMultiVendor?this.getCartShops.length>0:this.getCartProducts.length>0},allSelected(){if(this.isMultiVendor)return this.getCartShops.length>0&&this.getCartShops.every(t=>t.selected);{const t=this.getCartProducts.filter(t=>t.selected&&!t.outOfStock),e=this.getCartProducts.filter(t=>!t.outOfStock);return e.length>0&&t.length===e.length}},getSelectedCount(){return this.isMultiVendor?this.getCartShops.reduce((t,e)=>e.selected?t+this.getShopProductsById(e.id).filter(t=>t.selected).length:t,0):this.getCartProducts.filter(t=>t.selected).length}},methods:{getTranslation(t,e){const a=this.$t(t);return a!==t&&a?a:e},...t("cart",["fetchCartProducts","updateQuantity","toggleCartItem","toggleCartShop","removeFromCart"]),..._("auth",["showLoginDialog"]),toggleAllItems(t){this.isMultiVendor?this.getCartShops.forEach(e=>{this.toggleCartShop({shop_id:e.id,status:t})}):this.getCartProducts.forEach(e=>{e.outOfStock||this.toggleCartItem({cart_id:e.cart_id,status:t})})},removeSelected(){const t=this.getSelectedCartIds;0!==t.length?(t.forEach(t=>{this.removeFromCart(t)}),this.snack({message:this.getTranslation("selected_items_removed","Đã xóa các sản phẩm đã chọn")})):this.snack({message:this.getTranslation("please_select_items_to_delete","Vui lòng chọn sản phẩm để xóa"),color:"red"})},saveToWishlist(){this.snack({message:this.getTranslation("feature_coming_soon","Tính năng đang phát triển")})},goToCheckout(){this.getCartPrice<=0?this.snack({message:this.getTranslation("please_select_a_cart_product","Vui lòng chọn ít nhất một sản phẩm"),color:"red"}):this.isAuthenticated||!this.generalSettings.guest_checkout_activation?this.$router.push({name:"Checkout"}):this.$router.push({name:"GuestCheckout"})}},created(){this.fetchCartProducts()}},A={key:0,class:"bg-white border rounded mb-4"},H={class:"d-flex align-center pa-3 border-bottom bg-grey-lighten-4"},D={class:"flex-grow-1 minw-0 me-3 fw-600"},B={class:"text-end me-6 fw-600",style:{"min-width":"120px"}},G={class:"d-flex align-center justify-center me-6 fw-600",style:{"min-width":"120px"}},L={class:"text-end me-6 fw-600",style:{"min-width":"120px"}},N={class:"fw-600",style:{"min-width":"60px"}},W={class:"d-flex align-center pa-3 bg-grey-lighten-5"},R=["src","alt"],X={class:"fw-600"},J={key:0,class:"px-3 py-2"},K={class:"flex-shrink-0 ms-3 me-3"},Y=["src","alt"],Z={class:"flex-grow-1 minw-0 me-3"},tt={class:"fw-500 mb-1"},et={key:0,class:"fs-12 opacity-70 mb-2"},at={class:"opacity-70"},st={class:"fw-500"},lt={class:"text-end me-6",style:{"min-width":"120px"}},it={key:0,class:"d-block fs-12 opacity-50 mb-1"},rt={class:"fw-600 text-primary"},ot={class:"d-flex align-center justify-center me-6",style:{"min-width":"120px"}},ct={class:"mx-3 fw-600"},nt={class:"text-end me-6",style:{"min-width":"120px"}},dt={class:"fw-700 text-primary fs-16"},ut={class:"px-3 py-2 border-top bg-grey-lighten-5"},mt={class:"flex-shrink-0 ms-3 me-3"},pt=["src","alt"],gt={class:"flex-grow-1 minw-0 me-3"},ht={class:"fw-500 mb-1"},ft={key:0,class:"fs-12 opacity-70 mb-2"},_t={class:"opacity-70"},yt={class:"fw-500"},vt={class:"text-end me-6",style:{"min-width":"120px"}},kt={key:0,class:"d-block fs-12 opacity-50 mb-1"},Ct={class:"fw-600 text-primary"},bt={class:"d-flex align-center justify-center me-6",style:{"min-width":"120px"}},xt={class:"mx-3 fw-600"},wt={class:"text-end me-6",style:{"min-width":"120px"}},St={class:"fw-700 text-primary fs-16"},Tt={class:"px-3 py-3 border-top bg-grey-lighten-5"},Ot={key:1,class:"text-center py-12"},Pt=["src"],Vt={class:"fs-20 fw-500 mb-4"},It={key:2,class:"cart-footer-fixed bg-white border-top pa-4"},zt={class:"d-flex align-center flex-wrap gap-2"},qt={class:"fw-600"},Ut={class:"text-end"},Ft={class:"mb-2"},Mt={class:"opacity-70 me-2"},$t={class:"fs-24 fw-700 text-primary mb-2"},Et={key:0,class:"fs-14 text-success mb-3"};const jt=e(Q,[["render",function(t,e,h,f,_,y){const v=a("v-checkbox"),k=a("v-chip"),C=a("min-order-progress"),b=a("v-btn"),x=a("coupon-form"),w=a("v-col"),S=a("v-row"),T=a("v-container");return s(),o(T,{class:"py-6"},{default:c(()=>[g(S,null,{default:c(()=>[g(w,{cols:"12"},{default:c(()=>[y.hasCartItems?(s(),l("div",A,[n("div",H,[g(v,{"model-value":y.allSelected,"onUpdate:modelValue":y.toggleAllItems,"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},null,8,["model-value","onUpdate:modelValue"]),e[4]||(e[4]=n("div",{class:"flex-shrink-0 ms-3 me-3",style:{width:"80px"}},null,-1)),n("div",D,u(y.getTranslation("product","Sản Phẩm")),1),n("div",B,u(y.getTranslation("unit_price","Đơn Giá")),1),n("div",G,u(y.getTranslation("quantity","Số Lượng")),1),n("div",L,u(y.getTranslation("amount","Số Tiền")),1),n("div",N,u(y.getTranslation("actions","Thao Tác")),1)]),y.isMultiVendor?(s(!0),l(i,{key:0},r(t.getCartShops,(a,h)=>(s(),l("div",{key:a.id,class:"border-bottom"},[n("div",W,[g(v,{"model-value":a.selected,"onUpdate:modelValue":e=>t.toggleCartShop({shop_id:a.id,status:e}),"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},null,8,["model-value","onUpdate:modelValue"]),n("img",{src:a.logo||t.static_asset("/assets/img/placeholder.jpg"),alt:a.name,class:"size-32px ms-3 me-2 rounded",onError:e[0]||(e[0]=e=>t.imageFallback(e))},null,40,R),n("span",X,u(a.name),1),a.couponCode?(s(),o(k,{key:0,color:"red",size:"x-small",class:"ms-2 white-text"},{default:c(()=>[...e[5]||(e[5]=[d(" VOUCHER ",-1)])]),_:1})):m("",!0)]),t.getShopMinOrder(a.id)>0?(s(),l("div",J,[g(C,{"shop-id":a.id,"cart-price":t.getShopCartPrice(a.id),"min-order":t.getShopMinOrder(a.id)},null,8,["shop-id","cart-price","min-order"])])):m("",!0),(s(!0),l(i,null,r(t.getShopProductsById(a.id),(a,h)=>(s(),l("div",{key:a.cart_id,class:p(["d-flex align-center pa-3 border-top",{"opacity-50":a.outOfStock}])},[g(v,{"model-value":a.selected,disabled:a.outOfStock,"onUpdate:modelValue":e=>t.toggleCartItem({cart_id:a.cart_id,status:e}),"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},null,8,["model-value","disabled","onUpdate:modelValue"]),n("div",K,[n("img",{src:a.thumbnail,alt:a.name,class:"img-fluid size-80px rounded",onError:e[1]||(e[1]=e=>t.imageFallback(e))},null,40,Y)]),n("div",Z,[n("div",tt,u(a.name),1),a.combinations.length>0?(s(),l("div",et,[(s(!0),l(i,null,r(a.combinations,(t,e)=>(s(),l("span",{key:e,class:"me-2"},[n("span",at,u(t.attribute)+":",1),n("span",st,u(t.value),1)]))),128))])):m("",!0),a.outOfStock?(s(),o(k,{key:1,color:"red",size:"x-small",class:"white-text"},{default:c(()=>[d(u(y.getTranslation("out_of_stock","Hết Hàng")),1)]),_:1})):m("",!0)]),n("div",lt,[a.regular_price>a.dicounted_price?(s(),l("del",it,u(t.format_price(a.regular_price)),1)):m("",!0),n("div",rt,u(t.format_price(a.dicounted_price)),1)]),n("div",ot,[g(b,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:a.qty<=1||a.outOfStock,onClick:e=>t.updateQuantity({type:"minus",cart_id:a.cart_id})},{default:c(()=>[...e[6]||(e[6]=[n("i",{class:"las la-minus"},null,-1)])]),_:2},1032,["disabled","onClick"]),n("span",ct,u(a.qty),1),g(b,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:a.outOfStock,onClick:e=>t.updateQuantity({type:"plus",cart_id:a.cart_id})},{default:c(()=>[...e[7]||(e[7]=[n("i",{class:"las la-plus"},null,-1)])]),_:2},1032,["disabled","onClick"])]),n("div",nt,[n("div",dt,u(t.format_price(a.dicounted_price*a.qty)),1)]),n("div",null,[g(b,{icon:"",variant:"text",size:"small",onClick:e=>t.removeFromCart(a.cart_id)},{default:c(()=>[...e[8]||(e[8]=[n("i",{class:"las la-trash fs-18 opacity-70"},null,-1)])]),_:2},1032,["onClick"])])],2))),128)),n("div",ut,[g(x,{"shop-id":a.id},null,8,["shop-id"])])]))),128)):(s(),l(i,{key:1},[(s(!0),l(i,null,r(t.getCartProducts,(a,h)=>(s(),l("div",{key:a.cart_id,class:p(["d-flex align-center pa-3 border-top",{"opacity-50":a.outOfStock}])},[g(v,{"model-value":a.selected,disabled:a.outOfStock,"onUpdate:modelValue":e=>t.toggleCartItem({cart_id:a.cart_id,status:e}),"hide-details":"",class:"mt-0",color:"primary"},null,8,["model-value","disabled","onUpdate:modelValue"]),n("div",mt,[n("img",{src:a.thumbnail,alt:a.name,class:"img-fluid size-80px rounded",onError:e[2]||(e[2]=e=>t.imageFallback(e))},null,40,pt)]),n("div",gt,[n("div",ht,u(a.name),1),a.combinations.length>0?(s(),l("div",ft,[(s(!0),l(i,null,r(a.combinations,(t,e)=>(s(),l("span",{key:e,class:"me-2"},[n("span",_t,u(t.attribute)+":",1),n("span",yt,u(t.value),1)]))),128))])):m("",!0),a.outOfStock?(s(),o(k,{key:1,color:"red",size:"x-small",class:"white-text"},{default:c(()=>[d(u(t.$t("out_of_stock")||"Hết Hàng"),1)]),_:1})):m("",!0)]),n("div",vt,[a.regular_price>a.dicounted_price?(s(),l("del",kt,u(t.format_price(a.regular_price)),1)):m("",!0),n("div",Ct,u(t.format_price(a.dicounted_price)),1)]),n("div",bt,[g(b,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:a.qty<=1||a.outOfStock,onClick:e=>t.updateQuantity({type:"minus",cart_id:a.cart_id})},{default:c(()=>[...e[9]||(e[9]=[n("i",{class:"las la-minus"},null,-1)])]),_:2},1032,["disabled","onClick"]),n("span",xt,u(a.qty),1),g(b,{color:"primary",size:"small",variant:"outlined",icon:"",disabled:a.outOfStock,onClick:e=>t.updateQuantity({type:"plus",cart_id:a.cart_id})},{default:c(()=>[...e[10]||(e[10]=[n("i",{class:"las la-plus"},null,-1)])]),_:2},1032,["disabled","onClick"])]),n("div",wt,[n("div",St,u(t.format_price(a.dicounted_price*a.qty)),1)]),n("div",null,[g(b,{icon:"",variant:"text",size:"small",onClick:e=>t.removeFromCart(a.cart_id)},{default:c(()=>[...e[11]||(e[11]=[n("i",{class:"las la-trash fs-18 opacity-70"},null,-1)])]),_:2},1032,["onClick"])])],2))),128)),n("div",Tt,[g(x)])],64))])):(s(),l("div",Ot,[n("img",{class:"img-fluid mb-4",src:t.static_asset("/assets/img/no-cart-item.jpg"),alt:"Empty cart"},null,8,Pt),n("div",Vt,u(y.getTranslation("your_shopping_bag_is_empty_start_shopping","Giỏ hàng của bạn đang trống. Bắt đầu mua sắm.")),1),g(b,{color:"primary",large:"",onClick:e[3]||(e[3]=e=>t.$router.push({name:"Home"}))},{default:c(()=>[d(u(y.getTranslation("continue_shopping","Tiếp Tục Mua Sắm")),1)]),_:1})])),y.hasCartItems?(s(),l("div",It,[g(S,null,{default:c(()=>[g(w,{cols:"12",md:"8"},{default:c(()=>[n("div",zt,[g(v,{"model-value":y.allSelected,"onUpdate:modelValue":y.toggleAllItems,"hide-details":"",class:"mt-0",color:"primary","true-icon":"las la-check"},{label:c(()=>[n("span",qt,u(y.getTranslation("select_all","Chọn Tất Cả"))+" ("+u(t.getCartCount)+") ",1)]),_:1},8,["model-value","onUpdate:modelValue"]),g(b,{variant:"text",size:"small",onClick:y.removeSelected},{default:c(()=>[d(u(y.getTranslation("delete","Xóa")),1)]),_:1},8,["onClick"]),g(b,{variant:"text",size:"small",onClick:y.saveToWishlist},{default:c(()=>[d(u(y.getTranslation("save_to_wishlist","Lưu vào mục Đã thích")),1)]),_:1},8,["onClick"])])]),_:1}),g(w,{cols:"12",md:"4"},{default:c(()=>[n("div",Ut,[n("div",Ft,[n("span",Mt,u(y.getTranslation("total","Tổng cộng"))+" ("+u(y.getSelectedCount)+" "+u(y.getTranslation("product","sản phẩm"))+"): ",1)]),n("div",$t,u(t.format_price(t.getCartPrice-t.getTotalCouponDiscount)),1),t.getTotalCouponDiscount>0?(s(),l("div",Et,u(y.getTranslation("saved","Tiết kiệm"))+" "+u(t.format_price(t.getTotalCouponDiscount)),1)):m("",!0),g(b,{color:"primary",size:"large",block:"",elevation:"0",onClick:y.goToCheckout,disabled:t.getCartPrice<=0},{default:c(()=>[d(u(y.getTranslation("buy_now","Mua Hàng")),1)]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1})])):m("",!0)]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-84ca35d0"]]);export{jt as default};
