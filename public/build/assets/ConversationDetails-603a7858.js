import{_ as w,a as b,b as y,h as n,o as i,i as r,k as s,t as a,j as l,w as d,F as c,p as u,D as k,n as D,v as q}from"./app-65cf1f07.js";const C={data:()=>({loading:!0,sending:!1,conversation:null,v$:b(),form:{message:"",conversation_id:null}}),created(){this.getDetails(this.$route.params.slug),window.intervalCall=setInterval(()=>{this.getDetails(this.$route.params.slug)},8*1e3)},validations:{form:{message:{required:y}}},computed:{messageErrors(){const e=[];return this.v$.form.message.$dirty&&!this.v$.form.message.required&&e.push(this.$i18n.t("this_field_is_required")),e}},methods:{async getDetails(e){const t=await this.call_api("get",`user/querries/${e}`);if(t.data.success)this.conversation=t.data.data,this.form.conversation_id=t.data.data.id,this.loading=!1;else{this.snack({message:t.data.message,color:"red"});return}},async addNewMessage(){if(!await this.v$.$validate())return;this.sending=!0;const t=await this.call_api("post","user/new-message-query",this.form);t.data.success?(this.conversation=t.data.data,this.snack({message:t.data.message}),this.resetData()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.sending=!1},resetData(){this.form.message="",this.form.conversation_id=this.conversation.id,this.v$.form.$reset()}}},V={class:"ps-lg-7 pt-4"},F={class:"fs-24 fw-700 opacity-80 mb-5 mt-3"},N={key:0},B={class:"text-center"},z={key:1},E={class:"px-3 py-3 mb-3 border-bottom"},S={class:"col-sm-12 pb-0 pb-md-2"},j={class:"d-flex align-center"},I=["src"],L={class:"ml-3"},T={class:"col-sm-12"},U={class:"d-flex align-center"},A={class:"mb-3"},G={class:"mb-1 fs-13 fw-500"},H={class:"text-right mt-4"};function J(e,t,K,M,O,v){const h=n("v-avatar"),_=n("v-textarea"),g=n("v-btn"),p=n("v-form"),f=n("v-card");return i(),r("div",V,[s("h1",F,a(e.$t("query_with"))+" "+a(e.conversation&&e.conversation.receiver_shop),1),e.loading?(i(),r("div",N,[s("div",B,[s("div",null,a(e.$t("loading_please_wait")),1)])])):(i(),r("div",z,[l(f,null,{default:d(()=>[s("h4",E," #"+a(e.conversation.title)+" ( Between you & "+a(e.conversation.receiver_shop)+" )",1),(i(!0),r(c,null,u(e.conversation.messages,(o,m)=>(i(),r("div",{key:m,class:k(["row mx-4 align-center py-2",{"border-bottom":m+1!=e.conversation.messages.length}])},[s("div",S,[s("div",j,[l(h,{size:"60"},{default:d(()=>[s("img",{src:o.user_image,class:"border border-4",onError:t[0]||(t[0]=$=>e.imageFallback($))},null,40,I)]),_:2},1024),s("div",L,[s("h5",null,a(o.user_name),1),s("div",null,a(o.created_at),1)])])]),s("div",T,[s("div",U,[s("div",null,[s("div",null,a(o.message),1)])])])],2))),128)),l(p,{"lazy-validation":"",autocomplete:"chrome-off",class:"px-3 py-5",onSubmit:t[2]||(t[2]=D(o=>v.addNewMessage(),["prevent"]))},{default:d(()=>[s("div",A,[s("div",G,a(e.$t("message")),1),l(_,{modelValue:e.form.message,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.message=o),placeholder:e.$t("message"),"hide-details":"auto",rows:"4",required:"",variant:"outlined"},null,8,["modelValue","placeholder"]),(i(!0),r(c,null,u(e.v$.form.message.$errors,o=>(i(),r("p",{key:o.$uid,class:"text-red"},a(o.$message),1))),128))]),s("div",H,[l(g,{elevation:"0",type:"submit",color:"primary",loading:e.sending},{default:d(()=>[q(a(e.$t("send")),1)]),_:1},8,["loading"])])]),_:1})]),_:1})]))])}const Q=w(C,[["render",J]]);export{Q as default};
