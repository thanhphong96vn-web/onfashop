import{_ as e,a as s,c as a,r as t,e as o,b as i,y as l,m as r,h as d,o as n,i as m,j as u,w as p,k as h,t as c,n as f,F as v,p as _,q as w,s as g,v as b}from"./app-0e743bd7.js";const $={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},v$:s(),form:{email:"",code:"",password:"",confirmPassword:"",invalidPhone:!0,showInvalidPhone:!1},resetWith:"email",loading:!1}),components:{VueTelInput:a},validations:{form:{email:{requiredIf:t(function(){return"email"==this.resetWith}),email:o},phone:{requiredIf:t(function(){return"phone"==this.resetWith})},code:{required:i},password:{required:i,minLength:l(6)},confirmPassword:{required:i}}},computed:{...r("app",["availableCountries"]),...r("auth",["authSettings"])},methods:{phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async resetPassword(){if(!(await this.v$.$validate()))return;if("phone"==this.resetWith&&this.form.invalidPhone)return void(this.form.showInvalidPhone=!0);this.form.code=this.form.code.replace(/\s/g,""),this.loading=!0;const e=await this.call_api("post","auth/password/reset",this.form);e.data.success?(this.$router.push({name:"Login"}),this.snack({message:e.data.message})):this.snack({message:e.data.message,color:"red"}),this.loading=!1}},created(){this.$route.params.email&&(this.form.email=this.$route.params.email),this.$route.params.phone?(this.form.phone=this.$route.params.phone,this.resetWith="phone"):("phone"==this.authSettings.customer_login_with||"email_phone"==this.authSettings.customer_login_with&&"phone"==this.authSettings.customer_otp_with)&&(this.resetWith="phone")}},y={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},x={key:0,class:"text-info mb-3"},V={key:1,class:"text-info mb-3"},k={class:"text-uppercase lh-1 mb-4 d-flex"},P={class:"display-1 text-primary fw-900"},q={class:"d-block display-1 fw-900 grey--text text--darken-3 ml-2"},I={key:2,class:"fs-16 fw-500 mb-6"},W={key:3,class:"fs-16 fw-500 mb-6"},C={key:0,class:"mb-4"},S={class:"mb-1 fs-13 fw-500"},U={key:1,class:"mb-4"},D={class:"mb-1 fs-13 fw-500"},F={key:0,class:"v-text-field__details mt-2 pl-3"},L={class:"v-messages theme--light error--text",role:"alert"},O={class:"v-messages__wrapper"},j={class:"v-messages__message"},z={key:1,class:"v-text-field__details mt-2 pl-3"},T={class:"v-messages theme--light error--text",role:"alert"},A={class:"v-messages__wrapper"},B={class:"v-messages__message"},E={class:"mb-4"},G={class:"mb-1 fs-13 fw-500"},H={class:"mb-4"},J={class:"mb-1 fs-13 fw-500"},K={class:"mb-4"},M={class:"mb-1 fs-13 fw-500"};const N=e($,[["render",function(e,s,a,t,o,i){const l=d("v-text-field"),r=d("vue-tel-input"),$=d("v-otp-input"),N=d("v-btn"),Q=d("v-form"),R=d("v-col"),X=d("v-row"),Y=d("v-container");return n(),m("div",null,[u(Y,null,{default:p(()=>[u(X,null,{default:p(()=>[u(R,{cols:"12",lg:"6",md:"8",sm:"10",class:"mx-auto"},{default:p(()=>[h("div",y,["email"==e.resetWith?(n(),m("div",x,c(e.$t("a_verification_code_has_been_sent_to_your_email")),1)):(n(),m("div",V,c(e.$t("a_verification_code_has_been_sent_to_your_phone_number")),1)),h("h1",k,[h("span",P,c(e.$t("reset")),1),h("span",q,c(e.$t("password")),1)]),"email"==e.resetWith?(n(),m("div",I,c(e.$t("enter_your_email_address_code__new_password")),1)):(n(),m("div",W,c(e.$t("enter_your_phone_number_code__new_password")),1)),u(Q,{ref:"loginForm","lazy-validation":"",onSubmit:s[5]||(s[5]=f(e=>i.resetPassword(),["prevent"]))},{default:p(()=>["email"==e.resetWith?(n(),m("div",C,[h("div",S,c(e.$t("email")),1),u(l,{variant:"plain",class:"text-field",modelValue:e.form.email,"onUpdate:modelValue":s[0]||(s[0]=s=>e.form.email=s),placeholder:e.$t("email_address"),type:"email","hide-details":"auto",required:"",outlined:""},null,8,["modelValue","placeholder"]),(n(!0),m(v,null,_(e.v$.form.email.$errors,e=>(n(),m("p",{key:e.$uid,class:"text-red"},c(e.$message),1))),128))])):w("",!0),"phone"==e.resetWith?(n(),m("div",U,[h("div",D,c(e.$t("phone_number")),1),u(r,g({modelValue:e.form.phone,"onUpdate:modelValue":s[1]||(s[1]=s=>e.form.phone=s)},e.mobileInputProps,{"only-countries":e.availableCountries,onValidate:i.phoneValidate}),{"arrow-icon":p(()=>[...s[6]||(s[6]=[h("span",{class:"vti__dropdown-arrow"}," ▼",-1)])]),_:1},16,["modelValue","only-countries","onValidate"]),e.v$.form.phone.$error?(n(),m("div",F,[h("div",L,[h("div",O,[h("div",j,c(e.$t("this_field_is_required")),1)])])])):w("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(n(),m("div",z,[h("div",T,[h("div",A,[h("div",B,c(e.$t("phone_number_must_be_valid")),1)])])])):w("",!0)])):w("",!0),h("div",E,[h("div",G,c(e.$t("code")),1),u($,{modelValue:e.form.code,"onUpdate:modelValue":s[2]||(s[2]=s=>e.form.code=s),length:"6",type:"number","hide-details":"auto",disabled:e.loading,required:""},null,8,["modelValue","disabled"])]),h("div",H,[h("div",J,c(e.$t("password")),1),u(l,{variant:"plain",modelValue:e.form.password,"onUpdate:modelValue":s[3]||(s[3]=s=>e.form.password=s),placeholder:"* * * * * * * *",type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"])]),(n(!0),m(v,null,_(e.v$.form.password.$errors,e=>(n(),m("p",{key:e.$uid,class:"text-red"},c(e.$message),1))),128)),h("div",K,[h("div",M,c(e.$t("confirm_password")),1),u(l,{variant:"plain",modelValue:e.form.confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=s=>e.form.confirmPassword=s),placeholder:"* * * * * * * *",type:"password",class:"input-group--focused text-field","hide-details":"auto",required:"",outlined:""},null,8,["modelValue"]),(n(!0),m(v,null,_(e.v$.form.confirmPassword.$errors,e=>(n(),m("p",{key:e.$uid,class:"text-red"},c(e.$message),1))),128))]),u(N,{"x-large":"",class:"px-12 mb-4",elevation:"0",type:"submit",color:"primary",loading:e.loading,disabled:e.loading,onClick:i.resetPassword},{default:p(()=>[b(c(e.$t("reset_password")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},512)])]),_:1})]),_:1})]),_:1})])}]]);export{N as default};
