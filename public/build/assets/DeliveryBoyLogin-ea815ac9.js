import{u as F,a as q,c as U,r as w,e as D,b as T,m as v,l as L,d as B,f as p,g as y,_ as S,h as l,o as r,i as n,j as a,w as d,k as t,t as i,n as A,F as $,p as b,q as m,s as E,v as N}from"./app-41f27463.js";const{verifyRecaptcha:R}=F(),M={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},showPhoneField:!1,v$:q(),form:{phone:"",email:"",password:"",invalidPhone:!0,showInvalidPhone:!1},passwordShow:!1,loading:!1}),components:{VueTelInput:U},validations:{form:{email:{requiredIf:w(function(){return this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"&&!this.showPhoneField}),email:D},phone:{requiredIf:w(function(){return this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.showPhoneField})},password:{required:T}}},computed:{...v("app",["generalSettings","availableCountries","demoMode","banners"]),...v("cart",["getTempUserId"]),...v("auth",["authSettings","currentUser"]),emailErrors(){const e=[];return this.v$.form.email.$dirty&&(!this.v$.form.email.requiredIf&&e.push(this.$i18n.t("this_field_is_required")),!this.v$.form.email.email&&e.push(this.$i18n.t("this_field_is_required_a_valid_email"))),e},passwordErrors(){const e=[];return this.v$.form.password.$dirty&&!this.v$.form.password.required&&e.push(this.$i18n.t("this_field_is_required")),e}},async mounted(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_delivery_boy_login)try{await L(""),this.recaptchaReady=!0,console.log("reCAPTCHA ready!")}catch(e){console.error(e)}},beforeUnmount(){B()},methods:{...p("auth",{actionLogin:"login"}),...p("app",["fetchProductQuerries"]),...p("wishlist",["fetchWislistProducts"]),...p("cart",["fetchCartProducts"]),...y("cart",["removeTempUserId"]),...y("auth",["updateChatWindow","showLoginDialog"]),phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},...p(["auth/logout"]),async login(){if(this.generalSettings.google_recaptcha&&this.generalSettings.recaptcha_delivery_boy_login){const u=await R("register-shop");if(!u.success){this.snack({message:u.message,color:"red"});return}}if(!await this.v$.$validate())return;if((this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.showPhoneField)&&this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.getTempUserId&&(this.form.temp_user_id=this.getTempUserId),this.form.phone=this.form.phone.replace(/\s/g,""),this.form.form_type="delivery_boy",this.loading=!0;const s=await this.call_api("post","auth/login",this.form);s.data.success?(s.data.verified==!0||this.authSettings.customer_otp_with=="disabled"?(this.getTempUserId&&this.removeTempUserId(),this.actionLogin(s.data),this.showLoginDialog(!1),this.updateChatWindow(!1),this.fetchWislistProducts(),this.fetchProductQuerries(),this.fetchCartProducts(),this.$router.push(this.$route.query.redirect||{name:"DeliveryBoyDashboard"})):this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="email"?this.$router.push({name:"VerifyAccount",params:{email:this.form.email}}):this.$router.push({name:"VerifyAccount",params:{phone:this.form.phone}}),this.snack({message:s.data.message})):this.snack({message:s.data.message,color:"red"}),this.loading=!1}},created(){this.demoMode&&(this.form.email="deliveryboy@example.com",this.form.password="123456")}},W={class:"rounded-lg pa-5 border border-gray-200 overflow-hidden white shadow-light"},O={class:"px-lg-7"},z={class:"text-uppercase lh-1 mb-6"},Q={class:"opacity-50 fs-22 fw-400"},j={class:"d-block display-1 fw-900 primary-text"},G={class:"opacity-50 fs-22 fw-400"},H={key:0,class:"mb-4"},J={class:"mb-1 fs-13 fw-500"},K={key:0,class:"text-end font-italic fs-12 opacity-70"},X={key:1,class:"mb-4"},Y={class:"mb-1 fs-13 fw-500"},Z={key:0,class:"v-text-field__details mt-2 pl-3"},x={class:"v-messages theme-light error-text",role:"alert"},ee={class:"v-messages__wrapper"},se={class:"v-messages__message"},te={key:1,class:"v-text-field__details mt-2 pl-3"},oe={class:"v-messages theme-light error-text",role:"alert"},ie={class:"v-messages__wrapper"},ae={class:"v-messages__message"},re={key:2,class:"text-end font-italic fs-12 opacity-70"},ne={class:"mb-1 fs-13 fw-500"};function le(e,s,u,P,C,h){const f=l("banner"),c=l("v-col"),_=l("v-text-field"),g=l("vue-tel-input"),V=l("v-btn"),k=l("v-form"),I=l("v-row");return r(),n("div",W,[a(I,{"no-gutters":"",align:"center"},{default:d(()=>[a(c,{cols:"12",lg:"6",order:"2","order-lg":"1",class:""},{default:d(()=>[a(f,{loading:!1,banner:e.$store.getters["app/banners"].delivery_boy_login_page,class:"mt-5 mt-lg-0"},null,8,["banner"])]),_:1}),a(c,{cols:"12",order:"1","order-lg":"2",lg:"6"},{default:d(()=>[t("div",O,[t("h1",z,[t("span",Q,i(e.$t("delivery_boy_login_page")),1),t("span",j,i(e.$store.getters["app/appName"]),1),t("span",G,i(e.$t("account")),1)]),a(k,{ref:"loginForm","lazy-validation":"",onSubmit:s[6]||(s[6]=A(o=>h.login(),["prevent"]))},{default:d(()=>[e.authSettings.customer_login_with=="email"||!e.showPhoneField&&e.authSettings.customer_login_with=="email_phone"?(r(),n("div",H,[t("div",J,i(e.$t("email")),1),a(_,{modelValue:e.form.email,"onUpdate:modelValue":s[0]||(s[0]=o=>e.form.email=o),placeholder:e.$t("email_address"),type:"text","error-messages":h.emailErrors,"hide-details":"auto",required:"",variant:"plain",class:"text-field"},null,8,["modelValue","placeholder","error-messages"]),(r(!0),n($,null,b(e.v$.form.email.$errors,o=>(r(),n("p",{key:o.$uid,class:"text-red"},i(o.$message),1))),128)),e.authSettings.customer_login_with=="email_phone"?(r(),n("div",K,[t("span",{class:"primary-text c-pointer",onClick:s[1]||(s[1]=o=>e.showPhoneField=!e.showPhoneField)},i(e.$t("use_phone_instead")),1)])):m("",!0)])):m("",!0),e.authSettings.customer_login_with=="phone"||e.showPhoneField&&e.authSettings.customer_login_with=="email_phone"?(r(),n("div",X,[t("div",Y,i(e.$t("phone_number")),1),a(g,E({modelValue:e.form.phone,"onUpdate:modelValue":s[2]||(s[2]=o=>e.form.phone=o)},e.mobileInputProps,{"only-countries":e.availableCountries,onValidate:h.phoneValidate}),{"arrow-icon":d(()=>[...s[7]||(s[7]=[t("span",{class:"vti__dropdown-arrow"}," ▼",-1)])]),_:1},16,["modelValue","only-countries","onValidate"]),e.v$.form.phone.$error?(r(),n("div",Z,[t("div",x,[t("div",ee,[t("div",se,i(e.$t("this_field_is_required")),1)])])])):m("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(r(),n("div",te,[t("div",oe,[t("div",ie,[t("div",ae,i(e.$t("phone_number_must_be_valid")),1)])])])):m("",!0),e.authSettings.customer_login_with=="email_phone"?(r(),n("div",re,[t("span",{class:"primary-text c-pointer",onClick:s[3]||(s[3]=o=>e.showPhoneField=!e.showPhoneField)},i(e.$t("use_phone_instead")),1)])):m("",!0)])):m("",!0),t("div",null,[t("div",ne,i(e.$t("password")),1),a(_,{modelValue:e.form.password,"onUpdate:modelValue":s[4]||(s[4]=o=>e.form.password=o),placeholder:"* * * * * * * *","error-messages":h.passwordErrors,type:e.passwordShow?"text":"password","append-icon":e.passwordShow?"las la-eye":"las la-eye-slash",class:"input-group-focused text-field","hide-details":"auto",required:"",variant:"plain","onClick:append":s[5]||(s[5]=o=>e.passwordShow=!e.passwordShow)},null,8,["modelValue","error-messages","type","append-icon"]),(r(!0),n($,null,b(e.v$.form.password.$errors,o=>(r(),n("p",{key:o.$uid,class:"text-red"},i(o.$message),1))),128))]),a(V,{style:{color:"#fff !important"},size:"x-large",class:"px-16 mb-4 mt-2",elevation:"0",type:"submit",color:"primary",loading:e.loading,disabled:e.loading,onClick:h.login},{default:d(()=>[N(i(e.$t("login")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},512)])]),_:1})]),_:1})])}const de=S(M,[["render",le]]),he={components:{DeliveryBoyLoginForm:de}};function me(e,s,u,P,C,h){const f=l("delivery-boy-login-form"),c=l("v-col"),_=l("v-row"),g=l("v-container");return r(),n("div",null,[a(g,null,{default:d(()=>[a(_,null,{default:d(()=>[a(c,{xl:"10",class:"mx-auto my-5 my-lg-16"},{default:d(()=>[a(f)]),_:1})]),_:1})]),_:1})])}const ue=S(he,[["render",me]]);export{ue as default};
