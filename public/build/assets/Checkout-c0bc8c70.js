import{_ as e,m as t,f as s,h as a,o as l,z as i,w as d,j as o,B as r,k as c,C as n,v as p,t as h,q as m,i as u,F as y,p as g,D as f,n as v,A as _,E as b}from"./app-5a177a8d.js";import{A as k}from"./AddressDialog-7e3e20d7.js";import{C as x}from"./CouponForm-e90adf55.js";import{R as w}from"./RechargeDialog-a485c5b1.js";import{F as P}from"./FailedDialog-e0d7a098.js";import{P as C}from"./Payment-daccfa42.js";const D={head:{title:"Checkout Page"},name:"AizShopCheckout",components:{},data:()=>({for_pickup:!0,selectedPickupPoint:null,checkbox:!1,checkoutLoading:!1,selectedShippingAddressId:null,selectedBillingAddressId:null,selectedPaymentMethod:null,selectedDeliveryOption:"standard",selectedDeliveryType:"home_delivery",standardDeliveryCost:0,expressDeliveryCost:0,addDialogShow:!1,showAddressSelection:!1,addressSelectedForEdit:{},rechargeDialogShow:!1,transactionId:null,receipt:null,orderNote:"",authorizeNet:{card_number:"",cvv:"",expiration_month:"",expiration_year:""},address:[],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateloop:[]}),components:{AddressDialog:k,RechargeDialog:w,Payment:C,FailedDialog:P,CouponForm:x},computed:{...t("app",["generalSettings","appUrl","paymentMethods","offlinePaymentMethods","demoMode"]),...t("address",["getAddresses","getDefaultShippingAddress","getDefaultBillingAddress"]),...t("cart",["getCartPrice","getTotalCouponDiscount","getCartClubPoints","getCartTax","getCartShops","getStandardTime","getExpressTime","getAllCouponCodes","getSelectedCartIds","checkShopMinOrder","getIsDigital","getPickupPoints","getCartProducts","getIsPickup"]),...t("auth",["currentUser"]),totalPrice(){return"home_delivery"==this.selectedDeliveryType?"standard"===this.selectedDeliveryOption?this.getCartPrice-this.getTotalCouponDiscount+this.standardDeliveryCost*this.getCartShops.length:this.getCartPrice-this.getTotalCouponDiscount+this.expressDeliveryCost*this.getCartShops.length:this.getCartPrice-this.getTotalCouponDiscount}},methods:{getProductPrice(e){const t=e.dicounted_price||e.discounted_price||e.regular_price||e.price||0;return parseFloat(t)||0},formatVariation:e=>e&&Array.isArray(e)?e.map(e=>"string"==typeof e?e:e.attribute_value_name||e.value||"").filter(Boolean).join(", "):"",imageFallback(e){const t=this.static_asset("/assets/img/placeholder.jpg");e.target.src!==t&&(e.target.src=t)},...s("cart",["resetCoupon","removeMultipleFromCart","fetchCartProducts","fetchPickupPoints"]),...s("address",["fetchAddresses"]),...s("auth",["rechargeWallet","deductFromWallet"]),async checkForPickUp(e){this.getCartProducts.map(e=>{if(0==e.for_pickup)return this.selectedPickupPoint=null,this.for_pickup=!1,void this.snack({message:"One or more items in the cart are not available for pickup",color:"red"});this.for_pickup=!0}),this.selectedDeliveryType=e},ChooseDeleviryType(e){this.selectedDeliveryType=e},addressDialogClosed(){this.addressSelectedForEdit={},this.addDialogShow=!1,1==this.getAddresses.length&&(this.selectedShippingAddressId=this.getAddresses[0].id,this.selectedBillingAddressId=this.getAddresses[0].id,this.getShippingCost(this.getAddresses[0].id))},editAddress(e){this.addressSelectedForEdit=e,this.addDialogShow=!0},rechargeDialogClosed(){this.rechargeDialogShow=!1},paymentSelected(e,t){this.selectedPaymentMethod=t},walletSelected(){this.currentUser.balance>=this.totalPrice?this.selectedPaymentMethod={code:"wallet"}:this.snack({message:"You don't have enough wallet balance. Please recharge.",color:"red"})},shippingAddressSelected(e){this.getShippingCost(e)},selectShippingAddress(e){this.selectedShippingAddressId=e,this.selectedBillingAddressId=e,this.getShippingCost(e)},async getShippingCost(e){const t=await this.call_api("get",`checkout/get-shipping-cost/${e}`);this.selectedDeliveryOption=t.data.success?"standard":"",this.standardDeliveryCost=parseFloat(t.data.standard_delivery_cost),this.expressDeliveryCost=parseFloat(t.data.express_delivery_cost)},async proceedCheckout(){if(this.demoMode)return void this.snack({message:"Data chaning action is not allowed in demo mode.",color:"red"});if(!this.checkbox)return void this.snack({message:"You need to agree with our policies",color:"red"});if(0==this.getSelectedCartIds.length)return void this.snack({message:"Please select a cart product",color:"red"});if("home_delivery"==this.selectedDeliveryType&&0==this.getAddresses.length)return void this.snack({message:"Please add a delivery address",color:"red"});if("home_delivery"===this.selectedDeliveryType&&!this.selectedShippingAddressId)return void this.snack({message:"Please select a delivery address",color:"red"});if(!this.selectedBillingAddressId)return void this.snack({message:"Please select a billing address",color:"red"});if(""===this.selectedDeliveryType)return void this.snack({message:"Please select delivery type at first",color:"red"});if("pickup"===this.selectedDeliveryType&&0==this.for_pickup)return void this.snack({message:"One or more items in the cart are not available for pickup",color:"red"});if("pickup"===this.selectedDeliveryType&&null==this.selectedPickupPoint)return void this.snack({message:"Please select a pick up point",color:"red"});if("home_delivery"===this.selectedDeliveryType&&""===this.selectedDeliveryOption)return void this.snack({message:"Sorry, delivery is not available in this shipping address.",color:"red"});if(!this.selectedPaymentMethod)return void this.snack({message:"Please select a payment method",color:"red"});if(this.selectedPaymentMethod&&this.selectedPaymentMethod.code.includes("offline_payment")&&null===this.transactionId)return void this.snack({message:this.$i18n.t("please_input_transaction_id"),color:"red"});if(!this.checkShopMinOrder.success)return void this.snack({message:this.checkShopMinOrder.message,color:"red"});let e=new FormData;if(e.append("shipping_address_id",this.selectedShippingAddressId),e.append("billing_address_id",this.selectedBillingAddressId),e.append("payment_type",this.selectedPaymentMethod.code),e.append("delivery_type",this.selectedDeliveryOption),e.append("type_of_delivery",this.selectedDeliveryType),e.append("pickup_point_id",this.selectedPickupPoint),this.getSelectedCartIds.forEach((t,s)=>{e.append("cart_item_ids[]",t)}),this.getAllCouponCodes.forEach((t,s)=>{e.append("coupon_codes[]",t)}),e.append("transactionId",this.transactionId),e.append("receipt",this.receipt),this.getCartPrice>0){this.checkoutLoading=!0;const t=await this.call_api("post","checkout/order/store",e,!0);t.data.success?("wallet"==t.data.payment_method&&this.deductFromWallet(t.data.grand_total),t.data.go_to_payment?this.$refs.makePayment.pay({requestedFrom:"/checkout",paymentAmount:0,paymentMethod:t.data.payment_method,paymentType:"cart_payment",userId:this.currentUser.id,oderCode:t.data.order_code,card_number:this.authorizeNet.card_number,cvv:this.authorizeNet.cvv,expiration_month:this.authorizeNet.expiration_month,expiration_year:this.authorizeNet.expiration_year}):this.$router.push({name:"OrderConfirmed",query:{orderCode:t.data.order_code}}).catch(()=>{}),setTimeout(()=>{this.resetCoupon(),this.removeMultipleFromCart(this.getSelectedCartIds)},2e3)):this.snack({message:t.data.message,color:"red"}),this.checkoutLoading=!1}}},async created(){await this.fetchPickupPoints(),await this.fetchAddresses(),this.selectedShippingAddressId=this.getDefaultShippingAddress.id,this.selectedBillingAddressId=this.getDefaultBillingAddress.id,this.getShippingCost(this.selectedShippingAddressId);let e=[],t=(new Date).getFullYear();for(;t<=(new Date).getFullYear()+15;t++)e.push(t);this.dateLoop=e},mounted(){this.$route.query.cart_payment&&this.$route.query.order_code&&("success"==this.$route.query.cart_payment?(this.$router.push({name:"OrderConfirmed",query:{orderCode:this.$route.query.order_code}}).catch(()=>{}),this.snack({message:"Payment successful!"})):"failed"==this.$route.query.cart_payment&&this.$refs.failedPayment.open({orderCode:this.$route.query.order_code,paymentMethod:this.$route.query.payment_method})),this.rechargeWallet(this.$route.query.wallet_payment),this.fetchCartProducts()}},$={class:"delivery-type-selection mb-3"},S={key:0},M={key:0,class:"address-section bg-white rounded pa-4 mb-3"},A={class:"d-flex align-center mb-3"},T={class:"fs-16 fw-600 mb-0 primary--text"},I={class:"d-flex align-start"},V={class:"flex-grow-1"},F={class:"fw-600 mb-1"},q={class:"ms-2 opacity-80"},z={class:"opacity-80 fs-14"},j={class:"d-flex gap-2 ms-3"},U=["onClick"],O={class:"d-flex align-start"},N={class:"flex-grow-1"},B={class:"fw-600 mb-1"},L={class:"ms-2"},E={class:"opacity-80 fs-14"},W={key:1},Y=["value","checked"],J={class:"products-section bg-white rounded pa-4 mb-3"},R={class:"products-header d-none d-sm-flex pa-3 grey lighten-4 rounded mb-2"},H={class:"flex-grow-1",style:{flex:"1"}},X={class:"text-center",style:{width:"120px"}},G={class:"text-center",style:{width:"100px"}},K={class:"text-end",style:{width:"120px"}},Q={class:"d-flex align-start flex-grow-1",style:{flex:"1"}},Z=["src"],ee={class:"fw-500 mb-1"},te={key:0,class:"fs-12 grey--text"},se={class:"text-center d-none d-sm-block",style:{width:"120px"}},ae={class:"opacity-80"},le={class:"text-center d-none d-sm-block",style:{width:"100px"}},ie={class:"text-end d-none d-sm-block",style:{width:"120px"}},de={class:"fw-600 primary--text"},oe={class:"d-flex d-sm-none flex-column align-end ms-auto"},re={class:"fw-600 primary--text mb-1"},ce={class:"fs-12 opacity-80"},ne={key:0,class:"voucher-section pa-3 mb-2"},pe={class:"d-flex align-center"},he={class:"flex-grow-1"},me={key:1,class:"delivery-option-section pa-3"},ue={class:"d-flex align-center mb-2"},ye={class:"fw-600"},ge={key:0,class:"delivery-options"},fe={class:"d-flex flex-wrap gap-2"},ve={class:"flex-grow-1"},_e={class:"fw-600"},be={class:"fs-13 opacity-80"},ke={class:"flex-grow-1"},xe={class:"fw-600"},we={class:"fs-13 opacity-80"},Pe={key:1,class:"error--text pa-3"},Ce={class:"message-section pa-3 border-top"},De={class:"d-flex align-center"},$e={class:"opacity-80 me-3",style:{"min-width":"80px"}},Se={class:"order-summary-section bg-white rounded pa-4 mb-3"},Me={key:0,class:"d-flex justify-space-between align-center pa-2"},Ae={class:"opacity-80"},Te={class:"fw-600 primary--text"},Ie={class:"summary-rows"},Ve={class:"d-flex justify-space-between align-center pa-2"},Fe={class:"opacity-80"},qe={class:"d-flex justify-space-between align-center pa-2"},ze={class:"opacity-80"},je={class:"d-flex justify-space-between align-center pa-2"},Ue={class:"opacity-80"},Oe={key:0,class:"d-flex justify-space-between align-center pa-2"},Ne={class:"opacity-80"},Be={class:"error--text"},Le={class:"d-flex justify-space-between align-center pa-2"},Ee={class:"fs-16 fw-600"},We={class:"fs-20 fw-700 primary--text"},Ye={class:"payment-section bg-white rounded pa-4 mb-3"},Je={class:"d-flex align-center mb-3"},Re={class:"fs-16 fw-600 mb-0"},He={class:"payment-methods"},Xe={key:0,class:"payment-method-card d-block cursor-pointer"},Ge=["checked","onChange"],Ke=["src"],Qe={class:"fw-600 fs-13"},Ze={key:1,class:"payment-method-card d-block cursor-pointer"},et=["checked","onChange"],tt=["src"],st={class:"fw-600 fs-13"},at={class:"payment-method-card d-block cursor-pointer"},lt=["checked","onChange"],it=["src"],dt={class:"fw-600 fs-13"},ot={key:0,class:"my-3"},rt={class:"opacity-80 mb-3 fs-18 text-capitalize"},ct={class:"border px-2 py-2"},nt={key:1,class:"my-3"},pt={class:"opacity-80 mb-3 fs-18 text-capitalize"},ht={class:"border px-2 py-2"},mt={class:"text-capitalize my-1"},ut={class:"font-weight-bold"},yt={class:"text-capitalize my-1"},gt={class:"font-weight-bold"},ft={key:0,class:"text-capitalize d-flex my-1"},vt={class:"font-weight-bold me-1"},_t=["innerHTML"],bt={key:1,class:"text-capitalize"},kt={class:"font-weight-bold"},xt={key:2},wt={class:"fs-14 opacity-80 mb-2 text-center"},Pt={class:"d-flex flex-column flex-sm-row align-center justify-space-between"},Ct={class:"mb-3 mb-sm-0"},Dt={class:"fw-600 mb-2"},$t={class:"fs-14"},St={class:"opacity-80"},Mt={class:"fw-600 primary--text"},At={key:0,class:"fs-13 mt-1"},Tt={class:"opacity-80"},It={class:"fw-600"},Vt={class:"terms-section bg-white rounded pa-4 mb-3"},Ft={class:"d-flex align-start"},qt={for:"checkbox",class:"fs-14 opacity-80",style:{cursor:"pointer"}},zt={class:"checkout-footer bg-white rounded pa-4 sticky-bottom"},jt={class:"d-flex flex-column flex-sm-row align-center justify-space-between"},Ut={class:"mb-3 mb-sm-0 text-center text-sm-left"},Ot={class:"fs-14 opacity-80"},Nt={class:"fw-600"},Bt={class:"fs-24 fw-700 primary--text"},Lt={class:"white--text fs-16 fw-600"};const Et=e(D,[["render",function(e,t,s,k,x,w){const P=a("v-col"),C=a("v-row"),D=a("v-autocomplete"),Et=a("address-dialog"),Wt=a("v-chip"),Yt=a("v-btn"),Jt=a("v-card-title"),Rt=a("v-divider"),Ht=a("v-radio"),Xt=a("v-card-text"),Gt=a("v-spacer"),Kt=a("v-card-actions"),Qt=a("v-card"),Zt=a("v-dialog"),es=a("coupon-form"),ts=a("v-text-field"),ss=a("v-file-input"),as=a("recharge-dialog"),ls=a("router-link"),is=a("Payment"),ds=a("FailedDialog"),os=a("v-progress-circular"),rs=a("v-overlay"),cs=a("v-container");return l(),i(cs,{class:"pt-7 checkout-shopee-style"},{default:d(()=>[o(C,null,{default:d(()=>[o(P,{xl:"10",lg:"11",class:"mx-auto"},{default:d(()=>[r(c("div",$,[o(C,null,{default:d(()=>[o(P,{cols:"12",sm:"6"},{default:d(()=>[c("label",null,[r(c("input",{type:"radio",name:"delivery_type","onUpdate:modelValue":t[0]||(t[0]=e=>x.selectedDeliveryType=e),value:"home_delivery",onClick:t[1]||(t[1]=e=>w.ChooseDeleviryType("home_delivery"))},null,512),[[n,x.selectedDeliveryType]]),p(" "+h(e.$t("home_delivery")),1)])]),_:1}),e.getIsPickup&&e.generalSettings.pickup_point?(l(),i(P,{key:0,cols:"12",sm:"6"},{default:d(()=>[c("label",null,[r(c("input",{type:"radio",name:"delivery_type","onUpdate:modelValue":t[2]||(t[2]=e=>x.selectedDeliveryType=e),value:"pickup",onClick:t[3]||(t[3]=e=>w.checkForPickUp("pickup"))},null,512),[[n,x.selectedDeliveryType]]),p(" "+h(e.$t("pickup")),1)])]),_:1})):m("",!0)]),_:1}),e.generalSettings.pickup_point&&"pickup"==x.selectedDeliveryType&&x.for_pickup?(l(),u("div",S,[o(D,{modelValue:x.selectedPickupPoint,"onUpdate:modelValue":t[4]||(t[4]=e=>x.selectedPickupPoint=e),items:e.getPickupPoints,label:e.$t("select_pickup_point"),"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:"",autocomplete:"off",class:"mb-3"},null,8,["modelValue","items","label"])])):m("",!0)],512),[[f,!1]]),o(Et,{show:x.addDialogShow,onClose:w.addressDialogClosed,"old-address":x.addressSelectedForEdit},null,8,["show","onClose","old-address"]),"home_delivery"==x.selectedDeliveryType?(l(),u("div",M,[c("div",A,[t[25]||(t[25]=c("i",{class:"las la-map-marker-alt primary--text fs-20 me-2"},null,-1)),c("h3",T,h(e.$t("shipping_address")),1)]),e.getAddresses.length>0?(l(!0),u(y,{key:0},g(e.getAddresses,s=>r((l(),u("div",{key:"shipping-"+s.id,class:"selected-address"},[c("div",I,[c("div",V,[c("div",F,[p(h(s.first_name)+" "+h(s.last_name)+" ",1),c("span",q,"(+"+h(s.phone)+")",1)]),c("div",z,h(s.address)+", "+h(s.city)+", "+h(s.state)+", "+h(s.country)+" - "+h(s.postal_code),1)]),c("div",j,[s.default_shipping?(l(),i(Wt,{key:0,small:"",outlined:"",color:"primary",class:"px-3"},{default:d(()=>[p(h(e.$t("default")||"Mặc Định"),1)]),_:1})):m("",!0),o(Yt,{small:"",text:"",color:"primary",onClick:t[5]||(t[5]=e=>x.showAddressSelection=!0)},{default:d(()=>[p(h(e.$t("change")),1)]),_:1})])])])),[[f,x.selectedShippingAddressId==s.id]])),128)):(l(),i(Yt,{key:1,color:"primary",outlined:"",onClick:t[6]||(t[6]=v(e=>x.addDialogShow=!0,["stop"]))},{default:d(()=>[t[26]||(t[26]=c("i",{class:"las la-plus me-2"},null,-1)),p(" "+h(e.$t("add_new_address")),1)]),_:1})),o(Zt,{modelValue:x.showAddressSelection,"onUpdate:modelValue":t[10]||(t[10]=e=>x.showAddressSelection=e),"max-width":"700"},{default:d(()=>[o(Qt,null,{default:d(()=>[o(Jt,{class:"d-flex justify-space-between align-center"},{default:d(()=>[c("span",null,h(e.$t("select_address")),1),o(Yt,{icon:"",onClick:t[7]||(t[7]=e=>x.showAddressSelection=!1)},{default:d(()=>[...t[27]||(t[27]=[c("i",{class:"las la-times"},null,-1)])]),_:1})]),_:1}),o(Rt),o(Xt,{class:"pa-4",style:{"max-height":"500px","overflow-y":"auto"}},{default:d(()=>[(l(!0),u(y,null,g(e.getAddresses,s=>(l(),u("div",{key:"select-shipping-"+s.id,class:_(["address-option pa-3 mb-2 rounded border",{"border-primary":x.selectedShippingAddressId==s.id}]),onClick:e=>w.selectShippingAddress(s.id),style:{cursor:"pointer"}},[c("div",O,[o(Ht,{value:s.id,"model-value":x.selectedShippingAddressId,color:"primary",class:"mt-0 me-3"},null,8,["value","model-value"]),c("div",N,[c("div",B,[p(h(s.first_name)+" "+h(s.last_name)+" ",1),c("span",L,"(+"+h(s.phone)+")",1),s.default_shipping?(l(),i(Wt,{key:0,"x-small":"",color:"primary",class:"ms-2"},{default:d(()=>[p(h(e.$t("default")),1)]),_:1})):m("",!0)]),c("div",E,h(s.address)+", "+h(s.city)+", "+h(s.state)+", "+h(s.country)+" - "+h(s.postal_code),1)]),o(Yt,{icon:"",small:"",onClick:v(e=>w.editAddress(s),["stop"])},{default:d(()=>[...t[28]||(t[28]=[c("i",{class:"las la-edit"},null,-1)])]),_:2},1032,["onClick"])])],10,U))),128)),o(Yt,{class:"mt-3",color:"primary",outlined:"",block:"",onClick:t[8]||(t[8]=v(e=>{x.addDialogShow=!0,x.showAddressSelection=!1},["stop"]))},{default:d(()=>[t[29]||(t[29]=c("i",{class:"las la-plus me-2"},null,-1)),p(" "+h(e.$t("add_new_address")),1)]),_:1})]),_:1}),o(Rt),o(Kt,null,{default:d(()=>[o(Gt),o(Yt,{color:"primary",onClick:t[9]||(t[9]=e=>x.showAddressSelection=!1)},{default:d(()=>[p(h(e.$t("confirm")||"Xác nhận"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):m("",!0),"home_delivery"==x.selectedDeliveryType?r((l(),u("div",W,[(l(!0),u(y,null,g(e.getAddresses,e=>(l(),u("div",{key:"billing-"+e.id},[c("label",null,[r(c("input",{type:"radio",name:"checkout_billing","onUpdate:modelValue":t[11]||(t[11]=e=>x.selectedBillingAddressId=e),value:e.id,checked:e.default_billing},null,8,Y),[[n,x.selectedBillingAddressId]])])]))),128))],512)),[[f,!1]]):m("",!0),c("div",J,[c("div",R,[c("div",H,h(e.$t("products")||"Sản phẩm"),1),c("div",X,h(e.$t("unit_price")||"Đơn giá"),1),c("div",G,h(e.$t("quantity")||"Số lượng"),1),c("div",K,h(e.$t("amount")||"Thành tiền"),1)]),(l(!0),u(y,null,g(e.getCartProducts,s=>(l(),u("div",{key:s.id,class:"product-item d-flex align-start pa-3 mb-2 border-bottom"},[c("div",Q,[c("img",{src:s.thumbnail||s.product_thumbnail_image||e.static_asset("/assets/img/placeholder.jpg"),class:"rounded me-3",onError:t[12]||(t[12]=e=>w.imageFallback(e)),style:{width:"80px",height:"80px","object-fit":"cover"}},null,40,Z),c("div",null,[c("div",ee,h(s.name||s.product_name),1),s.combinations&&s.combinations.length>0?(l(),u("div",te,h(e.$t("variant"))+": "+h(w.formatVariation(s.combinations)),1)):m("",!0)])]),c("div",se,[c("div",ae,h(e.format_price(w.getProductPrice(s))),1)]),c("div",le,[c("div",null,h(s.qty||s.quantity||0),1)]),c("div",ie,[c("div",de,h(e.format_price(w.getProductPrice(s)*(s.qty||s.quantity||0))),1)]),c("div",oe,[c("div",re,h(e.format_price(w.getProductPrice(s)*(s.qty||s.quantity||0))),1),c("div",ce," x"+h(s.qty||s.quantity||0),1)])]))),128)),e.is_addon_activated("multi_vendor")?m("",!0):(l(),u("div",ne,[c("div",pe,[t[30]||(t[30]=c("i",{class:"las la-ticket-alt primary--text fs-20 me-2"},null,-1)),c("span",he,h(e.$t("shop_voucher")||"Voucher của Shop"),1),o(es,{"for-checkout":""})])])),"home_delivery"==x.selectedDeliveryType?(l(),u("div",me,[c("div",ue,[t[31]||(t[31]=c("i",{class:"las la-shipping-fast primary--text fs-20 me-2"},null,-1)),c("span",ye,h(e.$t("delivery_option")||"Phương thức vận chuyển"),1)]),""!==x.selectedDeliveryOption?(l(),u("div",ge,[c("div",fe,[c("label",{class:_(["delivery-option-item pa-3 rounded border cursor-pointer d-flex align-center flex-grow-1",{"border-primary bg-soft-primary":"standard"===x.selectedDeliveryOption}])},[r(c("input",{type:"radio",name:"delivery_option","onUpdate:modelValue":t[13]||(t[13]=e=>x.selectedDeliveryOption=e),value:"standard",class:"me-2"},null,512),[[n,x.selectedDeliveryOption]]),c("div",ve,[c("div",_e,h(e.$t("standard_delivery")||"Tiêu chuẩn"),1),c("div",be,h(e.getStandardTime)+" "+h(e.$t("days"))+" - "+h(e.format_price(x.standardDeliveryCost)),1)])],2),e.generalSettings.express_delivery_option?(l(),u("label",{key:0,class:_(["delivery-option-item pa-3 rounded border cursor-pointer d-flex align-center flex-grow-1",{"border-primary bg-soft-primary":"express"===x.selectedDeliveryOption}])},[r(c("input",{type:"radio",name:"delivery_option","onUpdate:modelValue":t[14]||(t[14]=e=>x.selectedDeliveryOption=e),value:"express",class:"me-2"},null,512),[[n,x.selectedDeliveryOption]]),c("div",ke,[c("div",xe,h(e.$t("express_delivery")||"Nhanh"),1),c("div",we,h(e.getExpressTime)+" "+h(e.$t("days"))+" - "+h(e.format_price(x.expressDeliveryCost)),1)])],2)):m("",!0)])])):(l(),u("div",Pe,h(e.$t("sorry_delivery_is_not_available_in_this_shipping_address")),1))])):m("",!0),c("div",Ce,[c("div",De,[c("span",$e,h(e.$t("note")||"Lời nhắn")+":",1),o(ts,{modelValue:x.orderNote,"onUpdate:modelValue":t[15]||(t[15]=e=>x.orderNote=e),placeholder:e.$t("note_to_seller")||"Lưu ý cho Người bán...",dense:"",outlined:"","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","placeholder"])])])]),c("div",Se,[1==e.generalSettings.club_point?(l(),u("div",Me,[c("span",Ae,h(e.$t("total_club_points")),1),c("span",Te,h(e.getCartClubPoints),1)])):m("",!0),c("div",Ie,[c("div",Ve,[c("span",Fe,h(e.$t("sub_total")),1),c("span",null,h(e.format_price(e.getCartPrice-e.getCartTax,!1)),1)]),c("div",qe,[c("span",ze,h(e.$t("shipping_charge")),1),c("span",null,h("home_delivery"==x.selectedDeliveryType?"standard"===x.selectedDeliveryOption?e.format_price(x.standardDeliveryCost*e.getCartShops.length):e.format_price(x.expressDeliveryCost*e.getCartShops.length):e.format_price(0)),1)]),c("div",je,[c("span",Ue,h(e.$t("tax")),1),c("span",null,h(e.format_price(e.getCartTax,!1)),1)]),e.getTotalCouponDiscount>0?(l(),u("div",Oe,[c("span",Ne,h(e.$t("discount")),1),c("span",Be,"-"+h(e.format_price(e.getTotalCouponDiscount)),1)])):m("",!0),o(Rt,{class:"my-2"}),c("div",Le,[c("span",Ee,h(e.$t("total_to_pay")),1),c("span",We,h(e.format_price(w.totalPrice,!1)),1)])])]),c("div",Ye,[c("div",Je,[t[32]||(t[32]=c("i",{class:"las la-credit-card primary--text fs-20 me-2"},null,-1)),c("h3",Re,h(e.$t("payment_options")||"Phương thức thanh toán"),1)]),c("div",He,[o(C,{class:"mb-3"},{default:d(()=>[(l(!0),u(y,null,g(e.paymentMethods,(t,s)=>(l(),i(P,{cols:"6",sm:"4",md:"3",key:"online-"+s,class:_([1==t.status?"":"d-none"])},{default:d(()=>[e.getIsDigital&&"cash_on_delivery"!=t.code?(l(),u("label",Xe,[c("input",{type:"radio",name:"checkout_payment_method",checked:x.selectedPaymentMethod&&t.code==x.selectedPaymentMethod.code,onChange:e=>w.paymentSelected(e,t),style:{display:"none"}},null,40,Ge),c("span",{class:_(["d-block pa-3 text-center rounded border transition",{"border-primary bg-soft-primary":x.selectedPaymentMethod&&t.code==x.selectedPaymentMethod.code,"border-gray-300":!x.selectedPaymentMethod||t.code!=x.selectedPaymentMethod.code}])},[c("img",{src:t.img,class:"img-fluid w-100 mb-2",style:{height:"40px","object-fit":"contain"}},null,8,Ke),c("span",Qe,h(t.name),1)],2)])):e.getIsDigital?m("",!0):(l(),u("label",Ze,[c("input",{type:"radio",name:"checkout_payment_method",checked:x.selectedPaymentMethod&&t.code==x.selectedPaymentMethod.code,onChange:e=>w.paymentSelected(e,t),style:{display:"none"}},null,40,et),c("span",{class:_(["d-block pa-3 text-center rounded border transition",{"border-primary bg-soft-primary":x.selectedPaymentMethod&&t.code==x.selectedPaymentMethod.code,"border-gray-300":!x.selectedPaymentMethod||t.code!=x.selectedPaymentMethod.code}])},[c("img",{src:t.img,class:"img-fluid w-100 mb-2",style:{height:"40px","object-fit":"contain"}},null,8,tt),c("span",st,h(t.name),1)],2)]))]),_:2},1032,["class"]))),128)),(l(!0),u(y,null,g(e.offlinePaymentMethods,e=>(l(),i(P,{cols:"6",sm:"4",md:"3",key:"offline-"+e.code},{default:d(()=>[c("label",at,[c("input",{type:"radio",name:"wallet_payment_method",checked:x.selectedPaymentMethod&&e.code==x.selectedPaymentMethod.code,onChange:t=>w.paymentSelected(t,e),style:{display:"none"}},null,40,lt),c("span",{class:_(["d-block pa-3 text-center rounded border transition",{"border-primary bg-soft-primary":x.selectedPaymentMethod&&e.code==x.selectedPaymentMethod.code,"border-gray-300":!x.selectedPaymentMethod||e.code!=x.selectedPaymentMethod.code}])},[c("img",{src:e.img,class:"w-100 mb-2",style:{height:"40px","object-fit":"contain"}},null,8,it),c("span",dt,h(e.name),1)],2)])]),_:2},1024))),128))]),_:1})]),x.selectedPaymentMethod&&"authorizenet"==x.selectedPaymentMethod.code?(l(),u("div",ot,[c("h3",rt,h(e.$t("account_details")),1),c("div",ct,[o(ts,{variant:"plain",class:"my-2 text-field",placeholder:e.$t("please_enter_valid_card_number"),type:"text",modelValue:x.authorizeNet.card_number,"onUpdate:modelValue":t[16]||(t[16]=e=>x.authorizeNet.card_number=e),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),o(ts,{variant:"plain",class:"my-2 text-field",placeholder:e.$t("please_enter_cvv"),type:"text",modelValue:x.authorizeNet.cvv,"onUpdate:modelValue":t[17]||(t[17]=e=>x.authorizeNet.cvv=e),"hide-details":"auto",required:"",outlined:""},null,8,["placeholder","modelValue"]),o(D,{variant:"plain",modelValue:x.authorizeNet.expiration_month,"onUpdate:modelValue":t[18]||(t[18]=e=>x.authorizeNet.expiration_month=e),items:x.months,placeholder:"$t('select_month')","hide-details":"auto",class:"mb-3 text-field",outlined:"","allow-overflow":"",dense:"",required:"",label:e.$t("select_month")},null,8,["modelValue","items","label"]),o(D,{variant:"plain",modelValue:x.authorizeNet.expiration_year,"onUpdate:modelValue":t[19]||(t[19]=e=>x.authorizeNet.expiration_year=e),items:e.dateLoop,placeholder:"$t('select_year')","hide-details":"auto",class:"mb-3 text-field",outlined:"","allow-overflow":"",dense:"",required:"",label:e.$t("select_year")},null,8,["modelValue","items","label"])])])):m("",!0),x.selectedPaymentMethod&&x.selectedPaymentMethod.code.includes("offline_payment")?(l(),u("div",nt,[c("h3",pt,h(e.$t("account_details")),1),c("div",ht,[c("div",mt,[c("span",ut,h(e.$t("payment_name")),1),p(" : "+h(x.selectedPaymentMethod.name),1)]),c("div",yt,[c("span",gt,h(e.$t("payment_type")),1),p(" : "+h(x.selectedPaymentMethod.type_show),1)]),x.selectedPaymentMethod.description?(l(),u("div",ft,[c("span",vt,h(e.$t("description"))+" :",1),c("span",{innerHTML:x.selectedPaymentMethod.description},null,8,_t)])):m("",!0),x.selectedPaymentMethod.bank_info.length>0?(l(),u("div",bt,[c("span",kt,h(e.$t("bank_info"))+":",1),(l(!0),u(y,null,g(x.selectedPaymentMethod.bank_info,t=>(l(),u("div",{class:"border px-2 py-2 mt-2",key:t.bank_name},[c("div",null,h(e.$t("bank_name"))+": "+h(t.bank_name),1),c("div",null,h(e.$t("account_name"))+": "+h(t.account_name),1),c("div",null,h(e.$t("account_number"))+": "+h(t.account_number),1),c("div",null,h(e.$t("routing_number"))+": "+h(t.routing_number),1)]))),128))])):m("",!0),x.selectedPaymentMethod&&x.selectedPaymentMethod.code.includes("offline_payment")?(l(),u("div",xt,[o(ts,{class:"my-2 text-field",placeholder:e.$t("transaction_id"),type:"text",modelValue:x.transactionId,"onUpdate:modelValue":t[20]||(t[20]=e=>x.transactionId=e),"hide-details":"auto",required:"",variant:"plain"},null,8,["placeholder","modelValue"]),o(ss,{accept:"image/*",label:e.$t("add_receipt"),placeholder:e.$t("add_receipt"),flat:"",variant:"plain",class:"text-field","prepend-icon":"",clearable:"",modelValue:x.receipt,"onUpdate:modelValue":t[21]||(t[21]=e=>x.receipt=e)},null,8,["label","placeholder","modelValue"])])):m("",!0)])])):m("",!0),1==e.generalSettings.wallet_system?(l(),u(y,{key:2},[o(Rt,{class:"my-3"}),c("div",wt,h(e.$t("or")),1),c("div",{class:_(["wallet-section border rounded pa-4 cursor-pointer transition",{"bg-soft-primary border-primary":x.selectedPaymentMethod&&"wallet"==x.selectedPaymentMethod.code,"border-gray-300":!x.selectedPaymentMethod||"wallet"!=x.selectedPaymentMethod.code}]),onClick:t[23]||(t[23]=e=>w.walletSelected())},[o(as,{show:x.rechargeDialogShow,from:"/checkout",onClose:w.rechargeDialogClosed},null,8,["show","onClose"]),c("div",Pt,[c("div",Ct,[c("div",Dt,[t[33]||(t[33]=c("i",{class:"las la-wallet me-1"},null,-1)),p(" "+h(e.$t("pay_with_wallet")),1)]),c("div",$t,[c("span",St,h(e.$t("your_wallet_balance"))+": ",1),c("span",Mt,h(e.format_price(e.currentUser.balance)),1)]),x.selectedPaymentMethod&&"wallet"==x.selectedPaymentMethod.code?(l(),u("div",At,[c("span",Tt,h(e.$t("remaining_balance"))+": ",1),c("span",It,h(e.format_price(e.currentUser.balance-w.totalPrice)),1)])):m("",!0)]),o(Yt,{color:"primary",outlined:"",small:"",onClick:t[22]||(t[22]=v(e=>x.rechargeDialogShow=!0,["stop"]))},{default:d(()=>[p(h(e.$t("recharge_wallet")),1)]),_:1})])],2)],64)):m("",!0)]),c("div",Vt,[c("div",Ft,[r(c("input",{class:"me-2 mt-1",type:"checkbox",id:"checkbox","onUpdate:modelValue":t[24]||(t[24]=e=>x.checkbox=e),style:{width:"16px",height:"16px",cursor:"pointer"}},null,512),[[b,x.checkbox]]),c("label",qt,[p(h(e.$t("by_clicking_proceed_i_agree_to"))+" "+h(e.$store.getters["app/appName"])+"'s ",1),o(ls,{to:{name:"CustomPage",params:{pageSlug:"terms-and-conditions"}},class:"primary--text fw-500"},{default:d(()=>[p(h(e.$t("terms_and_conditions")),1)]),_:1}),t[34]||(t[34]=p(", ",-1)),o(ls,{to:{name:"CustomPage",params:{pageSlug:"return-policy"}},class:"primary--text fw-500"},{default:d(()=>[p(h(e.$t("return_policy")),1)]),_:1}),p(" "+h(e.$t("and"))+" ",1),o(ls,{to:{name:"CustomPage",params:{pageSlug:"privacy-policy"}},class:"primary--text fw-500"},{default:d(()=>[p(h(e.$t("privacy_policy")),1)]),_:1})])])]),c("div",zt,[c("div",jt,[c("div",Ut,[c("div",Ot,[p(h(e.$t("total")||"Tổng thanh toán")+" ",1),c("span",Nt,"("+h(e.getSelectedCartIds.length)+" "+h(e.$t("products")||"sản phẩm")+")",1),t[35]||(t[35]=p(": ",-1))]),c("div",Bt,h(e.format_price(w.totalPrice)),1)]),o(Yt,{elevation:"0",color:"primary","x-large":"",class:"px-10",onClick:w.proceedCheckout,loading:x.checkoutLoading,disabled:x.checkoutLoading||!x.checkbox},{default:d(()=>[c("span",Lt,h(e.$t("place_order")||"Đặt hàng"),1)]),_:1},8,["onClick","loading","disabled"])])]),o(is,{ref:"makePayment"},null,512),o(ds,{ref:"failedPayment"},null,512),o(rs,{value:x.checkoutLoading,"z-index":"99999"},{default:d(()=>[o(os,{indeterminate:"",size:"64"})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-54936dbb"]]);export{Et as default};
