import{_ as a,m as t,f as e,h as l,o as s,i,k as o,t as n,j as d,w as r,n as c}from"./app-5a177a8d.js";import{W as h}from"./WithdrawDialog-14d1f9a6.js";const m={data:()=>({withdrawDialogShow:!1,loading:!0,currentPage:1,totalPages:1,paymentHistory:[]}),components:{WithdrawDialog:h},computed:{...t("affiliate",["getAffiliateBalance"]),headers(){return[{title:this.$i18n.t("date"),align:"start",sortable:!1,value:"date"},{title:this.$i18n.t("amount"),align:"start",sortable:!1,value:"amount"},{title:this.$i18n.t("payment_method"),sortable:!1,align:"end",value:"payment_method"}]}},methods:{...e("affiliate",["fetchAffiliateBalance"]),withdrawDialogClosed(){this.withdrawDialogShow=!1},async getPaymentHistory(a){this.loading=!0;const t=await this.call_api("get",`user/affiliate/payment-history?page=${a}`);200==t.status?(this.paymentHistory=t.data.data,this.totalPages=t.data.meta.last_page,this.currentPage=t.data.meta.current_page):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.loading=!1}},created(){let a=this.$route.query.page||this.currentPage;this.getPaymentHistory(a),this.fetchAffiliateBalance()}},f={class:"ps-lg-7 pt-4"},u={class:"fs-21 fw-700 opacity-80 mb-5"},g={class:"fs-14 mb-3 fw-700 primary--text"},p={class:"fw-500 text-h4"},w={class:"fs-14 mb-3 w-100"},y={class:"mt-4"},_={class:"fs-21 fw-700 opacity-80 mb-5"},v={class:"d-block fw-600"},b={class:"d-block fw-600"},x={class:"d-block fw-600"},P={class:"text-start"};const $=a(m,[["render",function(a,t,e,h,m,$){const k=l("v-sheet"),D=l("v-col"),H=l("withdraw-dialog"),C=l("v-btn"),j=l("v-row"),A=l("v-data-table"),B=l("v-pagination"),S=l("v-card-text"),V=l("v-card");return s(),i("div",null,[o("div",f,[o("h1",u,n(a.$t("affiliate")),1),d(j,null,{default:r(()=>[d(D,{cols:"12",sm:"6"},{default:r(()=>[d(k,{color:"grey darken-3",rounded:"rounded",elevation:"0",height:"130",class:"d-flex justify-center align-center white--text flex-column"},{default:r(()=>[o("div",g,n(a.$t("affiliate_balance")),1),o("div",p,n(a.getAffiliateBalance),1)]),_:1})]),_:1}),d(D,{cols:"12",sm:"6"},{default:r(()=>[d(H,{show:a.withdrawDialogShow,onClose:$.withdrawDialogClosed},null,8,["show","onClose"]),d(C,{class:"border-dashed border-gray-300 h-100 py-6",elevation:"0",block:"","x-large":"",onClick:t[0]||(t[0]=c(t=>a.withdrawDialogShow=!0,["stop"]))},{default:r(()=>[o("span",null,[o("div",w,n(a.$t("affiliate_withdraw_request")),1),t[2]||(t[2]=o("i",{class:"las la-plus la-3x opacity-70"},null,-1))])]),_:1})]),_:1})]),_:1}),d(j,null,{default:r(()=>[d(D,null,{default:r(()=>[o("div",y,[d(V,{class:"mx-auto"},{default:r(()=>[d(S,null,{default:r(()=>[o("h1",_,n(a.$t("affiliate_payment_history")),1),d(A,{headers:$.headers,items:a.paymentHistory,class:"border px-4 pt-3","no-data-text":a.$t("no_data_available")||"Không có dữ liệu","hide-default-footer":"","item-class":"c-pointer"},{"item.date":r(({item:a})=>[o("span",v,n(a.date),1)]),"item.amount":r(({item:a})=>[o("span",b,n(a.amount),1)]),"item.payment_method":r(({item:a})=>[o("span",x,n(a.payment_method),1)]),_:2},1032,["headers","items","no-data-text"]),o("div",P,[d(B,{modelValue:a.currentPage,"onUpdate:modelValue":[t[1]||(t[1]=t=>a.currentPage=t),$.getPaymentHistory],length:a.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0",class:"my-4"},null,8,["modelValue","onUpdate:modelValue","length"])])]),_:1})]),_:1})])]),_:1})]),_:1})])])}]]);export{$ as default};
